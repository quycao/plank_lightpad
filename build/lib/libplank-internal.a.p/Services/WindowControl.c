/* WindowControl.c generated by valac 0.48.17, the Vala compiler
 * generated from WindowControl.vala, do not modify */

/**/
/*  Copyright (C) 2011-2012 Robert Dyer, Rico Tzschichholz*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <glib.h>
#include <libwnck/libwnck.h>
#include <gdk/gdk.h>
#include <libbamf/libbamf.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <cairo-gobject.h>

typedef enum  {
	PLANK_STRUTS_LEFT,
	PLANK_STRUTS_RIGHT,
	PLANK_STRUTS_TOP,
	PLANK_STRUTS_BOTTOM,
	PLANK_STRUTS_LEFT_START,
	PLANK_STRUTS_LEFT_END,
	PLANK_STRUTS_RIGHT_START,
	PLANK_STRUTS_RIGHT_END,
	PLANK_STRUTS_TOP_START,
	PLANK_STRUTS_TOP_END,
	PLANK_STRUTS_BOTTOM_START,
	PLANK_STRUTS_BOTTOM_END,
	PLANK_STRUTS_N_VALUES
} PlankStruts;

#define PLANK_TYPE_STRUTS (plank_struts_get_type ())

#define PLANK_TYPE_WINDOW_CONTROL (plank_window_control_get_type ())
#define PLANK_WINDOW_CONTROL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PLANK_TYPE_WINDOW_CONTROL, PlankWindowControl))
#define PLANK_WINDOW_CONTROL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PLANK_TYPE_WINDOW_CONTROL, PlankWindowControlClass))
#define PLANK_IS_WINDOW_CONTROL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PLANK_TYPE_WINDOW_CONTROL))
#define PLANK_IS_WINDOW_CONTROL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PLANK_TYPE_WINDOW_CONTROL))
#define PLANK_WINDOW_CONTROL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PLANK_TYPE_WINDOW_CONTROL, PlankWindowControlClass))

typedef struct _PlankWindowControl PlankWindowControl;
typedef struct _PlankWindowControlClass PlankWindowControlClass;
typedef struct _PlankWindowControlPrivate PlankWindowControlPrivate;
enum  {
	PLANK_WINDOW_CONTROL_0_PROPERTY,
	PLANK_WINDOW_CONTROL_NUM_PROPERTIES
};
static GParamSpec* plank_window_control_properties[PLANK_WINDOW_CONTROL_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_array_unref0(var) ((var == NULL) ? NULL : (var = (g_array_unref (var), NULL)))
typedef struct _Block1Data Block1Data;

struct _PlankWindowControl {
	GObject parent_instance;
	PlankWindowControlPrivate * priv;
};

struct _PlankWindowControlClass {
	GObjectClass parent_class;
};

struct _Block1Data {
	int _ref_count_;
	guint32 event_time;
};

static gpointer plank_window_control_parent_class = NULL;
static guint plank_window_control_delayed_focus_timer_id;
static guint plank_window_control_delayed_focus_timer_id = 0U;
static WnckWindow* plank_window_control_delayed_focus_window;
static WnckWindow* plank_window_control_delayed_focus_window = NULL;

GType plank_struts_get_type (void) G_GNUC_CONST;
GType plank_window_control_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PlankWindowControl, g_object_unref)
#define PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY 10000U
#define PLANK_WINDOW_CONTROL_VIEWPORT_CHANGE_DELAY 200U
static PlankWindowControl* plank_window_control_new (void);
static PlankWindowControl* plank_window_control_construct (GType object_type);
void plank_window_control_initialize (void);
static void plank_window_control_window_manager_changed (WnckScreen* screen);
static void _plank_window_control_window_manager_changed_wnck_screen_window_manager_changed (WnckScreen* _sender,
                                                                                      gpointer self);
static void plank_window_control_handle_window_closed (WnckWindow* window);
static void _plank_window_control_handle_window_closed_wnck_screen_window_closed (WnckScreen* _sender,
                                                                           WnckWindow* window,
                                                                           gpointer self);
GdkPixbuf* plank_window_control_get_app_icon (BamfApplication* app);
GdkPixbuf* plank_window_control_get_window_icon (BamfWindow* window);
gboolean plank_window_control_has_maximized_window (BamfApplication* app);
gboolean plank_window_control_has_minimized_window (BamfApplication* app);
gboolean plank_window_control_has_window_on_workspace (BamfApplication* app,
                                                       WnckWorkspace* workspace);
void plank_window_control_update_icon_regions (BamfApplication* app,
                                               GdkRectangle* rect);
void plank_window_control_close_all (BamfApplication* app,
                                     guint32 event_time);
void plank_window_control_focus_window (BamfWindow* window,
                                        guint32 event_time);
static void plank_window_control_center_and_focus_window (WnckWindow* w,
                                                   guint32 event_time);
static void plank_window_control_focus_window_by_xid (guint32 xid,
                                               guint32 event_time);
static gint plank_window_control_find_active_xid_index (GArray* xids);
void plank_window_control_focus_previous (BamfApplication* app,
                                          guint32 event_time);
void plank_window_control_focus_next (BamfApplication* app,
                                      guint32 event_time);
void plank_window_control_minimize (BamfApplication* app);
GList* plank_window_control_get_ordered_window_stack (BamfApplication* app);
void plank_window_control_restore (BamfApplication* app,
                                   guint32 event_time);
void plank_window_control_maximize (BamfApplication* app);
void plank_window_control_unmaximize (BamfApplication* app);
void plank_window_control_smart_focus (BamfApplication* app,
                                       guint32 event_time);
static void plank_window_control_intelligent_focus_off_viewport_window (WnckWindow* targetWindow,
                                                                 GList* additional_windows,
                                                                 guint32 event_time);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gboolean plank_window_control_windows_share_viewport (WnckWindow* first,
                                                      WnckWindow* second);
static gboolean __lambda4_ (Block1Data* _data1_);
static gboolean ___lambda4__gsource_func (gpointer self);
void plank_window_control_get_easy_geometry (WnckWindow* w,
                                             GdkRectangle* result);
static void plank_window_control_finalize (GObject * obj);
static GType plank_window_control_get_type_once (void);

static GType
plank_struts_get_type_once (void)
{
	static const GEnumValue values[] = {{PLANK_STRUTS_LEFT, "PLANK_STRUTS_LEFT", "left"}, {PLANK_STRUTS_RIGHT, "PLANK_STRUTS_RIGHT", "right"}, {PLANK_STRUTS_TOP, "PLANK_STRUTS_TOP", "top"}, {PLANK_STRUTS_BOTTOM, "PLANK_STRUTS_BOTTOM", "bottom"}, {PLANK_STRUTS_LEFT_START, "PLANK_STRUTS_LEFT_START", "left-start"}, {PLANK_STRUTS_LEFT_END, "PLANK_STRUTS_LEFT_END", "left-end"}, {PLANK_STRUTS_RIGHT_START, "PLANK_STRUTS_RIGHT_START", "right-start"}, {PLANK_STRUTS_RIGHT_END, "PLANK_STRUTS_RIGHT_END", "right-end"}, {PLANK_STRUTS_TOP_START, "PLANK_STRUTS_TOP_START", "top-start"}, {PLANK_STRUTS_TOP_END, "PLANK_STRUTS_TOP_END", "top-end"}, {PLANK_STRUTS_BOTTOM_START, "PLANK_STRUTS_BOTTOM_START", "bottom-start"}, {PLANK_STRUTS_BOTTOM_END, "PLANK_STRUTS_BOTTOM_END", "bottom-end"}, {PLANK_STRUTS_N_VALUES, "PLANK_STRUTS_N_VALUES", "n-values"}, {0, NULL, NULL}};
	GType plank_struts_type_id;
	plank_struts_type_id = g_enum_register_static ("PlankStruts", values);
	return plank_struts_type_id;
}

GType
plank_struts_get_type (void)
{
	static volatile gsize plank_struts_type_id__volatile = 0;
	if (g_once_init_enter (&plank_struts_type_id__volatile)) {
		GType plank_struts_type_id;
		plank_struts_type_id = plank_struts_get_type_once ();
		g_once_init_leave (&plank_struts_type_id__volatile, plank_struts_type_id);
	}
	return plank_struts_type_id__volatile;
}

static PlankWindowControl*
plank_window_control_construct (GType object_type)
{
	PlankWindowControl * self = NULL;
#line 49 "../lib/Services/WindowControl.vala"
	self = (PlankWindowControl*) g_object_new (object_type, NULL);
#line 49 "../lib/Services/WindowControl.vala"
	return self;
#line 177 "WindowControl.c"
}

static PlankWindowControl*
plank_window_control_new (void)
{
#line 49 "../lib/Services/WindowControl.vala"
	return plank_window_control_construct (PLANK_TYPE_WINDOW_CONTROL);
#line 185 "WindowControl.c"
}

static void
_plank_window_control_window_manager_changed_wnck_screen_window_manager_changed (WnckScreen* _sender,
                                                                                 gpointer self)
{
#line 65 "../lib/Services/WindowControl.vala"
	plank_window_control_window_manager_changed (_sender);
#line 194 "WindowControl.c"
}

static void
_plank_window_control_handle_window_closed_wnck_screen_window_closed (WnckScreen* _sender,
                                                                      WnckWindow* window,
                                                                      gpointer self)
{
#line 66 "../lib/Services/WindowControl.vala"
	plank_window_control_handle_window_closed (window);
#line 204 "WindowControl.c"
}

void
plank_window_control_initialize (void)
{
	WnckScreen* screen = NULL;
	WnckScreen* _tmp0_;
	WnckScreen* _tmp1_;
	WnckScreen* _tmp2_;
	WnckScreen* _tmp3_;
	WnckScreen* _tmp4_;
	const gchar* _tmp5_;
#line 55 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_screen_get_default ();
#line 55 "../lib/Services/WindowControl.vala"
	screen = _tmp0_;
#line 57 "../lib/Services/WindowControl.vala"
	wnck_set_client_type (WNCK_CLIENT_TYPE_PAGER);
#line 60 "../lib/Services/WindowControl.vala"
	gdk_error_trap_push ();
#line 61 "../lib/Services/WindowControl.vala"
	_tmp1_ = screen;
#line 61 "../lib/Services/WindowControl.vala"
	wnck_screen_force_update (_tmp1_);
#line 62 "../lib/Services/WindowControl.vala"
	if (gdk_error_trap_pop () != 0) {
#line 63 "../lib/Services/WindowControl.vala"
		g_critical ("WindowControl.vala:63: Wnck.Screen.force_update() caused a XError");
#line 233 "WindowControl.c"
	}
#line 65 "../lib/Services/WindowControl.vala"
	_tmp2_ = screen;
#line 65 "../lib/Services/WindowControl.vala"
	g_signal_connect_after (_tmp2_, "window-manager-changed", (GCallback) _plank_window_control_window_manager_changed_wnck_screen_window_manager_changed, NULL);
#line 66 "../lib/Services/WindowControl.vala"
	_tmp3_ = screen;
#line 66 "../lib/Services/WindowControl.vala"
	g_signal_connect_after (_tmp3_, "window-closed", (GCallback) _plank_window_control_handle_window_closed_wnck_screen_window_closed, NULL);
#line 68 "../lib/Services/WindowControl.vala"
	_tmp4_ = screen;
#line 68 "../lib/Services/WindowControl.vala"
	_tmp5_ = wnck_screen_get_window_manager_name (_tmp4_);
#line 68 "../lib/Services/WindowControl.vala"
	g_message ("WindowControl.vala:68: Window-manager: %s", _tmp5_);
#line 249 "WindowControl.c"
}

static void
plank_window_control_window_manager_changed (WnckScreen* screen)
{
	const gchar* _tmp0_;
#line 71 "../lib/Services/WindowControl.vala"
	g_return_if_fail (screen != NULL);
#line 74 "../lib/Services/WindowControl.vala"
	gdk_error_trap_push ();
#line 75 "../lib/Services/WindowControl.vala"
	wnck_screen_force_update (screen);
#line 76 "../lib/Services/WindowControl.vala"
	if (gdk_error_trap_pop () != 0) {
#line 77 "../lib/Services/WindowControl.vala"
		g_critical ("WindowControl.vala:77: Wnck.Screen.force_update() caused a XError");
#line 266 "WindowControl.c"
	}
#line 79 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_screen_get_window_manager_name (screen);
#line 79 "../lib/Services/WindowControl.vala"
	g_warning ("WindowControl.vala:79: Window-manager changed: %s", _tmp0_);
#line 272 "WindowControl.c"
}

static void
plank_window_control_handle_window_closed (WnckWindow* window)
{
	gboolean _tmp0_ = FALSE;
#line 82 "../lib/Services/WindowControl.vala"
	g_return_if_fail (window != NULL);
#line 84 "../lib/Services/WindowControl.vala"
	if (plank_window_control_delayed_focus_timer_id > 0U) {
#line 283 "WindowControl.c"
		WnckWindow* _tmp1_;
#line 84 "../lib/Services/WindowControl.vala"
		_tmp1_ = plank_window_control_delayed_focus_window;
#line 84 "../lib/Services/WindowControl.vala"
		_tmp0_ = _tmp1_ == window;
#line 289 "WindowControl.c"
	} else {
#line 84 "../lib/Services/WindowControl.vala"
		_tmp0_ = FALSE;
#line 293 "WindowControl.c"
	}
#line 84 "../lib/Services/WindowControl.vala"
	if (_tmp0_) {
#line 85 "../lib/Services/WindowControl.vala"
		g_source_remove (plank_window_control_delayed_focus_timer_id);
#line 86 "../lib/Services/WindowControl.vala"
		plank_window_control_delayed_focus_timer_id = 0U;
#line 87 "../lib/Services/WindowControl.vala"
		_g_object_unref0 (plank_window_control_delayed_focus_window);
#line 87 "../lib/Services/WindowControl.vala"
		plank_window_control_delayed_focus_window = NULL;
#line 305 "WindowControl.c"
	}
}

GdkPixbuf*
plank_window_control_get_app_icon (BamfApplication* app)
{
	GdkPixbuf* pbuf = NULL;
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	GdkPixbuf* _tmp17_;
	GdkPixbuf* result = NULL;
#line 91 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (app != NULL, NULL);
#line 93 "../lib/Services/WindowControl.vala"
	pbuf = NULL;
#line 95 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 96 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 96 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 98 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 98 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 100 "../lib/Services/WindowControl.vala"
	gdk_error_trap_push ();
#line 334 "WindowControl.c"
	{
		gint i = 0;
#line 102 "../lib/Services/WindowControl.vala"
		i = 0;
#line 339 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 102 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 102 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 346 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				gboolean _tmp5_ = FALSE;
				GArray* _tmp6_;
				WnckWindow* window = NULL;
				GArray* _tmp9_;
				WnckWindow* _tmp10_;
				WnckWindow* _tmp11_;
				WnckWindow* _tmp12_;
				GdkPixbuf* _tmp13_;
				WnckWindow* _tmp14_;
#line 102 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 359 "WindowControl.c"
					gint _tmp3_;
#line 102 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 102 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 365 "WindowControl.c"
				}
#line 102 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 102 "../lib/Services/WindowControl.vala"
				_tmp6_ = xids;
#line 102 "../lib/Services/WindowControl.vala"
				if (_tmp6_ != NULL) {
#line 373 "WindowControl.c"
					GArray* _tmp7_;
#line 102 "../lib/Services/WindowControl.vala"
					_tmp7_ = xids;
#line 102 "../lib/Services/WindowControl.vala"
					_tmp5_ = ((guint) i) < _tmp7_->len;
#line 379 "WindowControl.c"
				} else {
#line 102 "../lib/Services/WindowControl.vala"
					_tmp5_ = FALSE;
#line 383 "WindowControl.c"
				}
#line 102 "../lib/Services/WindowControl.vala"
				if (_tmp5_) {
#line 387 "WindowControl.c"
					GdkPixbuf* _tmp8_;
#line 102 "../lib/Services/WindowControl.vala"
					_tmp8_ = pbuf;
#line 102 "../lib/Services/WindowControl.vala"
					_tmp4_ = _tmp8_ == NULL;
#line 393 "WindowControl.c"
				} else {
#line 102 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 397 "WindowControl.c"
				}
#line 102 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 102 "../lib/Services/WindowControl.vala"
					break;
#line 403 "WindowControl.c"
				}
#line 103 "../lib/Services/WindowControl.vala"
				_tmp9_ = xids;
#line 103 "../lib/Services/WindowControl.vala"
				_tmp10_ = wnck_window_get ((gulong) g_array_index (_tmp9_, guint32, (guint) i));
#line 103 "../lib/Services/WindowControl.vala"
				window = _tmp10_;
#line 104 "../lib/Services/WindowControl.vala"
				_tmp11_ = window;
#line 104 "../lib/Services/WindowControl.vala"
				if (_tmp11_ == NULL) {
#line 105 "../lib/Services/WindowControl.vala"
					continue;
#line 417 "WindowControl.c"
				}
#line 107 "../lib/Services/WindowControl.vala"
				_tmp12_ = window;
#line 107 "../lib/Services/WindowControl.vala"
				_tmp13_ = wnck_window_get_icon (_tmp12_);
#line 107 "../lib/Services/WindowControl.vala"
				pbuf = _tmp13_;
#line 108 "../lib/Services/WindowControl.vala"
				_tmp14_ = window;
#line 108 "../lib/Services/WindowControl.vala"
				if (wnck_window_get_icon_is_fallback (_tmp14_)) {
#line 109 "../lib/Services/WindowControl.vala"
					pbuf = NULL;
#line 431 "WindowControl.c"
				}
#line 111 "../lib/Services/WindowControl.vala"
				break;
#line 435 "WindowControl.c"
			}
		}
	}
#line 114 "../lib/Services/WindowControl.vala"
	if (gdk_error_trap_pop () != 0) {
#line 441 "WindowControl.c"
		gchar* _tmp15_;
		gchar* _tmp16_;
#line 115 "../lib/Services/WindowControl.vala"
		_tmp15_ = bamf_view_get_name ((BamfView*) app);
#line 115 "../lib/Services/WindowControl.vala"
		_tmp16_ = _tmp15_;
#line 115 "../lib/Services/WindowControl.vala"
		g_critical ("WindowControl.vala:115: get_app_icon() for '%s' caused a XError", _tmp16_);
#line 115 "../lib/Services/WindowControl.vala"
		_g_free0 (_tmp16_);
#line 452 "WindowControl.c"
	}
#line 117 "../lib/Services/WindowControl.vala"
	_tmp17_ = pbuf;
#line 117 "../lib/Services/WindowControl.vala"
	result = _tmp17_;
#line 117 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 117 "../lib/Services/WindowControl.vala"
	return result;
#line 462 "WindowControl.c"
}

GdkPixbuf*
plank_window_control_get_window_icon (BamfWindow* window)
{
	WnckWindow* w = NULL;
	WnckWindow* _tmp0_;
	GdkPixbuf* pbuf = NULL;
	WnckWindow* _tmp1_;
	WnckWindow* _tmp2_;
	WnckWindow* _tmp3_;
	GdkPixbuf* _tmp4_;
	WnckWindow* _tmp5_;
	GdkPixbuf* _tmp8_;
	GdkPixbuf* result = NULL;
#line 120 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (window != NULL, NULL);
#line 122 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_window_get ((gulong) bamf_window_get_xid (window));
#line 122 "../lib/Services/WindowControl.vala"
	w = _tmp0_;
#line 123 "../lib/Services/WindowControl.vala"
	pbuf = NULL;
#line 125 "../lib/Services/WindowControl.vala"
	_tmp1_ = w;
#line 125 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 127 "../lib/Services/WindowControl.vala"
	_tmp2_ = w;
#line 127 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 128 "../lib/Services/WindowControl.vala"
		result = NULL;
#line 128 "../lib/Services/WindowControl.vala"
		return result;
#line 498 "WindowControl.c"
	}
#line 130 "../lib/Services/WindowControl.vala"
	gdk_error_trap_push ();
#line 132 "../lib/Services/WindowControl.vala"
	_tmp3_ = w;
#line 132 "../lib/Services/WindowControl.vala"
	_tmp4_ = wnck_window_get_icon (_tmp3_);
#line 132 "../lib/Services/WindowControl.vala"
	pbuf = _tmp4_;
#line 133 "../lib/Services/WindowControl.vala"
	_tmp5_ = w;
#line 133 "../lib/Services/WindowControl.vala"
	if (wnck_window_get_icon_is_fallback (_tmp5_)) {
#line 134 "../lib/Services/WindowControl.vala"
		pbuf = NULL;
#line 514 "WindowControl.c"
	}
#line 136 "../lib/Services/WindowControl.vala"
	if (gdk_error_trap_pop () != 0) {
#line 518 "WindowControl.c"
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 137 "../lib/Services/WindowControl.vala"
		_tmp6_ = bamf_view_get_name ((BamfView*) window);
#line 137 "../lib/Services/WindowControl.vala"
		_tmp7_ = _tmp6_;
#line 137 "../lib/Services/WindowControl.vala"
		g_critical ("WindowControl.vala:137: get_window_icon() for '%s' caused a XError", _tmp7_);
#line 137 "../lib/Services/WindowControl.vala"
		_g_free0 (_tmp7_);
#line 529 "WindowControl.c"
	}
#line 139 "../lib/Services/WindowControl.vala"
	_tmp8_ = pbuf;
#line 139 "../lib/Services/WindowControl.vala"
	result = _tmp8_;
#line 139 "../lib/Services/WindowControl.vala"
	return result;
#line 537 "WindowControl.c"
}

gboolean
plank_window_control_has_maximized_window (BamfApplication* app)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	gboolean result = FALSE;
#line 142 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (app != NULL, FALSE);
#line 144 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 145 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 145 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 147 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 147 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 559 "WindowControl.c"
	{
		gint i = 0;
#line 149 "../lib/Services/WindowControl.vala"
		i = 0;
#line 564 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 149 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 149 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 571 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				GArray* _tmp5_;
				WnckWindow* window = NULL;
				GArray* _tmp7_;
				WnckWindow* _tmp8_;
				gboolean _tmp9_ = FALSE;
				WnckWindow* _tmp10_;
#line 149 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 581 "WindowControl.c"
					gint _tmp3_;
#line 149 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 149 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 587 "WindowControl.c"
				}
#line 149 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 149 "../lib/Services/WindowControl.vala"
				_tmp5_ = xids;
#line 149 "../lib/Services/WindowControl.vala"
				if (_tmp5_ != NULL) {
#line 595 "WindowControl.c"
					GArray* _tmp6_;
#line 149 "../lib/Services/WindowControl.vala"
					_tmp6_ = xids;
#line 149 "../lib/Services/WindowControl.vala"
					_tmp4_ = ((guint) i) < _tmp6_->len;
#line 601 "WindowControl.c"
				} else {
#line 149 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 605 "WindowControl.c"
				}
#line 149 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 149 "../lib/Services/WindowControl.vala"
					break;
#line 611 "WindowControl.c"
				}
#line 150 "../lib/Services/WindowControl.vala"
				_tmp7_ = xids;
#line 150 "../lib/Services/WindowControl.vala"
				_tmp8_ = wnck_window_get ((gulong) g_array_index (_tmp7_, guint32, (guint) i));
#line 150 "../lib/Services/WindowControl.vala"
				window = _tmp8_;
#line 151 "../lib/Services/WindowControl.vala"
				_tmp10_ = window;
#line 151 "../lib/Services/WindowControl.vala"
				if (_tmp10_ != NULL) {
#line 623 "WindowControl.c"
					WnckWindow* _tmp11_;
#line 151 "../lib/Services/WindowControl.vala"
					_tmp11_ = window;
#line 151 "../lib/Services/WindowControl.vala"
					_tmp9_ = wnck_window_is_maximized (_tmp11_);
#line 629 "WindowControl.c"
				} else {
#line 151 "../lib/Services/WindowControl.vala"
					_tmp9_ = FALSE;
#line 633 "WindowControl.c"
				}
#line 151 "../lib/Services/WindowControl.vala"
				if (_tmp9_) {
#line 152 "../lib/Services/WindowControl.vala"
					result = TRUE;
#line 152 "../lib/Services/WindowControl.vala"
					_g_array_unref0 (xids);
#line 152 "../lib/Services/WindowControl.vala"
					return result;
#line 643 "WindowControl.c"
				}
			}
		}
	}
#line 155 "../lib/Services/WindowControl.vala"
	result = FALSE;
#line 155 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 155 "../lib/Services/WindowControl.vala"
	return result;
#line 654 "WindowControl.c"
}

gboolean
plank_window_control_has_minimized_window (BamfApplication* app)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	gboolean result = FALSE;
#line 158 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (app != NULL, FALSE);
#line 160 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 161 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 161 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 163 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 163 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 676 "WindowControl.c"
	{
		gint i = 0;
#line 165 "../lib/Services/WindowControl.vala"
		i = 0;
#line 681 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 165 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 165 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 688 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				GArray* _tmp5_;
				WnckWindow* window = NULL;
				GArray* _tmp7_;
				WnckWindow* _tmp8_;
				gboolean _tmp9_ = FALSE;
				WnckWindow* _tmp10_;
#line 165 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 698 "WindowControl.c"
					gint _tmp3_;
#line 165 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 165 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 704 "WindowControl.c"
				}
#line 165 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 165 "../lib/Services/WindowControl.vala"
				_tmp5_ = xids;
#line 165 "../lib/Services/WindowControl.vala"
				if (_tmp5_ != NULL) {
#line 712 "WindowControl.c"
					GArray* _tmp6_;
#line 165 "../lib/Services/WindowControl.vala"
					_tmp6_ = xids;
#line 165 "../lib/Services/WindowControl.vala"
					_tmp4_ = ((guint) i) < _tmp6_->len;
#line 718 "WindowControl.c"
				} else {
#line 165 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 722 "WindowControl.c"
				}
#line 165 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 165 "../lib/Services/WindowControl.vala"
					break;
#line 728 "WindowControl.c"
				}
#line 166 "../lib/Services/WindowControl.vala"
				_tmp7_ = xids;
#line 166 "../lib/Services/WindowControl.vala"
				_tmp8_ = wnck_window_get ((gulong) g_array_index (_tmp7_, guint32, (guint) i));
#line 166 "../lib/Services/WindowControl.vala"
				window = _tmp8_;
#line 167 "../lib/Services/WindowControl.vala"
				_tmp10_ = window;
#line 167 "../lib/Services/WindowControl.vala"
				if (_tmp10_ != NULL) {
#line 740 "WindowControl.c"
					WnckWindow* _tmp11_;
#line 167 "../lib/Services/WindowControl.vala"
					_tmp11_ = window;
#line 167 "../lib/Services/WindowControl.vala"
					_tmp9_ = wnck_window_is_minimized (_tmp11_);
#line 746 "WindowControl.c"
				} else {
#line 167 "../lib/Services/WindowControl.vala"
					_tmp9_ = FALSE;
#line 750 "WindowControl.c"
				}
#line 167 "../lib/Services/WindowControl.vala"
				if (_tmp9_) {
#line 168 "../lib/Services/WindowControl.vala"
					result = TRUE;
#line 168 "../lib/Services/WindowControl.vala"
					_g_array_unref0 (xids);
#line 168 "../lib/Services/WindowControl.vala"
					return result;
#line 760 "WindowControl.c"
				}
			}
		}
	}
#line 171 "../lib/Services/WindowControl.vala"
	result = FALSE;
#line 171 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 171 "../lib/Services/WindowControl.vala"
	return result;
#line 771 "WindowControl.c"
}

gboolean
plank_window_control_has_window_on_workspace (BamfApplication* app,
                                              WnckWorkspace* workspace)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	gboolean is_virtual = FALSE;
	gboolean result = FALSE;
#line 174 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (app != NULL, FALSE);
#line 174 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (workspace != NULL, FALSE);
#line 176 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 177 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 177 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 179 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 179 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 181 "../lib/Services/WindowControl.vala"
	is_virtual = wnck_workspace_is_virtual (workspace);
#line 799 "WindowControl.c"
	{
		gint i = 0;
#line 183 "../lib/Services/WindowControl.vala"
		i = 0;
#line 804 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 183 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 183 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 811 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				GArray* _tmp5_;
				WnckWindow* window = NULL;
				GArray* _tmp7_;
				WnckWindow* _tmp8_;
				gboolean _tmp9_ = FALSE;
				WnckWindow* _tmp10_;
#line 183 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 821 "WindowControl.c"
					gint _tmp3_;
#line 183 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 183 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 827 "WindowControl.c"
				}
#line 183 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 183 "../lib/Services/WindowControl.vala"
				_tmp5_ = xids;
#line 183 "../lib/Services/WindowControl.vala"
				if (_tmp5_ != NULL) {
#line 835 "WindowControl.c"
					GArray* _tmp6_;
#line 183 "../lib/Services/WindowControl.vala"
					_tmp6_ = xids;
#line 183 "../lib/Services/WindowControl.vala"
					_tmp4_ = ((guint) i) < _tmp6_->len;
#line 841 "WindowControl.c"
				} else {
#line 183 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 845 "WindowControl.c"
				}
#line 183 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 183 "../lib/Services/WindowControl.vala"
					break;
#line 851 "WindowControl.c"
				}
#line 184 "../lib/Services/WindowControl.vala"
				_tmp7_ = xids;
#line 184 "../lib/Services/WindowControl.vala"
				_tmp8_ = wnck_window_get ((gulong) g_array_index (_tmp7_, guint32, (guint) i));
#line 184 "../lib/Services/WindowControl.vala"
				window = _tmp8_;
#line 185 "../lib/Services/WindowControl.vala"
				_tmp10_ = window;
#line 185 "../lib/Services/WindowControl.vala"
				if (_tmp10_ == NULL) {
#line 185 "../lib/Services/WindowControl.vala"
					_tmp9_ = TRUE;
#line 865 "WindowControl.c"
				} else {
					WnckWindow* _tmp11_;
#line 185 "../lib/Services/WindowControl.vala"
					_tmp11_ = window;
#line 185 "../lib/Services/WindowControl.vala"
					_tmp9_ = wnck_window_is_skip_tasklist (_tmp11_);
#line 872 "WindowControl.c"
				}
#line 185 "../lib/Services/WindowControl.vala"
				if (_tmp9_) {
#line 186 "../lib/Services/WindowControl.vala"
					continue;
#line 878 "WindowControl.c"
				}
#line 188 "../lib/Services/WindowControl.vala"
				if (!is_virtual) {
#line 882 "WindowControl.c"
					WnckWindow* _tmp12_;
#line 189 "../lib/Services/WindowControl.vala"
					_tmp12_ = window;
#line 189 "../lib/Services/WindowControl.vala"
					if (wnck_window_is_on_workspace (_tmp12_, workspace)) {
#line 190 "../lib/Services/WindowControl.vala"
						result = TRUE;
#line 190 "../lib/Services/WindowControl.vala"
						_g_array_unref0 (xids);
#line 190 "../lib/Services/WindowControl.vala"
						return result;
#line 894 "WindowControl.c"
					}
				} else {
					WnckWindow* _tmp13_;
#line 192 "../lib/Services/WindowControl.vala"
					_tmp13_ = window;
#line 192 "../lib/Services/WindowControl.vala"
					if (wnck_window_is_in_viewport (_tmp13_, workspace)) {
#line 193 "../lib/Services/WindowControl.vala"
						result = TRUE;
#line 193 "../lib/Services/WindowControl.vala"
						_g_array_unref0 (xids);
#line 193 "../lib/Services/WindowControl.vala"
						return result;
#line 908 "WindowControl.c"
					}
				}
			}
		}
	}
#line 197 "../lib/Services/WindowControl.vala"
	result = FALSE;
#line 197 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 197 "../lib/Services/WindowControl.vala"
	return result;
#line 920 "WindowControl.c"
}

void
plank_window_control_update_icon_regions (BamfApplication* app,
                                          GdkRectangle* rect)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
#line 200 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 200 "../lib/Services/WindowControl.vala"
	g_return_if_fail (rect != NULL);
#line 202 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 203 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 203 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 205 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 205 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 944 "WindowControl.c"
	{
		gint i = 0;
#line 207 "../lib/Services/WindowControl.vala"
		i = 0;
#line 949 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 207 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 207 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 956 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				GArray* _tmp5_;
				WnckWindow* window = NULL;
				GArray* _tmp7_;
				WnckWindow* _tmp8_;
				WnckWindow* _tmp9_;
#line 207 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 965 "WindowControl.c"
					gint _tmp3_;
#line 207 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 207 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 971 "WindowControl.c"
				}
#line 207 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 207 "../lib/Services/WindowControl.vala"
				_tmp5_ = xids;
#line 207 "../lib/Services/WindowControl.vala"
				if (_tmp5_ != NULL) {
#line 979 "WindowControl.c"
					GArray* _tmp6_;
#line 207 "../lib/Services/WindowControl.vala"
					_tmp6_ = xids;
#line 207 "../lib/Services/WindowControl.vala"
					_tmp4_ = ((guint) i) < _tmp6_->len;
#line 985 "WindowControl.c"
				} else {
#line 207 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 989 "WindowControl.c"
				}
#line 207 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 207 "../lib/Services/WindowControl.vala"
					break;
#line 995 "WindowControl.c"
				}
#line 208 "../lib/Services/WindowControl.vala"
				_tmp7_ = xids;
#line 208 "../lib/Services/WindowControl.vala"
				_tmp8_ = wnck_window_get ((gulong) g_array_index (_tmp7_, guint32, (guint) i));
#line 208 "../lib/Services/WindowControl.vala"
				window = _tmp8_;
#line 209 "../lib/Services/WindowControl.vala"
				_tmp9_ = window;
#line 209 "../lib/Services/WindowControl.vala"
				if (_tmp9_ != NULL) {
#line 1007 "WindowControl.c"
					WnckWindow* _tmp10_;
					GdkRectangle _tmp11_;
					GdkRectangle _tmp12_;
					GdkRectangle _tmp13_;
					GdkRectangle _tmp14_;
#line 210 "../lib/Services/WindowControl.vala"
					_tmp10_ = window;
#line 210 "../lib/Services/WindowControl.vala"
					_tmp11_ = *rect;
#line 210 "../lib/Services/WindowControl.vala"
					_tmp12_ = *rect;
#line 210 "../lib/Services/WindowControl.vala"
					_tmp13_ = *rect;
#line 210 "../lib/Services/WindowControl.vala"
					_tmp14_ = *rect;
#line 210 "../lib/Services/WindowControl.vala"
					wnck_window_set_icon_geometry (_tmp10_, _tmp11_.x, _tmp12_.y, _tmp13_.width, _tmp14_.height);
#line 1025 "WindowControl.c"
				}
			}
		}
	}
#line 200 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 1032 "WindowControl.c"
}

void
plank_window_control_close_all (BamfApplication* app,
                                guint32 event_time)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
#line 214 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 216 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 217 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 217 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 219 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 219 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 1054 "WindowControl.c"
	{
		gint i = 0;
#line 221 "../lib/Services/WindowControl.vala"
		i = 0;
#line 1059 "WindowControl.c"
		{
			gboolean _tmp2_ = FALSE;
#line 221 "../lib/Services/WindowControl.vala"
			_tmp2_ = TRUE;
#line 221 "../lib/Services/WindowControl.vala"
			while (TRUE) {
#line 1066 "WindowControl.c"
				gboolean _tmp4_ = FALSE;
				GArray* _tmp5_;
				WnckWindow* window = NULL;
				GArray* _tmp7_;
				WnckWindow* _tmp8_;
				gboolean _tmp9_ = FALSE;
				WnckWindow* _tmp10_;
#line 221 "../lib/Services/WindowControl.vala"
				if (!_tmp2_) {
#line 1076 "WindowControl.c"
					gint _tmp3_;
#line 221 "../lib/Services/WindowControl.vala"
					_tmp3_ = i;
#line 221 "../lib/Services/WindowControl.vala"
					i = _tmp3_ + 1;
#line 1082 "WindowControl.c"
				}
#line 221 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 221 "../lib/Services/WindowControl.vala"
				_tmp5_ = xids;
#line 221 "../lib/Services/WindowControl.vala"
				if (_tmp5_ != NULL) {
#line 1090 "WindowControl.c"
					GArray* _tmp6_;
#line 221 "../lib/Services/WindowControl.vala"
					_tmp6_ = xids;
#line 221 "../lib/Services/WindowControl.vala"
					_tmp4_ = ((guint) i) < _tmp6_->len;
#line 1096 "WindowControl.c"
				} else {
#line 221 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 1100 "WindowControl.c"
				}
#line 221 "../lib/Services/WindowControl.vala"
				if (!_tmp4_) {
#line 221 "../lib/Services/WindowControl.vala"
					break;
#line 1106 "WindowControl.c"
				}
#line 222 "../lib/Services/WindowControl.vala"
				_tmp7_ = xids;
#line 222 "../lib/Services/WindowControl.vala"
				_tmp8_ = wnck_window_get ((gulong) g_array_index (_tmp7_, guint32, (guint) i));
#line 222 "../lib/Services/WindowControl.vala"
				window = _tmp8_;
#line 223 "../lib/Services/WindowControl.vala"
				_tmp10_ = window;
#line 223 "../lib/Services/WindowControl.vala"
				if (_tmp10_ != NULL) {
#line 1118 "WindowControl.c"
					WnckWindow* _tmp11_;
#line 223 "../lib/Services/WindowControl.vala"
					_tmp11_ = window;
#line 223 "../lib/Services/WindowControl.vala"
					_tmp9_ = !wnck_window_is_skip_tasklist (_tmp11_);
#line 1124 "WindowControl.c"
				} else {
#line 223 "../lib/Services/WindowControl.vala"
					_tmp9_ = FALSE;
#line 1128 "WindowControl.c"
				}
#line 223 "../lib/Services/WindowControl.vala"
				if (_tmp9_) {
#line 1132 "WindowControl.c"
					WnckWindow* _tmp12_;
#line 224 "../lib/Services/WindowControl.vala"
					_tmp12_ = window;
#line 224 "../lib/Services/WindowControl.vala"
					wnck_window_close (_tmp12_, event_time);
#line 1138 "WindowControl.c"
				}
			}
		}
	}
#line 214 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 1145 "WindowControl.c"
}

void
plank_window_control_focus_window (BamfWindow* window,
                                   guint32 event_time)
{
	WnckWindow* w = NULL;
	WnckWindow* _tmp0_;
	WnckWindow* _tmp1_;
	WnckWindow* _tmp2_;
	WnckWindow* _tmp3_;
#line 228 "../lib/Services/WindowControl.vala"
	g_return_if_fail (window != NULL);
#line 230 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 231 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_window_get ((gulong) bamf_window_get_xid (window));
#line 231 "../lib/Services/WindowControl.vala"
	w = _tmp0_;
#line 233 "../lib/Services/WindowControl.vala"
	_tmp1_ = w;
#line 233 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 235 "../lib/Services/WindowControl.vala"
	_tmp2_ = w;
#line 235 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 236 "../lib/Services/WindowControl.vala"
		return;
#line 1175 "WindowControl.c"
	}
#line 238 "../lib/Services/WindowControl.vala"
	_tmp3_ = w;
#line 238 "../lib/Services/WindowControl.vala"
	plank_window_control_center_and_focus_window (_tmp3_, event_time);
#line 1181 "WindowControl.c"
}

static void
plank_window_control_focus_window_by_xid (guint32 xid,
                                          guint32 event_time)
{
	WnckWindow* w = NULL;
	WnckWindow* _tmp0_;
	WnckWindow* _tmp1_;
	WnckWindow* _tmp2_;
	WnckWindow* _tmp3_;
#line 243 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 244 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_window_get ((gulong) xid);
#line 244 "../lib/Services/WindowControl.vala"
	w = _tmp0_;
#line 246 "../lib/Services/WindowControl.vala"
	_tmp1_ = w;
#line 246 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 248 "../lib/Services/WindowControl.vala"
	_tmp2_ = w;
#line 248 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 249 "../lib/Services/WindowControl.vala"
		return;
#line 1209 "WindowControl.c"
	}
#line 251 "../lib/Services/WindowControl.vala"
	_tmp3_ = w;
#line 251 "../lib/Services/WindowControl.vala"
	plank_window_control_center_and_focus_window (_tmp3_, event_time);
#line 1215 "WindowControl.c"
}

static gint
plank_window_control_find_active_xid_index (GArray* xids)
{
	gint i = 0;
	gint result = 0;
#line 256 "../lib/Services/WindowControl.vala"
	i = 0;
#line 1225 "WindowControl.c"
	{
		gboolean _tmp0_ = FALSE;
#line 257 "../lib/Services/WindowControl.vala"
		_tmp0_ = TRUE;
#line 257 "../lib/Services/WindowControl.vala"
		while (TRUE) {
#line 1232 "WindowControl.c"
			gboolean _tmp2_ = FALSE;
			WnckWindow* window = NULL;
			WnckWindow* _tmp3_;
			gboolean _tmp4_ = FALSE;
			WnckWindow* _tmp5_;
#line 257 "../lib/Services/WindowControl.vala"
			if (!_tmp0_) {
#line 1240 "WindowControl.c"
				gint _tmp1_;
#line 257 "../lib/Services/WindowControl.vala"
				_tmp1_ = i;
#line 257 "../lib/Services/WindowControl.vala"
				i = _tmp1_ + 1;
#line 1246 "WindowControl.c"
			}
#line 257 "../lib/Services/WindowControl.vala"
			_tmp0_ = FALSE;
#line 257 "../lib/Services/WindowControl.vala"
			if (xids != NULL) {
#line 257 "../lib/Services/WindowControl.vala"
				_tmp2_ = ((guint) i) < xids->len;
#line 1254 "WindowControl.c"
			} else {
#line 257 "../lib/Services/WindowControl.vala"
				_tmp2_ = FALSE;
#line 1258 "WindowControl.c"
			}
#line 257 "../lib/Services/WindowControl.vala"
			if (!_tmp2_) {
#line 257 "../lib/Services/WindowControl.vala"
				break;
#line 1264 "WindowControl.c"
			}
#line 258 "../lib/Services/WindowControl.vala"
			_tmp3_ = wnck_window_get ((gulong) g_array_index (xids, guint32, (guint) i));
#line 258 "../lib/Services/WindowControl.vala"
			window = _tmp3_;
#line 259 "../lib/Services/WindowControl.vala"
			_tmp5_ = window;
#line 259 "../lib/Services/WindowControl.vala"
			if (_tmp5_ != NULL) {
#line 1274 "WindowControl.c"
				WnckWindow* _tmp6_;
#line 259 "../lib/Services/WindowControl.vala"
				_tmp6_ = window;
#line 259 "../lib/Services/WindowControl.vala"
				_tmp4_ = wnck_window_is_active (_tmp6_);
#line 1280 "WindowControl.c"
			} else {
#line 259 "../lib/Services/WindowControl.vala"
				_tmp4_ = FALSE;
#line 1284 "WindowControl.c"
			}
#line 259 "../lib/Services/WindowControl.vala"
			if (_tmp4_) {
#line 260 "../lib/Services/WindowControl.vala"
				break;
#line 1290 "WindowControl.c"
			}
		}
	}
#line 262 "../lib/Services/WindowControl.vala"
	result = i;
#line 262 "../lib/Services/WindowControl.vala"
	return result;
#line 1298 "WindowControl.c"
}

void
plank_window_control_focus_previous (BamfApplication* app,
                                     guint32 event_time)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	GArray* _tmp2_;
	gint i = 0;
	GArray* _tmp3_;
	gint _tmp4_ = 0;
	GArray* _tmp5_;
	GArray* _tmp7_;
#line 265 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 267 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 268 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 268 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 270 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 270 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 272 "../lib/Services/WindowControl.vala"
	_tmp2_ = xids;
#line 272 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 273 "../lib/Services/WindowControl.vala"
		_g_array_unref0 (xids);
#line 273 "../lib/Services/WindowControl.vala"
		return;
#line 1334 "WindowControl.c"
	}
#line 275 "../lib/Services/WindowControl.vala"
	_tmp3_ = xids;
#line 275 "../lib/Services/WindowControl.vala"
	i = plank_window_control_find_active_xid_index (_tmp3_);
#line 276 "../lib/Services/WindowControl.vala"
	_tmp5_ = xids;
#line 276 "../lib/Services/WindowControl.vala"
	if (((guint) i) < _tmp5_->len) {
#line 276 "../lib/Services/WindowControl.vala"
		_tmp4_ = i - 1;
#line 1346 "WindowControl.c"
	} else {
#line 276 "../lib/Services/WindowControl.vala"
		_tmp4_ = 0;
#line 1350 "WindowControl.c"
	}
#line 276 "../lib/Services/WindowControl.vala"
	i = _tmp4_;
#line 278 "../lib/Services/WindowControl.vala"
	if (i < 0) {
#line 1356 "WindowControl.c"
		GArray* _tmp6_;
#line 279 "../lib/Services/WindowControl.vala"
		_tmp6_ = xids;
#line 279 "../lib/Services/WindowControl.vala"
		i = ((gint) _tmp6_->len) - 1;
#line 1362 "WindowControl.c"
	}
#line 281 "../lib/Services/WindowControl.vala"
	_tmp7_ = xids;
#line 281 "../lib/Services/WindowControl.vala"
	plank_window_control_focus_window_by_xid (g_array_index (_tmp7_, guint32, (guint) i), event_time);
#line 265 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 1370 "WindowControl.c"
}

void
plank_window_control_focus_next (BamfApplication* app,
                                 guint32 event_time)
{
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	GArray* _tmp2_;
	gint i = 0;
	GArray* _tmp3_;
	gint _tmp4_ = 0;
	GArray* _tmp5_;
	GArray* _tmp6_;
	GArray* _tmp7_;
#line 284 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 286 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 287 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 287 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 289 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 289 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 291 "../lib/Services/WindowControl.vala"
	_tmp2_ = xids;
#line 291 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 292 "../lib/Services/WindowControl.vala"
		_g_array_unref0 (xids);
#line 292 "../lib/Services/WindowControl.vala"
		return;
#line 1407 "WindowControl.c"
	}
#line 294 "../lib/Services/WindowControl.vala"
	_tmp3_ = xids;
#line 294 "../lib/Services/WindowControl.vala"
	i = plank_window_control_find_active_xid_index (_tmp3_);
#line 295 "../lib/Services/WindowControl.vala"
	_tmp5_ = xids;
#line 295 "../lib/Services/WindowControl.vala"
	if (((guint) i) < _tmp5_->len) {
#line 295 "../lib/Services/WindowControl.vala"
		_tmp4_ = i + 1;
#line 1419 "WindowControl.c"
	} else {
#line 295 "../lib/Services/WindowControl.vala"
		_tmp4_ = 0;
#line 1423 "WindowControl.c"
	}
#line 295 "../lib/Services/WindowControl.vala"
	i = _tmp4_;
#line 297 "../lib/Services/WindowControl.vala"
	_tmp6_ = xids;
#line 297 "../lib/Services/WindowControl.vala"
	if (((guint) i) == _tmp6_->len) {
#line 298 "../lib/Services/WindowControl.vala"
		i = 0;
#line 1433 "WindowControl.c"
	}
#line 300 "../lib/Services/WindowControl.vala"
	_tmp7_ = xids;
#line 300 "../lib/Services/WindowControl.vala"
	plank_window_control_focus_window_by_xid (g_array_index (_tmp7_, guint32, (guint) i), event_time);
#line 284 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 1441 "WindowControl.c"
}

void
plank_window_control_minimize (BamfApplication* app)
{
	GList* _tmp0_;
#line 303 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 305 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_get_ordered_window_stack (app);
#line 1452 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 305 "../lib/Services/WindowControl.vala"
		window_collection = _tmp0_;
#line 305 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1460 "WindowControl.c"
			WnckWindow* window = NULL;
#line 305 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1464 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp1_;
				WnckScreen* _tmp2_;
				WnckWorkspace* _tmp3_;
				gboolean _tmp4_ = FALSE;
				gboolean _tmp5_ = FALSE;
				WnckWindow* _tmp6_;
#line 306 "../lib/Services/WindowControl.vala"
				_tmp1_ = window;
#line 306 "../lib/Services/WindowControl.vala"
				_tmp2_ = wnck_window_get_screen (_tmp1_);
#line 306 "../lib/Services/WindowControl.vala"
				_tmp3_ = wnck_screen_get_active_workspace (_tmp2_);
#line 306 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp3_;
#line 307 "../lib/Services/WindowControl.vala"
				_tmp6_ = window;
#line 307 "../lib/Services/WindowControl.vala"
				if (!wnck_window_is_minimized (_tmp6_)) {
#line 1485 "WindowControl.c"
					WnckWorkspace* _tmp7_;
#line 307 "../lib/Services/WindowControl.vala"
					_tmp7_ = active_workspace;
#line 307 "../lib/Services/WindowControl.vala"
					_tmp5_ = _tmp7_ != NULL;
#line 1491 "WindowControl.c"
				} else {
#line 307 "../lib/Services/WindowControl.vala"
					_tmp5_ = FALSE;
#line 1495 "WindowControl.c"
				}
#line 307 "../lib/Services/WindowControl.vala"
				if (_tmp5_) {
#line 1499 "WindowControl.c"
					WnckWindow* _tmp8_;
					WnckWorkspace* _tmp9_;
#line 307 "../lib/Services/WindowControl.vala"
					_tmp8_ = window;
#line 307 "../lib/Services/WindowControl.vala"
					_tmp9_ = active_workspace;
#line 307 "../lib/Services/WindowControl.vala"
					_tmp4_ = wnck_window_is_in_viewport (_tmp8_, _tmp9_);
#line 1508 "WindowControl.c"
				} else {
#line 307 "../lib/Services/WindowControl.vala"
					_tmp4_ = FALSE;
#line 1512 "WindowControl.c"
				}
#line 307 "../lib/Services/WindowControl.vala"
				if (_tmp4_) {
#line 1516 "WindowControl.c"
					WnckWindow* _tmp10_;
#line 308 "../lib/Services/WindowControl.vala"
					_tmp10_ = window;
#line 308 "../lib/Services/WindowControl.vala"
					wnck_window_minimize (_tmp10_);
#line 309 "../lib/Services/WindowControl.vala"
					g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 1524 "WindowControl.c"
				}
			}
		}
#line 305 "../lib/Services/WindowControl.vala"
		(window_collection == NULL) ? NULL : (window_collection = (g_list_free (window_collection), NULL));
#line 1530 "WindowControl.c"
	}
}

void
plank_window_control_restore (BamfApplication* app,
                              guint32 event_time)
{
	GList* stack = NULL;
	GList* _tmp0_;
	GList* _tmp1_;
#line 314 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 316 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_get_ordered_window_stack (app);
#line 316 "../lib/Services/WindowControl.vala"
	stack = _tmp0_;
#line 317 "../lib/Services/WindowControl.vala"
	stack = g_list_reverse (stack);
#line 318 "../lib/Services/WindowControl.vala"
	_tmp1_ = stack;
#line 1551 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 318 "../lib/Services/WindowControl.vala"
		window_collection = _tmp1_;
#line 318 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1559 "WindowControl.c"
			WnckWindow* window = NULL;
#line 318 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1563 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp2_;
				WnckScreen* _tmp3_;
				WnckWorkspace* _tmp4_;
				gboolean _tmp5_ = FALSE;
				gboolean _tmp6_ = FALSE;
				WnckWindow* _tmp7_;
#line 319 "../lib/Services/WindowControl.vala"
				_tmp2_ = window;
#line 319 "../lib/Services/WindowControl.vala"
				_tmp3_ = wnck_window_get_screen (_tmp2_);
#line 319 "../lib/Services/WindowControl.vala"
				_tmp4_ = wnck_screen_get_active_workspace (_tmp3_);
#line 319 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp4_;
#line 320 "../lib/Services/WindowControl.vala"
				_tmp7_ = window;
#line 320 "../lib/Services/WindowControl.vala"
				if (wnck_window_is_minimized (_tmp7_)) {
#line 1584 "WindowControl.c"
					WnckWorkspace* _tmp8_;
#line 320 "../lib/Services/WindowControl.vala"
					_tmp8_ = active_workspace;
#line 320 "../lib/Services/WindowControl.vala"
					_tmp6_ = _tmp8_ != NULL;
#line 1590 "WindowControl.c"
				} else {
#line 320 "../lib/Services/WindowControl.vala"
					_tmp6_ = FALSE;
#line 1594 "WindowControl.c"
				}
#line 320 "../lib/Services/WindowControl.vala"
				if (_tmp6_) {
#line 1598 "WindowControl.c"
					WnckWindow* _tmp9_;
					WnckWorkspace* _tmp10_;
#line 320 "../lib/Services/WindowControl.vala"
					_tmp9_ = window;
#line 320 "../lib/Services/WindowControl.vala"
					_tmp10_ = active_workspace;
#line 320 "../lib/Services/WindowControl.vala"
					_tmp5_ = wnck_window_is_in_viewport (_tmp9_, _tmp10_);
#line 1607 "WindowControl.c"
				} else {
#line 320 "../lib/Services/WindowControl.vala"
					_tmp5_ = FALSE;
#line 1611 "WindowControl.c"
				}
#line 320 "../lib/Services/WindowControl.vala"
				if (_tmp5_) {
#line 1615 "WindowControl.c"
					WnckWindow* _tmp11_;
#line 321 "../lib/Services/WindowControl.vala"
					_tmp11_ = window;
#line 321 "../lib/Services/WindowControl.vala"
					wnck_window_unminimize (_tmp11_, event_time);
#line 322 "../lib/Services/WindowControl.vala"
					g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 1623 "WindowControl.c"
				}
			}
		}
	}
#line 314 "../lib/Services/WindowControl.vala"
	(stack == NULL) ? NULL : (stack = (g_list_free (stack), NULL));
#line 1630 "WindowControl.c"
}

void
plank_window_control_maximize (BamfApplication* app)
{
	GList* _tmp0_;
#line 327 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 329 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_get_ordered_window_stack (app);
#line 1641 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 329 "../lib/Services/WindowControl.vala"
		window_collection = _tmp0_;
#line 329 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1649 "WindowControl.c"
			WnckWindow* window = NULL;
#line 329 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1653 "WindowControl.c"
			{
				WnckWindow* _tmp1_;
#line 330 "../lib/Services/WindowControl.vala"
				_tmp1_ = window;
#line 330 "../lib/Services/WindowControl.vala"
				if (!wnck_window_is_maximized (_tmp1_)) {
#line 1660 "WindowControl.c"
					WnckWindow* _tmp2_;
#line 331 "../lib/Services/WindowControl.vala"
					_tmp2_ = window;
#line 331 "../lib/Services/WindowControl.vala"
					wnck_window_maximize (_tmp2_);
#line 1666 "WindowControl.c"
				}
			}
		}
#line 329 "../lib/Services/WindowControl.vala"
		(window_collection == NULL) ? NULL : (window_collection = (g_list_free (window_collection), NULL));
#line 1672 "WindowControl.c"
	}
}

void
plank_window_control_unmaximize (BamfApplication* app)
{
	GList* _tmp0_;
#line 334 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 336 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_get_ordered_window_stack (app);
#line 1684 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 336 "../lib/Services/WindowControl.vala"
		window_collection = _tmp0_;
#line 336 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1692 "WindowControl.c"
			WnckWindow* window = NULL;
#line 336 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1696 "WindowControl.c"
			{
				WnckWindow* _tmp1_;
#line 337 "../lib/Services/WindowControl.vala"
				_tmp1_ = window;
#line 337 "../lib/Services/WindowControl.vala"
				if (wnck_window_is_maximized (_tmp1_)) {
#line 1703 "WindowControl.c"
					WnckWindow* _tmp2_;
#line 338 "../lib/Services/WindowControl.vala"
					_tmp2_ = window;
#line 338 "../lib/Services/WindowControl.vala"
					wnck_window_unmaximize (_tmp2_);
#line 1709 "WindowControl.c"
				}
			}
		}
#line 336 "../lib/Services/WindowControl.vala"
		(window_collection == NULL) ? NULL : (window_collection = (g_list_free (window_collection), NULL));
#line 1715 "WindowControl.c"
	}
}

GList*
plank_window_control_get_ordered_window_stack (BamfApplication* app)
{
	GList* windows = NULL;
	GArray* xids = NULL;
	GArray* _tmp0_;
	GArray* _tmp1_;
	GArray* _tmp2_;
	GList* stack = NULL;
	WnckScreen* _tmp3_;
	GList* _tmp4_;
	GList* _tmp5_;
	GList* result = NULL;
#line 341 "../lib/Services/WindowControl.vala"
	g_return_val_if_fail (app != NULL, NULL);
#line 343 "../lib/Services/WindowControl.vala"
	windows = NULL;
#line 345 "../lib/Services/WindowControl.vala"
	wnck_screen_get_default ();
#line 346 "../lib/Services/WindowControl.vala"
	_tmp0_ = bamf_application_get_xids (app);
#line 346 "../lib/Services/WindowControl.vala"
	xids = _tmp0_;
#line 348 "../lib/Services/WindowControl.vala"
	_tmp1_ = xids;
#line 348 "../lib/Services/WindowControl.vala"
	g_warn_if_fail (_tmp1_ != NULL);
#line 350 "../lib/Services/WindowControl.vala"
	_tmp2_ = xids;
#line 350 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 351 "../lib/Services/WindowControl.vala"
		result = windows;
#line 351 "../lib/Services/WindowControl.vala"
		_g_array_unref0 (xids);
#line 351 "../lib/Services/WindowControl.vala"
		return result;
#line 1756 "WindowControl.c"
	}
#line 353 "../lib/Services/WindowControl.vala"
	_tmp3_ = wnck_screen_get_default ();
#line 353 "../lib/Services/WindowControl.vala"
	_tmp4_ = wnck_screen_get_windows_stacked (_tmp3_);
#line 353 "../lib/Services/WindowControl.vala"
	stack = _tmp4_;
#line 355 "../lib/Services/WindowControl.vala"
	_tmp5_ = stack;
#line 1766 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 355 "../lib/Services/WindowControl.vala"
		window_collection = _tmp5_;
#line 355 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1774 "WindowControl.c"
			WnckWindow* window = NULL;
#line 355 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1778 "WindowControl.c"
			{
				{
					gint j = 0;
#line 356 "../lib/Services/WindowControl.vala"
					j = 0;
#line 1784 "WindowControl.c"
					{
						gboolean _tmp6_ = FALSE;
#line 356 "../lib/Services/WindowControl.vala"
						_tmp6_ = TRUE;
#line 356 "../lib/Services/WindowControl.vala"
						while (TRUE) {
#line 1791 "WindowControl.c"
							GArray* _tmp8_;
							GArray* _tmp9_;
							WnckWindow* _tmp10_;
#line 356 "../lib/Services/WindowControl.vala"
							if (!_tmp6_) {
#line 1797 "WindowControl.c"
								gint _tmp7_;
#line 356 "../lib/Services/WindowControl.vala"
								_tmp7_ = j;
#line 356 "../lib/Services/WindowControl.vala"
								j = _tmp7_ + 1;
#line 1803 "WindowControl.c"
							}
#line 356 "../lib/Services/WindowControl.vala"
							_tmp6_ = FALSE;
#line 356 "../lib/Services/WindowControl.vala"
							_tmp8_ = xids;
#line 356 "../lib/Services/WindowControl.vala"
							if (!(((guint) j) < _tmp8_->len)) {
#line 356 "../lib/Services/WindowControl.vala"
								break;
#line 1813 "WindowControl.c"
							}
#line 357 "../lib/Services/WindowControl.vala"
							_tmp9_ = xids;
#line 357 "../lib/Services/WindowControl.vala"
							_tmp10_ = window;
#line 357 "../lib/Services/WindowControl.vala"
							if (((gulong) g_array_index (_tmp9_, guint32, (guint) j)) == wnck_window_get_xid (_tmp10_)) {
#line 1821 "WindowControl.c"
								WnckWindow* _tmp11_;
#line 358 "../lib/Services/WindowControl.vala"
								_tmp11_ = window;
#line 358 "../lib/Services/WindowControl.vala"
								windows = g_list_append (windows, _tmp11_);
#line 1827 "WindowControl.c"
							}
						}
					}
				}
			}
		}
	}
#line 360 "../lib/Services/WindowControl.vala"
	result = windows;
#line 360 "../lib/Services/WindowControl.vala"
	_g_array_unref0 (xids);
#line 360 "../lib/Services/WindowControl.vala"
	return result;
#line 1841 "WindowControl.c"
}

void
plank_window_control_smart_focus (BamfApplication* app,
                                  guint32 event_time)
{
	GList* windows = NULL;
	GList* _tmp0_;
	gboolean not_in_viewport = FALSE;
	gboolean urgent = FALSE;
	GList* _tmp1_;
	gboolean _tmp12_ = FALSE;
	GList* _tmp19_;
	GList* _tmp35_;
	GList* _tmp56_;
	GList* _tmp68_;
	gconstpointer _tmp69_;
	GList* _tmp70_;
#line 363 "../lib/Services/WindowControl.vala"
	g_return_if_fail (app != NULL);
#line 365 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_get_ordered_window_stack (app);
#line 365 "../lib/Services/WindowControl.vala"
	windows = _tmp0_;
#line 367 "../lib/Services/WindowControl.vala"
	not_in_viewport = TRUE;
#line 368 "../lib/Services/WindowControl.vala"
	urgent = FALSE;
#line 370 "../lib/Services/WindowControl.vala"
	_tmp1_ = windows;
#line 1872 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 370 "../lib/Services/WindowControl.vala"
		window_collection = _tmp1_;
#line 370 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1880 "WindowControl.c"
			WnckWindow* window = NULL;
#line 370 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 1884 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp2_;
				WnckScreen* _tmp3_;
				WnckWorkspace* _tmp4_;
				gboolean _tmp5_ = FALSE;
				gboolean _tmp6_ = FALSE;
				WnckWindow* _tmp7_;
				WnckWindow* _tmp11_;
#line 371 "../lib/Services/WindowControl.vala"
				_tmp2_ = window;
#line 371 "../lib/Services/WindowControl.vala"
				_tmp3_ = wnck_window_get_screen (_tmp2_);
#line 371 "../lib/Services/WindowControl.vala"
				_tmp4_ = wnck_screen_get_active_workspace (_tmp3_);
#line 371 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp4_;
#line 372 "../lib/Services/WindowControl.vala"
				_tmp7_ = window;
#line 372 "../lib/Services/WindowControl.vala"
				if (!wnck_window_is_skip_tasklist (_tmp7_)) {
#line 1906 "WindowControl.c"
					WnckWorkspace* _tmp8_;
#line 372 "../lib/Services/WindowControl.vala"
					_tmp8_ = active_workspace;
#line 372 "../lib/Services/WindowControl.vala"
					_tmp6_ = _tmp8_ != NULL;
#line 1912 "WindowControl.c"
				} else {
#line 372 "../lib/Services/WindowControl.vala"
					_tmp6_ = FALSE;
#line 1916 "WindowControl.c"
				}
#line 372 "../lib/Services/WindowControl.vala"
				if (_tmp6_) {
#line 1920 "WindowControl.c"
					WnckWindow* _tmp9_;
					WnckWorkspace* _tmp10_;
#line 372 "../lib/Services/WindowControl.vala"
					_tmp9_ = window;
#line 372 "../lib/Services/WindowControl.vala"
					_tmp10_ = active_workspace;
#line 372 "../lib/Services/WindowControl.vala"
					_tmp5_ = wnck_window_is_in_viewport (_tmp9_, _tmp10_);
#line 1929 "WindowControl.c"
				} else {
#line 372 "../lib/Services/WindowControl.vala"
					_tmp5_ = FALSE;
#line 1933 "WindowControl.c"
				}
#line 372 "../lib/Services/WindowControl.vala"
				if (_tmp5_) {
#line 373 "../lib/Services/WindowControl.vala"
					not_in_viewport = FALSE;
#line 1939 "WindowControl.c"
				}
#line 374 "../lib/Services/WindowControl.vala"
				_tmp11_ = window;
#line 374 "../lib/Services/WindowControl.vala"
				if (wnck_window_needs_attention (_tmp11_)) {
#line 375 "../lib/Services/WindowControl.vala"
					urgent = TRUE;
#line 1947 "WindowControl.c"
				}
			}
		}
	}
#line 379 "../lib/Services/WindowControl.vala"
	if (not_in_viewport) {
#line 379 "../lib/Services/WindowControl.vala"
		_tmp12_ = TRUE;
#line 1956 "WindowControl.c"
	} else {
#line 379 "../lib/Services/WindowControl.vala"
		_tmp12_ = urgent;
#line 1960 "WindowControl.c"
	}
#line 379 "../lib/Services/WindowControl.vala"
	if (_tmp12_) {
#line 1964 "WindowControl.c"
		GList* _tmp13_;
#line 380 "../lib/Services/WindowControl.vala"
		_tmp13_ = windows;
#line 1968 "WindowControl.c"
		{
			GList* window_collection = NULL;
			GList* window_it = NULL;
#line 380 "../lib/Services/WindowControl.vala"
			window_collection = _tmp13_;
#line 380 "../lib/Services/WindowControl.vala"
			for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1976 "WindowControl.c"
				WnckWindow* window = NULL;
#line 380 "../lib/Services/WindowControl.vala"
				window = (WnckWindow*) window_it->data;
#line 1980 "WindowControl.c"
				{
					gboolean _tmp14_ = FALSE;
					WnckWindow* _tmp16_;
#line 381 "../lib/Services/WindowControl.vala"
					if (urgent) {
#line 1986 "WindowControl.c"
						WnckWindow* _tmp15_;
#line 381 "../lib/Services/WindowControl.vala"
						_tmp15_ = window;
#line 381 "../lib/Services/WindowControl.vala"
						_tmp14_ = !wnck_window_needs_attention (_tmp15_);
#line 1992 "WindowControl.c"
					} else {
#line 381 "../lib/Services/WindowControl.vala"
						_tmp14_ = FALSE;
#line 1996 "WindowControl.c"
					}
#line 381 "../lib/Services/WindowControl.vala"
					if (_tmp14_) {
#line 382 "../lib/Services/WindowControl.vala"
						continue;
#line 2002 "WindowControl.c"
					}
#line 384 "../lib/Services/WindowControl.vala"
					_tmp16_ = window;
#line 384 "../lib/Services/WindowControl.vala"
					if (!wnck_window_is_skip_tasklist (_tmp16_)) {
#line 2008 "WindowControl.c"
						WnckWindow* _tmp17_;
						GList* _tmp18_;
#line 385 "../lib/Services/WindowControl.vala"
						_tmp17_ = window;
#line 385 "../lib/Services/WindowControl.vala"
						_tmp18_ = windows;
#line 385 "../lib/Services/WindowControl.vala"
						plank_window_control_intelligent_focus_off_viewport_window (_tmp17_, _tmp18_, event_time);
#line 386 "../lib/Services/WindowControl.vala"
						(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 386 "../lib/Services/WindowControl.vala"
						return;
#line 2021 "WindowControl.c"
					}
				}
			}
		}
	}
#line 392 "../lib/Services/WindowControl.vala"
	_tmp19_ = windows;
#line 2029 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 392 "../lib/Services/WindowControl.vala"
		window_collection = _tmp19_;
#line 392 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 2037 "WindowControl.c"
			WnckWindow* window = NULL;
#line 392 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 2041 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp20_;
				WnckScreen* _tmp21_;
				WnckWorkspace* _tmp22_;
				gboolean _tmp23_ = FALSE;
				gboolean _tmp24_ = FALSE;
				WnckWindow* _tmp25_;
#line 393 "../lib/Services/WindowControl.vala"
				_tmp20_ = window;
#line 393 "../lib/Services/WindowControl.vala"
				_tmp21_ = wnck_window_get_screen (_tmp20_);
#line 393 "../lib/Services/WindowControl.vala"
				_tmp22_ = wnck_screen_get_active_workspace (_tmp21_);
#line 393 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp22_;
#line 394 "../lib/Services/WindowControl.vala"
				_tmp25_ = window;
#line 394 "../lib/Services/WindowControl.vala"
				if (wnck_window_is_minimized (_tmp25_)) {
#line 2062 "WindowControl.c"
					WnckWorkspace* _tmp26_;
#line 394 "../lib/Services/WindowControl.vala"
					_tmp26_ = active_workspace;
#line 394 "../lib/Services/WindowControl.vala"
					_tmp24_ = _tmp26_ != NULL;
#line 2068 "WindowControl.c"
				} else {
#line 394 "../lib/Services/WindowControl.vala"
					_tmp24_ = FALSE;
#line 2072 "WindowControl.c"
				}
#line 394 "../lib/Services/WindowControl.vala"
				if (_tmp24_) {
#line 2076 "WindowControl.c"
					WnckWindow* _tmp27_;
					WnckWorkspace* _tmp28_;
#line 394 "../lib/Services/WindowControl.vala"
					_tmp27_ = window;
#line 394 "../lib/Services/WindowControl.vala"
					_tmp28_ = active_workspace;
#line 394 "../lib/Services/WindowControl.vala"
					_tmp23_ = wnck_window_is_in_viewport (_tmp27_, _tmp28_);
#line 2085 "WindowControl.c"
				} else {
#line 394 "../lib/Services/WindowControl.vala"
					_tmp23_ = FALSE;
#line 2089 "WindowControl.c"
				}
#line 394 "../lib/Services/WindowControl.vala"
				if (_tmp23_) {
#line 2093 "WindowControl.c"
					GList* _tmp29_;
#line 395 "../lib/Services/WindowControl.vala"
					_tmp29_ = windows;
#line 2097 "WindowControl.c"
					{
						GList* w_collection = NULL;
						GList* w_it = NULL;
#line 395 "../lib/Services/WindowControl.vala"
						w_collection = _tmp29_;
#line 395 "../lib/Services/WindowControl.vala"
						for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 2105 "WindowControl.c"
							WnckWindow* w = NULL;
#line 395 "../lib/Services/WindowControl.vala"
							w = (WnckWindow*) w_it->data;
#line 2109 "WindowControl.c"
							{
								gboolean _tmp30_ = FALSE;
								WnckWindow* _tmp31_;
#line 396 "../lib/Services/WindowControl.vala"
								_tmp31_ = w;
#line 396 "../lib/Services/WindowControl.vala"
								if (wnck_window_is_minimized (_tmp31_)) {
#line 2117 "WindowControl.c"
									WnckWindow* _tmp32_;
									WnckWorkspace* _tmp33_;
#line 396 "../lib/Services/WindowControl.vala"
									_tmp32_ = w;
#line 396 "../lib/Services/WindowControl.vala"
									_tmp33_ = active_workspace;
#line 396 "../lib/Services/WindowControl.vala"
									_tmp30_ = wnck_window_is_in_viewport (_tmp32_, _tmp33_);
#line 2126 "WindowControl.c"
								} else {
#line 396 "../lib/Services/WindowControl.vala"
									_tmp30_ = FALSE;
#line 2130 "WindowControl.c"
								}
#line 396 "../lib/Services/WindowControl.vala"
								if (_tmp30_) {
#line 2134 "WindowControl.c"
									WnckWindow* _tmp34_;
#line 397 "../lib/Services/WindowControl.vala"
									_tmp34_ = w;
#line 397 "../lib/Services/WindowControl.vala"
									wnck_window_unminimize (_tmp34_, event_time);
#line 398 "../lib/Services/WindowControl.vala"
									g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 2142 "WindowControl.c"
								}
							}
						}
					}
#line 400 "../lib/Services/WindowControl.vala"
					(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 400 "../lib/Services/WindowControl.vala"
					return;
#line 2151 "WindowControl.c"
				}
			}
		}
	}
#line 405 "../lib/Services/WindowControl.vala"
	_tmp35_ = windows;
#line 2158 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 405 "../lib/Services/WindowControl.vala"
		window_collection = _tmp35_;
#line 405 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 2166 "WindowControl.c"
			WnckWindow* window = NULL;
#line 405 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 2170 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp36_;
				WnckScreen* _tmp37_;
				WnckWorkspace* _tmp38_;
				gboolean _tmp39_ = FALSE;
				gboolean _tmp40_ = FALSE;
				gboolean _tmp41_ = FALSE;
				WnckWindow* _tmp42_;
#line 406 "../lib/Services/WindowControl.vala"
				_tmp36_ = window;
#line 406 "../lib/Services/WindowControl.vala"
				_tmp37_ = wnck_window_get_screen (_tmp36_);
#line 406 "../lib/Services/WindowControl.vala"
				_tmp38_ = wnck_screen_get_active_workspace (_tmp37_);
#line 406 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp38_;
#line 407 "../lib/Services/WindowControl.vala"
				_tmp42_ = window;
#line 407 "../lib/Services/WindowControl.vala"
				if (wnck_window_is_active (_tmp42_)) {
#line 2192 "WindowControl.c"
					WnckWorkspace* _tmp43_;
#line 407 "../lib/Services/WindowControl.vala"
					_tmp43_ = active_workspace;
#line 407 "../lib/Services/WindowControl.vala"
					_tmp41_ = _tmp43_ != NULL;
#line 2198 "WindowControl.c"
				} else {
#line 407 "../lib/Services/WindowControl.vala"
					_tmp41_ = FALSE;
#line 2202 "WindowControl.c"
				}
#line 407 "../lib/Services/WindowControl.vala"
				if (_tmp41_) {
#line 2206 "WindowControl.c"
					WnckWindow* _tmp44_;
					WnckWorkspace* _tmp45_;
#line 407 "../lib/Services/WindowControl.vala"
					_tmp44_ = window;
#line 407 "../lib/Services/WindowControl.vala"
					_tmp45_ = active_workspace;
#line 407 "../lib/Services/WindowControl.vala"
					_tmp40_ = wnck_window_is_in_viewport (_tmp44_, _tmp45_);
#line 2215 "WindowControl.c"
				} else {
#line 407 "../lib/Services/WindowControl.vala"
					_tmp40_ = FALSE;
#line 2219 "WindowControl.c"
				}
#line 407 "../lib/Services/WindowControl.vala"
				if (_tmp40_) {
#line 407 "../lib/Services/WindowControl.vala"
					_tmp39_ = TRUE;
#line 2225 "WindowControl.c"
				} else {
					WnckWindow* _tmp46_;
					WnckWindow* _tmp47_;
					WnckScreen* _tmp48_;
					WnckWindow* _tmp49_;
#line 408 "../lib/Services/WindowControl.vala"
					_tmp46_ = window;
#line 408 "../lib/Services/WindowControl.vala"
					_tmp47_ = window;
#line 408 "../lib/Services/WindowControl.vala"
					_tmp48_ = wnck_window_get_screen (_tmp47_);
#line 408 "../lib/Services/WindowControl.vala"
					_tmp49_ = wnck_screen_get_active_window (_tmp48_);
#line 408 "../lib/Services/WindowControl.vala"
					_tmp39_ = _tmp46_ == _tmp49_;
#line 2241 "WindowControl.c"
				}
#line 407 "../lib/Services/WindowControl.vala"
				if (_tmp39_) {
#line 2245 "WindowControl.c"
					GList* _tmp50_;
#line 409 "../lib/Services/WindowControl.vala"
					_tmp50_ = windows;
#line 2249 "WindowControl.c"
					{
						GList* w_collection = NULL;
						GList* w_it = NULL;
#line 409 "../lib/Services/WindowControl.vala"
						w_collection = _tmp50_;
#line 409 "../lib/Services/WindowControl.vala"
						for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 2257 "WindowControl.c"
							WnckWindow* w = NULL;
#line 409 "../lib/Services/WindowControl.vala"
							w = (WnckWindow*) w_it->data;
#line 2261 "WindowControl.c"
							{
								gboolean _tmp51_ = FALSE;
								WnckWindow* _tmp52_;
#line 410 "../lib/Services/WindowControl.vala"
								_tmp52_ = w;
#line 410 "../lib/Services/WindowControl.vala"
								if (!wnck_window_is_minimized (_tmp52_)) {
#line 2269 "WindowControl.c"
									WnckWindow* _tmp53_;
									WnckWorkspace* _tmp54_;
#line 410 "../lib/Services/WindowControl.vala"
									_tmp53_ = w;
#line 410 "../lib/Services/WindowControl.vala"
									_tmp54_ = active_workspace;
#line 410 "../lib/Services/WindowControl.vala"
									_tmp51_ = wnck_window_is_in_viewport (_tmp53_, _tmp54_);
#line 2278 "WindowControl.c"
								} else {
#line 410 "../lib/Services/WindowControl.vala"
									_tmp51_ = FALSE;
#line 2282 "WindowControl.c"
								}
#line 410 "../lib/Services/WindowControl.vala"
								if (_tmp51_) {
#line 2286 "WindowControl.c"
									WnckWindow* _tmp55_;
#line 411 "../lib/Services/WindowControl.vala"
									_tmp55_ = w;
#line 411 "../lib/Services/WindowControl.vala"
									wnck_window_minimize (_tmp55_);
#line 412 "../lib/Services/WindowControl.vala"
									g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 2294 "WindowControl.c"
								}
							}
						}
					}
#line 414 "../lib/Services/WindowControl.vala"
					(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 414 "../lib/Services/WindowControl.vala"
					return;
#line 2303 "WindowControl.c"
				}
			}
		}
	}
#line 419 "../lib/Services/WindowControl.vala"
	_tmp56_ = windows;
#line 2310 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 419 "../lib/Services/WindowControl.vala"
		window_collection = _tmp56_;
#line 419 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 2318 "WindowControl.c"
			WnckWindow* window = NULL;
#line 419 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 2322 "WindowControl.c"
			{
				WnckWorkspace* active_workspace = NULL;
				WnckWindow* _tmp57_;
				WnckScreen* _tmp58_;
				WnckWorkspace* _tmp59_;
				gboolean _tmp60_ = FALSE;
				WnckWorkspace* _tmp61_;
#line 420 "../lib/Services/WindowControl.vala"
				_tmp57_ = window;
#line 420 "../lib/Services/WindowControl.vala"
				_tmp58_ = wnck_window_get_screen (_tmp57_);
#line 420 "../lib/Services/WindowControl.vala"
				_tmp59_ = wnck_screen_get_active_workspace (_tmp58_);
#line 420 "../lib/Services/WindowControl.vala"
				active_workspace = _tmp59_;
#line 421 "../lib/Services/WindowControl.vala"
				_tmp61_ = active_workspace;
#line 421 "../lib/Services/WindowControl.vala"
				if (_tmp61_ != NULL) {
#line 2342 "WindowControl.c"
					WnckWindow* _tmp62_;
					WnckWorkspace* _tmp63_;
#line 421 "../lib/Services/WindowControl.vala"
					_tmp62_ = window;
#line 421 "../lib/Services/WindowControl.vala"
					_tmp63_ = active_workspace;
#line 421 "../lib/Services/WindowControl.vala"
					_tmp60_ = wnck_window_is_in_viewport (_tmp62_, _tmp63_);
#line 2351 "WindowControl.c"
				} else {
#line 421 "../lib/Services/WindowControl.vala"
					_tmp60_ = FALSE;
#line 2355 "WindowControl.c"
				}
#line 421 "../lib/Services/WindowControl.vala"
				if (_tmp60_) {
#line 2359 "WindowControl.c"
					GList* _tmp64_;
#line 422 "../lib/Services/WindowControl.vala"
					_tmp64_ = windows;
#line 2363 "WindowControl.c"
					{
						GList* w_collection = NULL;
						GList* w_it = NULL;
#line 422 "../lib/Services/WindowControl.vala"
						w_collection = _tmp64_;
#line 422 "../lib/Services/WindowControl.vala"
						for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
#line 2371 "WindowControl.c"
							WnckWindow* w = NULL;
#line 422 "../lib/Services/WindowControl.vala"
							w = (WnckWindow*) w_it->data;
#line 2375 "WindowControl.c"
							{
								WnckWindow* _tmp65_;
								WnckWorkspace* _tmp66_;
#line 423 "../lib/Services/WindowControl.vala"
								_tmp65_ = w;
#line 423 "../lib/Services/WindowControl.vala"
								_tmp66_ = active_workspace;
#line 423 "../lib/Services/WindowControl.vala"
								if (wnck_window_is_in_viewport (_tmp65_, _tmp66_)) {
#line 2385 "WindowControl.c"
									WnckWindow* _tmp67_;
#line 424 "../lib/Services/WindowControl.vala"
									_tmp67_ = w;
#line 424 "../lib/Services/WindowControl.vala"
									plank_window_control_center_and_focus_window (_tmp67_, event_time);
#line 425 "../lib/Services/WindowControl.vala"
									g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 2393 "WindowControl.c"
								}
							}
						}
					}
#line 427 "../lib/Services/WindowControl.vala"
					(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 427 "../lib/Services/WindowControl.vala"
					return;
#line 2402 "WindowControl.c"
				}
			}
		}
	}
#line 432 "../lib/Services/WindowControl.vala"
	_tmp68_ = windows;
#line 432 "../lib/Services/WindowControl.vala"
	_tmp69_ = g_list_nth_data (_tmp68_, (guint) 0);
#line 432 "../lib/Services/WindowControl.vala"
	_tmp70_ = windows;
#line 432 "../lib/Services/WindowControl.vala"
	plank_window_control_intelligent_focus_off_viewport_window ((WnckWindow*) _tmp69_, _tmp70_, event_time);
#line 363 "../lib/Services/WindowControl.vala"
	(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 2417 "WindowControl.c"
}

static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 435 "../lib/Services/WindowControl.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 435 "../lib/Services/WindowControl.vala"
	return _data1_;
#line 2427 "WindowControl.c"
}

static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 435 "../lib/Services/WindowControl.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 435 "../lib/Services/WindowControl.vala"
		g_slice_free (Block1Data, _data1_);
#line 2439 "WindowControl.c"
	}
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 456 "../lib/Services/WindowControl.vala"
	return self ? g_object_ref (self) : NULL;
#line 2448 "WindowControl.c"
}

static gboolean
__lambda4_ (Block1Data* _data1_)
{
	WnckWindow* _tmp0_;
	gboolean result = FALSE;
#line 458 "../lib/Services/WindowControl.vala"
	plank_window_control_delayed_focus_timer_id = 0U;
#line 459 "../lib/Services/WindowControl.vala"
	_tmp0_ = plank_window_control_delayed_focus_window;
#line 459 "../lib/Services/WindowControl.vala"
	wnck_window_activate (_tmp0_, _data1_->event_time);
#line 460 "../lib/Services/WindowControl.vala"
	_g_object_unref0 (plank_window_control_delayed_focus_window);
#line 460 "../lib/Services/WindowControl.vala"
	plank_window_control_delayed_focus_window = NULL;
#line 461 "../lib/Services/WindowControl.vala"
	result = FALSE;
#line 461 "../lib/Services/WindowControl.vala"
	return result;
#line 2470 "WindowControl.c"
}

static gboolean
___lambda4__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda4_ (self);
#line 457 "../lib/Services/WindowControl.vala"
	return result;
#line 2480 "WindowControl.c"
}

static void
plank_window_control_intelligent_focus_off_viewport_window (WnckWindow* targetWindow,
                                                            GList* additional_windows,
                                                            guint32 event_time)
{
	Block1Data* _data1_;
	WnckWindow* _tmp4_;
#line 435 "../lib/Services/WindowControl.vala"
	g_return_if_fail (targetWindow != NULL);
#line 435 "../lib/Services/WindowControl.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 435 "../lib/Services/WindowControl.vala"
	_data1_->_ref_count_ = 1;
#line 435 "../lib/Services/WindowControl.vala"
	_data1_->event_time = event_time;
#line 438 "../lib/Services/WindowControl.vala"
	additional_windows = g_list_reverse (additional_windows);
#line 2500 "WindowControl.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 440 "../lib/Services/WindowControl.vala"
		window_collection = additional_windows;
#line 440 "../lib/Services/WindowControl.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 2508 "WindowControl.c"
			WnckWindow* window = NULL;
#line 440 "../lib/Services/WindowControl.vala"
			window = (WnckWindow*) window_it->data;
#line 2512 "WindowControl.c"
			{
				gboolean _tmp0_ = FALSE;
				WnckWindow* _tmp1_;
#line 441 "../lib/Services/WindowControl.vala"
				_tmp1_ = window;
#line 441 "../lib/Services/WindowControl.vala"
				if (!wnck_window_is_minimized (_tmp1_)) {
#line 2520 "WindowControl.c"
					WnckWindow* _tmp2_;
#line 441 "../lib/Services/WindowControl.vala"
					_tmp2_ = window;
#line 441 "../lib/Services/WindowControl.vala"
					_tmp0_ = plank_window_control_windows_share_viewport (targetWindow, _tmp2_);
#line 2526 "WindowControl.c"
				} else {
#line 441 "../lib/Services/WindowControl.vala"
					_tmp0_ = FALSE;
#line 2530 "WindowControl.c"
				}
#line 441 "../lib/Services/WindowControl.vala"
				if (_tmp0_) {
#line 2534 "WindowControl.c"
					WnckWindow* _tmp3_;
#line 442 "../lib/Services/WindowControl.vala"
					_tmp3_ = window;
#line 442 "../lib/Services/WindowControl.vala"
					plank_window_control_center_and_focus_window (_tmp3_, _data1_->event_time);
#line 443 "../lib/Services/WindowControl.vala"
					g_usleep ((gulong) PLANK_WINDOW_CONTROL_WINDOW_GROUP_DELAY);
#line 2542 "WindowControl.c"
				}
			}
		}
	}
#line 447 "../lib/Services/WindowControl.vala"
	plank_window_control_center_and_focus_window (targetWindow, _data1_->event_time);
#line 449 "../lib/Services/WindowControl.vala"
	if (g_list_length (additional_windows) <= ((guint) 1)) {
#line 450 "../lib/Services/WindowControl.vala"
		block1_data_unref (_data1_);
#line 450 "../lib/Services/WindowControl.vala"
		_data1_ = NULL;
#line 450 "../lib/Services/WindowControl.vala"
		return;
#line 2557 "WindowControl.c"
	}
#line 454 "../lib/Services/WindowControl.vala"
	if (plank_window_control_delayed_focus_timer_id > 0U) {
#line 455 "../lib/Services/WindowControl.vala"
		g_source_remove (plank_window_control_delayed_focus_timer_id);
#line 2563 "WindowControl.c"
	}
#line 456 "../lib/Services/WindowControl.vala"
	_tmp4_ = _g_object_ref0 (targetWindow);
#line 456 "../lib/Services/WindowControl.vala"
	_g_object_unref0 (plank_window_control_delayed_focus_window);
#line 456 "../lib/Services/WindowControl.vala"
	plank_window_control_delayed_focus_window = _tmp4_;
#line 457 "../lib/Services/WindowControl.vala"
	plank_window_control_delayed_focus_timer_id = gdk_threads_add_timeout (PLANK_WINDOW_CONTROL_VIEWPORT_CHANGE_DELAY, ___lambda4__gsource_func, _data1_);
#line 435 "../lib/Services/WindowControl.vala"
	block1_data_unref (_data1_);
#line 435 "../lib/Services/WindowControl.vala"
	_data1_ = NULL;
#line 2577 "WindowControl.c"
}

static gboolean
plank_window_control_windows_share_viewport (WnckWindow* first,
                                             WnckWindow* second)
{
	gboolean _tmp0_ = FALSE;
	WnckWorkspace* wksp = NULL;
	WnckWorkspace* _tmp1_;
	WnckWorkspace* _tmp2_;
	WnckWorkspace* _tmp4_;
	GdkRectangle firstGeo = {0};
	GdkRectangle _tmp5_ = {0};
	GdkRectangle secondGeo = {0};
	GdkRectangle _tmp6_ = {0};
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	gint _tmp12_ = 0;
	gint _tmp13_ = 0;
	gint _tmp14_ = 0;
	WnckWorkspace* _tmp15_;
	WnckWorkspace* _tmp16_;
	WnckWorkspace* _tmp17_;
	WnckWorkspace* _tmp18_;
	gint viewportWidth = 0;
	WnckScreen* _tmp19_;
	gint viewportHeight = 0;
	WnckScreen* _tmp20_;
	gint firstViewportX = 0;
	GdkRectangle _tmp21_;
	GdkRectangle _tmp22_;
	gint firstViewportY = 0;
	GdkRectangle _tmp23_;
	GdkRectangle _tmp24_;
	GdkRectangle viewpRect = {0};
	GdkRectangle _tmp25_ = {0};
	GdkRectangle _tmp26_;
	gboolean result = FALSE;
#line 467 "../lib/Services/WindowControl.vala"
	if (first == NULL) {
#line 467 "../lib/Services/WindowControl.vala"
		_tmp0_ = TRUE;
#line 2623 "WindowControl.c"
	} else {
#line 467 "../lib/Services/WindowControl.vala"
		_tmp0_ = second == NULL;
#line 2627 "WindowControl.c"
	}
#line 467 "../lib/Services/WindowControl.vala"
	if (_tmp0_) {
#line 468 "../lib/Services/WindowControl.vala"
		result = FALSE;
#line 468 "../lib/Services/WindowControl.vala"
		return result;
#line 2635 "WindowControl.c"
	}
#line 470 "../lib/Services/WindowControl.vala"
	_tmp1_ = wnck_window_get_workspace (first);
#line 470 "../lib/Services/WindowControl.vala"
	wksp = _tmp1_;
#line 471 "../lib/Services/WindowControl.vala"
	_tmp2_ = wksp;
#line 471 "../lib/Services/WindowControl.vala"
	if (_tmp2_ == NULL) {
#line 2645 "WindowControl.c"
		WnckWorkspace* _tmp3_;
#line 472 "../lib/Services/WindowControl.vala"
		_tmp3_ = wnck_window_get_workspace (second);
#line 472 "../lib/Services/WindowControl.vala"
		wksp = _tmp3_;
#line 2651 "WindowControl.c"
	}
#line 474 "../lib/Services/WindowControl.vala"
	_tmp4_ = wksp;
#line 474 "../lib/Services/WindowControl.vala"
	if (_tmp4_ == NULL) {
#line 475 "../lib/Services/WindowControl.vala"
		result = FALSE;
#line 475 "../lib/Services/WindowControl.vala"
		return result;
#line 2661 "WindowControl.c"
	}
#line 477 "../lib/Services/WindowControl.vala"
	firstGeo = _tmp5_;
#line 478 "../lib/Services/WindowControl.vala"
	secondGeo = _tmp6_;
#line 480 "../lib/Services/WindowControl.vala"
	wnck_window_get_geometry (first, &_tmp7_, &_tmp8_, &_tmp9_, &_tmp10_);
#line 480 "../lib/Services/WindowControl.vala"
	firstGeo.x = _tmp7_;
#line 480 "../lib/Services/WindowControl.vala"
	firstGeo.y = _tmp8_;
#line 480 "../lib/Services/WindowControl.vala"
	firstGeo.width = _tmp9_;
#line 480 "../lib/Services/WindowControl.vala"
	firstGeo.height = _tmp10_;
#line 481 "../lib/Services/WindowControl.vala"
	wnck_window_get_geometry (second, &_tmp11_, &_tmp12_, &_tmp13_, &_tmp14_);
#line 481 "../lib/Services/WindowControl.vala"
	secondGeo.x = _tmp11_;
#line 481 "../lib/Services/WindowControl.vala"
	secondGeo.y = _tmp12_;
#line 481 "../lib/Services/WindowControl.vala"
	secondGeo.width = _tmp13_;
#line 481 "../lib/Services/WindowControl.vala"
	secondGeo.height = _tmp14_;
#line 483 "../lib/Services/WindowControl.vala"
	_tmp15_ = wksp;
#line 483 "../lib/Services/WindowControl.vala"
	firstGeo.x = firstGeo.x + wnck_workspace_get_viewport_x (_tmp15_);
#line 484 "../lib/Services/WindowControl.vala"
	_tmp16_ = wksp;
#line 484 "../lib/Services/WindowControl.vala"
	firstGeo.y = firstGeo.y + wnck_workspace_get_viewport_y (_tmp16_);
#line 486 "../lib/Services/WindowControl.vala"
	_tmp17_ = wksp;
#line 486 "../lib/Services/WindowControl.vala"
	secondGeo.x = secondGeo.x + wnck_workspace_get_viewport_x (_tmp17_);
#line 487 "../lib/Services/WindowControl.vala"
	_tmp18_ = wksp;
#line 487 "../lib/Services/WindowControl.vala"
	secondGeo.y = secondGeo.y + wnck_workspace_get_viewport_y (_tmp18_);
#line 489 "../lib/Services/WindowControl.vala"
	_tmp19_ = wnck_window_get_screen (first);
#line 489 "../lib/Services/WindowControl.vala"
	viewportWidth = wnck_screen_get_width (_tmp19_);
#line 490 "../lib/Services/WindowControl.vala"
	_tmp20_ = wnck_window_get_screen (first);
#line 490 "../lib/Services/WindowControl.vala"
	viewportHeight = wnck_screen_get_height (_tmp20_);
#line 492 "../lib/Services/WindowControl.vala"
	_tmp21_ = firstGeo;
#line 492 "../lib/Services/WindowControl.vala"
	_tmp22_ = firstGeo;
#line 492 "../lib/Services/WindowControl.vala"
	firstViewportX = ((_tmp21_.x + (_tmp22_.width / 2)) / viewportWidth) * viewportWidth;
#line 493 "../lib/Services/WindowControl.vala"
	_tmp23_ = firstGeo;
#line 493 "../lib/Services/WindowControl.vala"
	_tmp24_ = firstGeo;
#line 493 "../lib/Services/WindowControl.vala"
	firstViewportY = ((_tmp23_.y + (_tmp24_.height / 2)) / viewportHeight) * viewportHeight;
#line 495 "../lib/Services/WindowControl.vala"
	_tmp25_.x = firstViewportX;
#line 495 "../lib/Services/WindowControl.vala"
	_tmp25_.y = firstViewportY;
#line 495 "../lib/Services/WindowControl.vala"
	_tmp25_.width = viewportWidth;
#line 495 "../lib/Services/WindowControl.vala"
	_tmp25_.height = viewportHeight;
#line 495 "../lib/Services/WindowControl.vala"
	viewpRect = _tmp25_;
#line 496 "../lib/Services/WindowControl.vala"
	_tmp26_ = secondGeo;
#line 496 "../lib/Services/WindowControl.vala"
	result = gdk_rectangle_intersect (&viewpRect, &_tmp26_, NULL);
#line 496 "../lib/Services/WindowControl.vala"
	return result;
#line 2739 "WindowControl.c"
}

static void
plank_window_control_center_and_focus_window (WnckWindow* w,
                                              guint32 event_time)
{
	WnckWorkspace* workspace = NULL;
	WnckWorkspace* _tmp0_;
	gboolean _tmp1_ = FALSE;
	WnckWorkspace* _tmp2_;
#line 499 "../lib/Services/WindowControl.vala"
	g_return_if_fail (w != NULL);
#line 501 "../lib/Services/WindowControl.vala"
	_tmp0_ = wnck_window_get_workspace (w);
#line 501 "../lib/Services/WindowControl.vala"
	workspace = _tmp0_;
#line 503 "../lib/Services/WindowControl.vala"
	_tmp2_ = workspace;
#line 503 "../lib/Services/WindowControl.vala"
	if (_tmp2_ != NULL) {
#line 2760 "WindowControl.c"
		WnckWorkspace* _tmp3_;
		WnckScreen* _tmp4_;
		WnckWorkspace* _tmp5_;
#line 503 "../lib/Services/WindowControl.vala"
		_tmp3_ = workspace;
#line 503 "../lib/Services/WindowControl.vala"
		_tmp4_ = wnck_window_get_screen (w);
#line 503 "../lib/Services/WindowControl.vala"
		_tmp5_ = wnck_screen_get_active_workspace (_tmp4_);
#line 503 "../lib/Services/WindowControl.vala"
		_tmp1_ = _tmp3_ != _tmp5_;
#line 2772 "WindowControl.c"
	} else {
#line 503 "../lib/Services/WindowControl.vala"
		_tmp1_ = FALSE;
#line 2776 "WindowControl.c"
	}
#line 503 "../lib/Services/WindowControl.vala"
	if (_tmp1_) {
#line 2780 "WindowControl.c"
		WnckWorkspace* _tmp6_;
#line 504 "../lib/Services/WindowControl.vala"
		_tmp6_ = workspace;
#line 504 "../lib/Services/WindowControl.vala"
		wnck_workspace_activate (_tmp6_, event_time);
#line 2786 "WindowControl.c"
	}
#line 506 "../lib/Services/WindowControl.vala"
	if (wnck_window_is_minimized (w)) {
#line 507 "../lib/Services/WindowControl.vala"
		wnck_window_unminimize (w, event_time);
#line 2792 "WindowControl.c"
	}
#line 509 "../lib/Services/WindowControl.vala"
	wnck_window_activate_transient (w, event_time);
#line 2796 "WindowControl.c"
}

void
plank_window_control_get_easy_geometry (WnckWindow* w,
                                        GdkRectangle* result)
{
	GdkRectangle geo = {0};
	GdkRectangle _tmp0_ = {0};
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
#line 512 "../lib/Services/WindowControl.vala"
	g_return_if_fail (w != NULL);
#line 514 "../lib/Services/WindowControl.vala"
	geo = _tmp0_;
#line 516 "../lib/Services/WindowControl.vala"
	wnck_window_get_geometry (w, &_tmp1_, &_tmp2_, &_tmp3_, &_tmp4_);
#line 516 "../lib/Services/WindowControl.vala"
	geo.x = _tmp1_;
#line 516 "../lib/Services/WindowControl.vala"
	geo.y = _tmp2_;
#line 516 "../lib/Services/WindowControl.vala"
	geo.width = _tmp3_;
#line 516 "../lib/Services/WindowControl.vala"
	geo.height = _tmp4_;
#line 518 "../lib/Services/WindowControl.vala"
	*result = geo;
#line 518 "../lib/Services/WindowControl.vala"
	return;
#line 2827 "WindowControl.c"
}

static void
plank_window_control_class_init (PlankWindowControlClass * klass,
                                 gpointer klass_data)
{
#line 39 "../lib/Services/WindowControl.vala"
	plank_window_control_parent_class = g_type_class_peek_parent (klass);
#line 39 "../lib/Services/WindowControl.vala"
	G_OBJECT_CLASS (klass)->finalize = plank_window_control_finalize;
#line 2838 "WindowControl.c"
}

static void
plank_window_control_instance_init (PlankWindowControl * self,
                                    gpointer klass)
{
}

static void
plank_window_control_finalize (GObject * obj)
{
	PlankWindowControl * self;
#line 39 "../lib/Services/WindowControl.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PLANK_TYPE_WINDOW_CONTROL, PlankWindowControl);
#line 39 "../lib/Services/WindowControl.vala"
	G_OBJECT_CLASS (plank_window_control_parent_class)->finalize (obj);
#line 2855 "WindowControl.c"
}

static GType
plank_window_control_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (PlankWindowControlClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) plank_window_control_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PlankWindowControl), 0, (GInstanceInitFunc) plank_window_control_instance_init, NULL };
	GType plank_window_control_type_id;
	plank_window_control_type_id = g_type_register_static (G_TYPE_OBJECT, "PlankWindowControl", &g_define_type_info, 0);
	return plank_window_control_type_id;
}

GType
plank_window_control_get_type (void)
{
	static volatile gsize plank_window_control_type_id__volatile = 0;
	if (g_once_init_enter (&plank_window_control_type_id__volatile)) {
		GType plank_window_control_type_id;
		plank_window_control_type_id = plank_window_control_get_type_once ();
		g_once_init_leave (&plank_window_control_type_id__volatile, plank_window_control_type_id);
	}
	return plank_window_control_type_id__volatile;
}

