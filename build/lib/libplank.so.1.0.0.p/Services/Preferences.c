/* Preferences.c generated by valac 0.48.17, the Vala compiler
 * generated from Preferences.vala, do not modify */

/**/
/*  Copyright (C) 2011-2012 Robert Dyer, Rico Tzschichholz*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gio/gio.h>
#include <float.h>
#include <math.h>
#include <gdk/gdk.h>

#define PLANK_TYPE_SERIALIZABLE (plank_serializable_get_type ())
#define PLANK_SERIALIZABLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PLANK_TYPE_SERIALIZABLE, PlankSerializable))
#define PLANK_IS_SERIALIZABLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PLANK_TYPE_SERIALIZABLE))
#define PLANK_SERIALIZABLE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), PLANK_TYPE_SERIALIZABLE, PlankSerializableIface))

typedef struct _PlankSerializable PlankSerializable;
typedef struct _PlankSerializableIface PlankSerializableIface;

#define PLANK_TYPE_PREFERENCES (plank_preferences_get_type ())
#define PLANK_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PLANK_TYPE_PREFERENCES, PlankPreferences))
#define PLANK_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PLANK_TYPE_PREFERENCES, PlankPreferencesClass))
#define PLANK_IS_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PLANK_TYPE_PREFERENCES))
#define PLANK_IS_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PLANK_TYPE_PREFERENCES))
#define PLANK_PREFERENCES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PLANK_TYPE_PREFERENCES, PlankPreferencesClass))

typedef struct _PlankPreferences PlankPreferences;
typedef struct _PlankPreferencesClass PlankPreferencesClass;
typedef struct _PlankPreferencesPrivate PlankPreferencesPrivate;
enum  {
	PLANK_PREFERENCES_0_PROPERTY,
	PLANK_PREFERENCES_NUM_PROPERTIES
};
static GParamSpec* plank_preferences_properties[PLANK_PREFERENCES_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_key_file_unref0(var) ((var == NULL) ? NULL : (var = (g_key_file_unref (var), NULL)))

#define PLANK_TYPE_COLOR (plank_color_get_type ())
typedef GdkRGBA PlankColor;
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
enum  {
	PLANK_PREFERENCES_DELETED_SIGNAL,
	PLANK_PREFERENCES_NUM_SIGNALS
};
static guint plank_preferences_signals[PLANK_PREFERENCES_NUM_SIGNALS] = {0};
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _PlankSerializableIface {
	GTypeInterface parent_iface;
	gchar* (*serialize) (PlankSerializable* self);
	void (*deserialize) (PlankSerializable* self, const gchar* s);
};

struct _PlankPreferences {
	GObject parent_instance;
	PlankPreferencesPrivate * priv;
};

struct _PlankPreferencesClass {
	GObjectClass parent_class;
	void (*verify) (PlankPreferences* self, const gchar* prop);
	void (*reset_properties) (PlankPreferences* self);
};

struct _PlankPreferencesPrivate {
	GFile* backing_file;
	GFileMonitor* backing_monitor;
	gboolean read_only;
	gboolean is_delayed;
	gboolean is_delayed_internal;
	gboolean is_changed;
};

static gint PlankPreferences_private_offset;
static gpointer plank_preferences_parent_class = NULL;
static gchar** plank_preferences_TRANSITION_MAP;
static gint plank_preferences_TRANSITION_MAP_length1;
static gint plank_preferences_TRANSITION_MAP_length2;
static gchar** plank_preferences_TRANSITION_MAP = NULL;
static gint plank_preferences_TRANSITION_MAP_length1 = 0;
static gint plank_preferences_TRANSITION_MAP_length2 = 0;

GType plank_serializable_get_type (void) G_GNUC_CONST;
gchar* plank_serializable_serialize (PlankSerializable* self);
void plank_serializable_deserialize (PlankSerializable* self,
                                     const gchar* s);
static GType plank_serializable_get_type_once (void);
GType plank_preferences_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PlankPreferences, g_object_unref)
void plank_preferences_verify (PlankPreferences* self,
                               const gchar* prop);
void plank_preferences_reset_properties (PlankPreferences* self);
static void plank_preferences_handle_notify (PlankPreferences* self,
                                      GObject* sender,
                                      GParamSpec* property);
static void _plank_preferences_handle_notify_g_object_notify (GObject* _sender,
                                                       GParamSpec* pspec,
                                                       gpointer self);
void plank_preferences_apply (PlankPreferences* self);
static void plank_preferences_stop_monitor (PlankPreferences* self);
PlankPreferences* plank_preferences_construct (GType object_type);
void plank_logger_verbose (const gchar* msg,
                           ...);
static void plank_preferences_save_prefs (PlankPreferences* self);
static void plank_preferences_call_verify (PlankPreferences* self,
                                    const gchar* prop);
static void plank_preferences_handle_verify_notify (PlankPreferences* self,
                                             GObject* sender,
                                             GParamSpec* property);
static void _plank_preferences_handle_verify_notify_g_object_notify (GObject* _sender,
                                                              GParamSpec* pspec,
                                                              gpointer self);
static void plank_preferences_real_verify (PlankPreferences* self,
                                    const gchar* prop);
static void plank_preferences_real_reset_properties (PlankPreferences* self);
PlankPreferences* plank_preferences_construct_with_file (GType object_type,
                                                         GFile* file);
void plank_preferences_init_from_file (PlankPreferences* self,
                                       GFile* file);
PlankPreferences* plank_preferences_construct_with_filename (GType object_type,
                                                             const gchar* filename);
GFile* plank_paths_get_AppConfigFolder (void);
static void plank_preferences_load_prefs (PlankPreferences* self);
static void plank_preferences_start_monitor (PlankPreferences* self);
void plank_preferences_init_from_filename (PlankPreferences* self,
                                           const gchar* filename);
void plank_preferences_delay (PlankPreferences* self);
gchar* plank_preferences_get_filename (PlankPreferences* self);
GFile* plank_preferences_get_backing_file (PlankPreferences* self);
void plank_preferences_delete (PlankPreferences* self);
static void plank_preferences_backing_file_changed (GFile* f,
                                             GFile* other,
                                             GFileMonitorEvent event,
                                             PlankPreferences* self);
static void _plank_preferences_backing_file_changed_g_file_monitor_changed (GFileMonitor* _sender,
                                                                     GFile* file,
                                                                     GFile* other_file,
                                                                     GFileMonitorEvent event_type,
                                                                     gpointer self);
GType plank_color_get_type (void) G_GNUC_CONST;
PlankColor* plank_color_dup (const PlankColor* self);
void plank_color_free (PlankColor* self);
gchar* plank_color_to_prefs_string (PlankColor *self);
void plank_color_from_prefs_string (const gchar* s,
                                    PlankColor* result);
static GObject * plank_preferences_constructor (GType type,
                                         guint n_construct_properties,
                                         GObjectConstructParam * construct_properties);
static void plank_preferences_finalize (GObject * obj);
static GType plank_preferences_get_type_once (void);

/**
 * Serializes the object into a string representation.
 *
 * @return the string representation of the object
 */
gchar*
plank_serializable_serialize (PlankSerializable* self)
{
#line 34 "../lib/Services/Preferences.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 34 "../lib/Services/Preferences.vala"
	return PLANK_SERIALIZABLE_GET_INTERFACE (self)->serialize (self);
#line 190 "Preferences.c"
}

/**
 * De-serializes the object from a string representation.
 *
 * @param s the string representation of the object
 */
void
plank_serializable_deserialize (PlankSerializable* self,
                                const gchar* s)
{
#line 41 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 41 "../lib/Services/Preferences.vala"
	PLANK_SERIALIZABLE_GET_INTERFACE (self)->deserialize (self, s);
#line 206 "Preferences.c"
}

static void
plank_serializable_default_init (PlankSerializableIface * iface,
                                 gpointer iface_data)
{
}

/**
 * This interface is used by objects that need to be serialized in a Preferences.
 * The object must have a string representation and provide these methods to
 * translate between the string and object representations.
 */
static GType
plank_serializable_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (PlankSerializableIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) plank_serializable_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType plank_serializable_type_id;
	plank_serializable_type_id = g_type_register_static (G_TYPE_INTERFACE, "PlankSerializable", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (plank_serializable_type_id, G_TYPE_OBJECT);
	return plank_serializable_type_id;
}

GType
plank_serializable_get_type (void)
{
	static volatile gsize plank_serializable_type_id__volatile = 0;
	if (g_once_init_enter (&plank_serializable_type_id__volatile)) {
		GType plank_serializable_type_id;
		plank_serializable_type_id = plank_serializable_get_type_once ();
		g_once_init_leave (&plank_serializable_type_id__volatile, plank_serializable_type_id);
	}
	return plank_serializable_type_id__volatile;
}

static inline gpointer
plank_preferences_get_instance_private (PlankPreferences* self)
{
	return G_STRUCT_MEMBER_P (self, PlankPreferences_private_offset);
}

static void
_plank_preferences_handle_notify_g_object_notify (GObject* _sender,
                                                  GParamSpec* pspec,
                                                  gpointer self)
{
#line 80 "../lib/Services/Preferences.vala"
	plank_preferences_handle_notify ((PlankPreferences*) self, _sender, pspec);
#line 255 "Preferences.c"
}

/**
 * Creates a new preferences object with no backing file.
 */
PlankPreferences*
plank_preferences_construct (GType object_type)
{
	PlankPreferences * self = NULL;
#line 68 "../lib/Services/Preferences.vala"
	self = (PlankPreferences*) g_object_new (object_type, NULL);
#line 68 "../lib/Services/Preferences.vala"
	return self;
#line 269 "Preferences.c"
}

static void
plank_preferences_handle_notify (PlankPreferences* self,
                                 GObject* sender,
                                 GParamSpec* property)
{
	guint _tmp0_;
	const gchar* _tmp1_;
	GFile* _tmp2_;
	const gchar* _tmp3_;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
#line 85 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 85 "../lib/Services/Preferences.vala"
	g_return_if_fail (sender != NULL);
#line 85 "../lib/Services/Preferences.vala"
	g_return_if_fail (property != NULL);
#line 87 "../lib/Services/Preferences.vala"
	if (self->priv->read_only) {
#line 88 "../lib/Services/Preferences.vala"
		return;
#line 293 "Preferences.c"
	}
#line 90 "../lib/Services/Preferences.vala"
	g_signal_parse_name ("notify", G_TYPE_OBJECT, &_tmp0_, NULL, FALSE);
#line 90 "../lib/Services/Preferences.vala"
	g_signal_handlers_disconnect_matched ((GObject*) self, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp0_, 0, NULL, (GCallback) _plank_preferences_handle_notify_g_object_notify, self);
#line 91 "../lib/Services/Preferences.vala"
	g_object_freeze_notify ((GObject*) self);
#line 93 "../lib/Services/Preferences.vala"
	_tmp1_ = property->name;
#line 93 "../lib/Services/Preferences.vala"
	plank_logger_verbose ("property changed: %s", _tmp1_, NULL);
#line 95 "../lib/Services/Preferences.vala"
	self->priv->is_delayed_internal = TRUE;
#line 96 "../lib/Services/Preferences.vala"
	_tmp2_ = self->priv->backing_file;
#line 96 "../lib/Services/Preferences.vala"
	if (_tmp2_ != NULL) {
#line 97 "../lib/Services/Preferences.vala"
		plank_preferences_save_prefs (self);
#line 313 "Preferences.c"
	}
#line 99 "../lib/Services/Preferences.vala"
	_tmp3_ = property->name;
#line 99 "../lib/Services/Preferences.vala"
	plank_preferences_call_verify (self, _tmp3_);
#line 101 "../lib/Services/Preferences.vala"
	self->priv->is_delayed_internal = FALSE;
#line 102 "../lib/Services/Preferences.vala"
	if (!self->priv->is_delayed) {
#line 102 "../lib/Services/Preferences.vala"
		_tmp5_ = self->priv->is_changed;
#line 325 "Preferences.c"
	} else {
#line 102 "../lib/Services/Preferences.vala"
		_tmp5_ = FALSE;
#line 329 "Preferences.c"
	}
#line 102 "../lib/Services/Preferences.vala"
	if (_tmp5_) {
#line 333 "Preferences.c"
		GFile* _tmp6_;
#line 102 "../lib/Services/Preferences.vala"
		_tmp6_ = self->priv->backing_file;
#line 102 "../lib/Services/Preferences.vala"
		_tmp4_ = _tmp6_ != NULL;
#line 339 "Preferences.c"
	} else {
#line 102 "../lib/Services/Preferences.vala"
		_tmp4_ = FALSE;
#line 343 "Preferences.c"
	}
#line 102 "../lib/Services/Preferences.vala"
	if (_tmp4_) {
#line 103 "../lib/Services/Preferences.vala"
		plank_preferences_save_prefs (self);
#line 349 "Preferences.c"
	}
#line 105 "../lib/Services/Preferences.vala"
	g_object_thaw_notify ((GObject*) self);
#line 106 "../lib/Services/Preferences.vala"
	g_signal_connect_object ((GObject*) self, "notify", (GCallback) _plank_preferences_handle_notify_g_object_notify, self, 0);
#line 355 "Preferences.c"
}

static void
plank_preferences_handle_verify_notify (PlankPreferences* self,
                                        GObject* sender,
                                        GParamSpec* property)
{
	GFile* _tmp0_;
#line 109 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 109 "../lib/Services/Preferences.vala"
	g_return_if_fail (sender != NULL);
#line 109 "../lib/Services/Preferences.vala"
	g_return_if_fail (property != NULL);
#line 111 "../lib/Services/Preferences.vala"
	plank_preferences_save_prefs (self);
#line 112 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_file;
#line 112 "../lib/Services/Preferences.vala"
	if (_tmp0_ != NULL) {
#line 376 "Preferences.c"
		gchar* _tmp1_ = NULL;
		GFile* _tmp2_;
		gchar* _tmp3_;
		const gchar* _tmp5_;
#line 113 "../lib/Services/Preferences.vala"
		_tmp2_ = self->priv->backing_file;
#line 113 "../lib/Services/Preferences.vala"
		_tmp3_ = g_file_get_path (_tmp2_);
#line 113 "../lib/Services/Preferences.vala"
		_tmp1_ = _tmp3_;
#line 113 "../lib/Services/Preferences.vala"
		if (_tmp1_ == NULL) {
#line 389 "Preferences.c"
			gchar* _tmp4_;
#line 113 "../lib/Services/Preferences.vala"
			_tmp4_ = g_strdup ("");
#line 113 "../lib/Services/Preferences.vala"
			_g_free0 (_tmp1_);
#line 113 "../lib/Services/Preferences.vala"
			_tmp1_ = _tmp4_;
#line 397 "Preferences.c"
		}
#line 113 "../lib/Services/Preferences.vala"
		_tmp5_ = property->name;
#line 113 "../lib/Services/Preferences.vala"
		g_warning ("Preferences.vala:113: Key '%s' failed verification in preferences file" \
" '%s', changing value", _tmp5_, _tmp1_);
#line 112 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp1_);
#line 405 "Preferences.c"
	} else {
		const gchar* _tmp6_;
#line 115 "../lib/Services/Preferences.vala"
		_tmp6_ = property->name;
#line 115 "../lib/Services/Preferences.vala"
		g_warning ("Preferences.vala:115: Key '%s' failed verification, changing value", _tmp6_);
#line 412 "Preferences.c"
	}
}

static void
_plank_preferences_handle_verify_notify_g_object_notify (GObject* _sender,
                                                         GParamSpec* pspec,
                                                         gpointer self)
{
#line 121 "../lib/Services/Preferences.vala"
	plank_preferences_handle_verify_notify ((PlankPreferences*) self, _sender, pspec);
#line 423 "Preferences.c"
}

static void
plank_preferences_call_verify (PlankPreferences* self,
                               const gchar* prop)
{
	guint _tmp0_;
#line 118 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 118 "../lib/Services/Preferences.vala"
	g_return_if_fail (prop != NULL);
#line 120 "../lib/Services/Preferences.vala"
	g_object_freeze_notify ((GObject*) self);
#line 121 "../lib/Services/Preferences.vala"
	g_signal_connect_object ((GObject*) self, "notify", (GCallback) _plank_preferences_handle_verify_notify_g_object_notify, self, 0);
#line 122 "../lib/Services/Preferences.vala"
	plank_preferences_verify (self, prop);
#line 123 "../lib/Services/Preferences.vala"
	g_signal_parse_name ("notify", G_TYPE_OBJECT, &_tmp0_, NULL, FALSE);
#line 123 "../lib/Services/Preferences.vala"
	g_signal_handlers_disconnect_matched ((GObject*) self, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp0_, 0, NULL, (GCallback) _plank_preferences_handle_verify_notify_g_object_notify, self);
#line 124 "../lib/Services/Preferences.vala"
	g_object_thaw_notify ((GObject*) self);
#line 447 "Preferences.c"
}

/**
 * This method will verify the value of a property.
 * If the value is wrong, this method should replace it with a sanitized value.
 *
 * @param prop the name of the property that needs verified
 */
static void
plank_preferences_real_verify (PlankPreferences* self,
                               const gchar* prop)
{
#line 133 "../lib/Services/Preferences.vala"
	g_return_if_fail (prop != NULL);
#line 462 "Preferences.c"
}

void
plank_preferences_verify (PlankPreferences* self,
                          const gchar* prop)
{
#line 133 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 133 "../lib/Services/Preferences.vala"
	PLANK_PREFERENCES_GET_CLASS (self)->verify (self, prop);
#line 473 "Preferences.c"
}

/**
 * Resets all properties to their default values.  Called from construct and before
 * loading from the backing file.
 */
static void
plank_preferences_real_reset_properties (PlankPreferences* self)
{
#line 143 "../lib/Services/Preferences.vala"
	g_critical ("Type `%s' does not implement abstract method `plank_preferences_reset_properties'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 143 "../lib/Services/Preferences.vala"
	return;
#line 487 "Preferences.c"
}

void
plank_preferences_reset_properties (PlankPreferences* self)
{
#line 143 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 143 "../lib/Services/Preferences.vala"
	PLANK_PREFERENCES_GET_CLASS (self)->reset_properties (self);
#line 497 "Preferences.c"
}

/**
 * Creates a preferences object with a backing file.
 *
 * @param file the {@link GLib.File} of the backing file for this preferences
 */
PlankPreferences*
plank_preferences_construct_with_file (GType object_type,
                                       GFile* file)
{
	PlankPreferences * self = NULL;
#line 154 "../lib/Services/Preferences.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 154 "../lib/Services/Preferences.vala"
	self = (PlankPreferences*) g_object_new (object_type, NULL);
#line 156 "../lib/Services/Preferences.vala"
	plank_preferences_init_from_file (self, file);
#line 154 "../lib/Services/Preferences.vala"
	return self;
#line 518 "Preferences.c"
}

/**
 * Creates a preferences object with a backing filename.
 *
 * @param filename of the backing file for this preferences
 */
PlankPreferences*
plank_preferences_construct_with_filename (GType object_type,
                                           const gchar* filename)
{
	PlankPreferences * self = NULL;
	GFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
#line 164 "../lib/Services/Preferences.vala"
	g_return_val_if_fail (filename != NULL, NULL);
#line 164 "../lib/Services/Preferences.vala"
	self = (PlankPreferences*) g_object_new (object_type, NULL);
#line 166 "../lib/Services/Preferences.vala"
	_tmp0_ = plank_paths_get_AppConfigFolder ();
#line 166 "../lib/Services/Preferences.vala"
	_tmp1_ = _tmp0_;
#line 166 "../lib/Services/Preferences.vala"
	_tmp2_ = g_file_get_child (_tmp1_, filename);
#line 166 "../lib/Services/Preferences.vala"
	_tmp3_ = _tmp2_;
#line 166 "../lib/Services/Preferences.vala"
	plank_preferences_init_from_file (self, _tmp3_);
#line 166 "../lib/Services/Preferences.vala"
	_g_object_unref0 (_tmp3_);
#line 164 "../lib/Services/Preferences.vala"
	return self;
#line 553 "Preferences.c"
}

/**
 * Initializes this preferences with a backing file.
 *
 * @param file the {@link GLib.File} of the backing file for this preferences
 */
static gpointer
_g_object_ref0 (gpointer self)
{
#line 178 "../lib/Services/Preferences.vala"
	return self ? g_object_ref (self) : NULL;
#line 566 "Preferences.c"
}

void
plank_preferences_init_from_file (PlankPreferences* self,
                                  GFile* file)
{
	GFile* _tmp0_;
	gboolean file_exists = FALSE;
	GFile* _tmp1_;
	GError* _inner_error0_ = NULL;
#line 174 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 174 "../lib/Services/Preferences.vala"
	g_return_if_fail (file != NULL);
#line 176 "../lib/Services/Preferences.vala"
	plank_preferences_stop_monitor (self);
#line 178 "../lib/Services/Preferences.vala"
	_tmp0_ = _g_object_ref0 (file);
#line 178 "../lib/Services/Preferences.vala"
	_g_object_unref0 (self->priv->backing_file);
#line 178 "../lib/Services/Preferences.vala"
	self->priv->backing_file = _tmp0_;
#line 179 "../lib/Services/Preferences.vala"
	_tmp1_ = self->priv->backing_file;
#line 179 "../lib/Services/Preferences.vala"
	file_exists = g_file_query_exists (_tmp1_, NULL);
#line 181 "../lib/Services/Preferences.vala"
	if (!self->priv->read_only) {
#line 595 "Preferences.c"
		{
			GFileInfo* info = NULL;
			gboolean _tmp11_ = FALSE;
#line 184 "../lib/Services/Preferences.vala"
			if (file_exists) {
#line 601 "Preferences.c"
				GFileInfo* _tmp2_ = NULL;
				GFileInfo* _tmp3_;
				GFileInfo* _tmp4_;
#line 185 "../lib/Services/Preferences.vala"
				_tmp3_ = g_file_query_info (file, G_FILE_ATTRIBUTE_ACCESS_CAN_WRITE, G_FILE_QUERY_INFO_NONE, NULL, &_inner_error0_);
#line 185 "../lib/Services/Preferences.vala"
				_tmp2_ = _tmp3_;
#line 185 "../lib/Services/Preferences.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 185 "../lib/Services/Preferences.vala"
					_g_object_unref0 (info);
#line 613 "Preferences.c"
					goto __catch0_g_error;
				}
#line 185 "../lib/Services/Preferences.vala"
				_tmp4_ = _tmp2_;
#line 185 "../lib/Services/Preferences.vala"
				_tmp2_ = NULL;
#line 185 "../lib/Services/Preferences.vala"
				_g_object_unref0 (info);
#line 185 "../lib/Services/Preferences.vala"
				info = _tmp4_;
#line 184 "../lib/Services/Preferences.vala"
				_g_object_unref0 (_tmp2_);
#line 626 "Preferences.c"
			} else {
				GFileInfo* _tmp5_ = NULL;
				GFile* _tmp6_;
				GFile* _tmp7_;
				GFileInfo* _tmp8_;
				GFileInfo* _tmp9_;
				GFileInfo* _tmp10_;
#line 187 "../lib/Services/Preferences.vala"
				_tmp6_ = g_file_get_parent (file);
#line 187 "../lib/Services/Preferences.vala"
				_tmp7_ = _tmp6_;
#line 187 "../lib/Services/Preferences.vala"
				_tmp8_ = g_file_query_info (_tmp7_, G_FILE_ATTRIBUTE_ACCESS_CAN_WRITE, G_FILE_QUERY_INFO_NONE, NULL, &_inner_error0_);
#line 187 "../lib/Services/Preferences.vala"
				_tmp9_ = _tmp8_;
#line 187 "../lib/Services/Preferences.vala"
				_g_object_unref0 (_tmp7_);
#line 187 "../lib/Services/Preferences.vala"
				_tmp5_ = _tmp9_;
#line 187 "../lib/Services/Preferences.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 187 "../lib/Services/Preferences.vala"
					_g_object_unref0 (info);
#line 650 "Preferences.c"
					goto __catch0_g_error;
				}
#line 187 "../lib/Services/Preferences.vala"
				_tmp10_ = _tmp5_;
#line 187 "../lib/Services/Preferences.vala"
				_tmp5_ = NULL;
#line 187 "../lib/Services/Preferences.vala"
				_g_object_unref0 (info);
#line 187 "../lib/Services/Preferences.vala"
				info = _tmp10_;
#line 184 "../lib/Services/Preferences.vala"
				_g_object_unref0 (_tmp5_);
#line 663 "Preferences.c"
			}
#line 189 "../lib/Services/Preferences.vala"
			if (self->priv->read_only) {
#line 189 "../lib/Services/Preferences.vala"
				_tmp11_ = TRUE;
#line 669 "Preferences.c"
			} else {
				GFileInfo* _tmp12_;
#line 189 "../lib/Services/Preferences.vala"
				_tmp12_ = info;
#line 189 "../lib/Services/Preferences.vala"
				_tmp11_ = !g_file_info_get_attribute_boolean (_tmp12_, G_FILE_ATTRIBUTE_ACCESS_CAN_WRITE);
#line 676 "Preferences.c"
			}
#line 189 "../lib/Services/Preferences.vala"
			self->priv->read_only = _tmp11_;
#line 191 "../lib/Services/Preferences.vala"
			if (self->priv->read_only) {
#line 682 "Preferences.c"
				gchar* _tmp13_ = NULL;
				gchar* _tmp14_;
#line 192 "../lib/Services/Preferences.vala"
				_tmp14_ = g_file_get_path (file);
#line 192 "../lib/Services/Preferences.vala"
				_tmp13_ = _tmp14_;
#line 192 "../lib/Services/Preferences.vala"
				if (_tmp13_ == NULL) {
#line 691 "Preferences.c"
					gchar* _tmp15_;
#line 192 "../lib/Services/Preferences.vala"
					_tmp15_ = g_strdup ("");
#line 192 "../lib/Services/Preferences.vala"
					_g_free0 (_tmp13_);
#line 192 "../lib/Services/Preferences.vala"
					_tmp13_ = _tmp15_;
#line 699 "Preferences.c"
				}
#line 192 "../lib/Services/Preferences.vala"
				g_warning ("Preferences.vala:192: '%s' is read-only!", _tmp13_);
#line 191 "../lib/Services/Preferences.vala"
				_g_free0 (_tmp13_);
#line 705 "Preferences.c"
			}
#line 182 "../lib/Services/Preferences.vala"
			_g_object_unref0 (info);
#line 709 "Preferences.c"
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			GError* _tmp16_;
			const gchar* _tmp17_;
#line 182 "../lib/Services/Preferences.vala"
			e = _inner_error0_;
#line 182 "../lib/Services/Preferences.vala"
			_inner_error0_ = NULL;
#line 194 "../lib/Services/Preferences.vala"
			_tmp16_ = e;
#line 194 "../lib/Services/Preferences.vala"
			_tmp17_ = _tmp16_->message;
#line 194 "../lib/Services/Preferences.vala"
			g_warning ("Preferences.vala:194: %s", _tmp17_);
#line 195 "../lib/Services/Preferences.vala"
			self->priv->read_only = TRUE;
#line 182 "../lib/Services/Preferences.vala"
			_g_error_free0 (e);
#line 731 "Preferences.c"
		}
		__finally0:
#line 182 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 182 "../lib/Services/Preferences.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 182 "../lib/Services/Preferences.vala"
			g_clear_error (&_inner_error0_);
#line 182 "../lib/Services/Preferences.vala"
			return;
#line 742 "Preferences.c"
		}
	}
#line 200 "../lib/Services/Preferences.vala"
	if (!file_exists) {
#line 201 "../lib/Services/Preferences.vala"
		plank_preferences_save_prefs (self);
#line 749 "Preferences.c"
	} else {
#line 203 "../lib/Services/Preferences.vala"
		plank_preferences_load_prefs (self);
#line 753 "Preferences.c"
	}
#line 206 "../lib/Services/Preferences.vala"
	plank_preferences_start_monitor (self);
#line 757 "Preferences.c"
}

/**
 * Initializes this preferences with a backing filename.
 *
 * @param filename of the backing file for this preferences
 */
void
plank_preferences_init_from_filename (PlankPreferences* self,
                                      const gchar* filename)
{
	GFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
#line 214 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 214 "../lib/Services/Preferences.vala"
	g_return_if_fail (filename != NULL);
#line 216 "../lib/Services/Preferences.vala"
	_tmp0_ = plank_paths_get_AppConfigFolder ();
#line 216 "../lib/Services/Preferences.vala"
	_tmp1_ = _tmp0_;
#line 216 "../lib/Services/Preferences.vala"
	_tmp2_ = g_file_get_child (_tmp1_, filename);
#line 216 "../lib/Services/Preferences.vala"
	_tmp3_ = _tmp2_;
#line 216 "../lib/Services/Preferences.vala"
	plank_preferences_init_from_file (self, _tmp3_);
#line 216 "../lib/Services/Preferences.vala"
	_g_object_unref0 (_tmp3_);
#line 789 "Preferences.c"
}

/**
 * Delays saving changes to the backing file until apply() is called.
 */
void
plank_preferences_delay (PlankPreferences* self)
{
	gboolean _tmp0_ = FALSE;
	GFile* _tmp1_;
#line 226 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 228 "../lib/Services/Preferences.vala"
	if (self->priv->read_only) {
#line 229 "../lib/Services/Preferences.vala"
		return;
#line 806 "Preferences.c"
	}
#line 231 "../lib/Services/Preferences.vala"
	if (self->priv->is_delayed) {
#line 232 "../lib/Services/Preferences.vala"
		return;
#line 812 "Preferences.c"
	}
#line 234 "../lib/Services/Preferences.vala"
	_tmp1_ = self->priv->backing_file;
#line 234 "../lib/Services/Preferences.vala"
	if (_tmp1_ != NULL) {
#line 818 "Preferences.c"
		GFile* _tmp2_;
		gchar* _tmp3_;
		gchar* _tmp4_;
#line 234 "../lib/Services/Preferences.vala"
		_tmp2_ = self->priv->backing_file;
#line 234 "../lib/Services/Preferences.vala"
		_tmp3_ = g_file_get_path (_tmp2_);
#line 234 "../lib/Services/Preferences.vala"
		_tmp4_ = _tmp3_;
#line 234 "../lib/Services/Preferences.vala"
		_tmp0_ = _tmp4_ != NULL;
#line 234 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp4_);
#line 832 "Preferences.c"
	} else {
#line 234 "../lib/Services/Preferences.vala"
		_tmp0_ = FALSE;
#line 836 "Preferences.c"
	}
#line 234 "../lib/Services/Preferences.vala"
	if (_tmp0_) {
#line 840 "Preferences.c"
		GFile* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 235 "../lib/Services/Preferences.vala"
		_tmp5_ = self->priv->backing_file;
#line 235 "../lib/Services/Preferences.vala"
		_tmp6_ = g_file_get_path (_tmp5_);
#line 235 "../lib/Services/Preferences.vala"
		_tmp7_ = _tmp6_;
#line 235 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.delay('%s')", _tmp7_, NULL);
#line 235 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp7_);
#line 854 "Preferences.c"
	} else {
#line 237 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.delay()", NULL);
#line 858 "Preferences.c"
	}
#line 239 "../lib/Services/Preferences.vala"
	self->priv->is_delayed = TRUE;
#line 862 "Preferences.c"
}

/**
 * If any settings were changed, apply them now.
 */
void
plank_preferences_apply (PlankPreferences* self)
{
	gboolean _tmp0_ = FALSE;
	GFile* _tmp1_;
	gboolean _tmp8_ = FALSE;
#line 245 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 247 "../lib/Services/Preferences.vala"
	if (self->priv->read_only) {
#line 248 "../lib/Services/Preferences.vala"
		return;
#line 880 "Preferences.c"
	}
#line 250 "../lib/Services/Preferences.vala"
	if (!self->priv->is_delayed) {
#line 251 "../lib/Services/Preferences.vala"
		return;
#line 886 "Preferences.c"
	}
#line 253 "../lib/Services/Preferences.vala"
	_tmp1_ = self->priv->backing_file;
#line 253 "../lib/Services/Preferences.vala"
	if (_tmp1_ != NULL) {
#line 892 "Preferences.c"
		GFile* _tmp2_;
		gchar* _tmp3_;
		gchar* _tmp4_;
#line 253 "../lib/Services/Preferences.vala"
		_tmp2_ = self->priv->backing_file;
#line 253 "../lib/Services/Preferences.vala"
		_tmp3_ = g_file_get_path (_tmp2_);
#line 253 "../lib/Services/Preferences.vala"
		_tmp4_ = _tmp3_;
#line 253 "../lib/Services/Preferences.vala"
		_tmp0_ = _tmp4_ != NULL;
#line 253 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp4_);
#line 906 "Preferences.c"
	} else {
#line 253 "../lib/Services/Preferences.vala"
		_tmp0_ = FALSE;
#line 910 "Preferences.c"
	}
#line 253 "../lib/Services/Preferences.vala"
	if (_tmp0_) {
#line 914 "Preferences.c"
		GFile* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 254 "../lib/Services/Preferences.vala"
		_tmp5_ = self->priv->backing_file;
#line 254 "../lib/Services/Preferences.vala"
		_tmp6_ = g_file_get_path (_tmp5_);
#line 254 "../lib/Services/Preferences.vala"
		_tmp7_ = _tmp6_;
#line 254 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.apply('%s')", _tmp7_, NULL);
#line 254 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp7_);
#line 928 "Preferences.c"
	} else {
#line 256 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.apply()", NULL);
#line 932 "Preferences.c"
	}
#line 258 "../lib/Services/Preferences.vala"
	self->priv->is_delayed = FALSE;
#line 259 "../lib/Services/Preferences.vala"
	if (self->priv->is_changed) {
#line 938 "Preferences.c"
		GFile* _tmp9_;
#line 259 "../lib/Services/Preferences.vala"
		_tmp9_ = self->priv->backing_file;
#line 259 "../lib/Services/Preferences.vala"
		_tmp8_ = _tmp9_ != NULL;
#line 944 "Preferences.c"
	} else {
#line 259 "../lib/Services/Preferences.vala"
		_tmp8_ = FALSE;
#line 948 "Preferences.c"
	}
#line 259 "../lib/Services/Preferences.vala"
	if (_tmp8_) {
#line 260 "../lib/Services/Preferences.vala"
		plank_preferences_save_prefs (self);
#line 954 "Preferences.c"
	}
}

/**
 * Returns the filename of the backing file.
 *
 * @return the filename of the backing file
 */
gchar*
plank_preferences_get_filename (PlankPreferences* self)
{
	GFile* _tmp0_;
	GFile* _tmp2_;
	gchar* _tmp3_;
	gchar* result = NULL;
#line 268 "../lib/Services/Preferences.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 270 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_file;
#line 270 "../lib/Services/Preferences.vala"
	if (_tmp0_ == NULL) {
#line 976 "Preferences.c"
		gchar* _tmp1_;
#line 271 "../lib/Services/Preferences.vala"
		_tmp1_ = g_strdup ("");
#line 271 "../lib/Services/Preferences.vala"
		result = _tmp1_;
#line 271 "../lib/Services/Preferences.vala"
		return result;
#line 984 "Preferences.c"
	}
#line 272 "../lib/Services/Preferences.vala"
	_tmp2_ = self->priv->backing_file;
#line 272 "../lib/Services/Preferences.vala"
	_tmp3_ = g_file_get_basename (_tmp2_);
#line 272 "../lib/Services/Preferences.vala"
	result = _tmp3_;
#line 272 "../lib/Services/Preferences.vala"
	return result;
#line 994 "Preferences.c"
}

/**
 * Returns the backing file.
 *
 * @return the backing file
 */
GFile*
plank_preferences_get_backing_file (PlankPreferences* self)
{
	GFile* _tmp0_;
	GFile* result = NULL;
#line 280 "../lib/Services/Preferences.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 282 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_file;
#line 282 "../lib/Services/Preferences.vala"
	result = _tmp0_;
#line 282 "../lib/Services/Preferences.vala"
	return result;
#line 1015 "Preferences.c"
}

/**
 * This forces the deletion of the backing file for this preferences.
 */
void
plank_preferences_delete (PlankPreferences* self)
{
	GError* _inner_error0_ = NULL;
#line 288 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 290 "../lib/Services/Preferences.vala"
	if (self->priv->read_only) {
#line 291 "../lib/Services/Preferences.vala"
		return;
#line 1031 "Preferences.c"
	}
#line 293 "../lib/Services/Preferences.vala"
	self->priv->is_delayed = FALSE;
#line 294 "../lib/Services/Preferences.vala"
	self->priv->is_changed = FALSE;
#line 1037 "Preferences.c"
	{
		gchar* _tmp0_ = NULL;
		GFile* _tmp1_;
		gchar* _tmp2_;
		GFile* _tmp4_;
#line 297 "../lib/Services/Preferences.vala"
		_tmp1_ = self->priv->backing_file;
#line 297 "../lib/Services/Preferences.vala"
		_tmp2_ = g_file_get_path (_tmp1_);
#line 297 "../lib/Services/Preferences.vala"
		_tmp0_ = _tmp2_;
#line 297 "../lib/Services/Preferences.vala"
		if (_tmp0_ == NULL) {
#line 1051 "Preferences.c"
			gchar* _tmp3_;
#line 297 "../lib/Services/Preferences.vala"
			_tmp3_ = g_strdup ("");
#line 297 "../lib/Services/Preferences.vala"
			_g_free0 (_tmp0_);
#line 297 "../lib/Services/Preferences.vala"
			_tmp0_ = _tmp3_;
#line 1059 "Preferences.c"
		}
#line 297 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.delete ('%s')", _tmp0_, NULL);
#line 298 "../lib/Services/Preferences.vala"
		_tmp4_ = self->priv->backing_file;
#line 298 "../lib/Services/Preferences.vala"
		g_file_delete (_tmp4_, NULL, &_inner_error0_);
#line 298 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 298 "../lib/Services/Preferences.vala"
			_g_free0 (_tmp0_);
#line 1071 "Preferences.c"
			goto __catch0_g_error;
		}
#line 296 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp0_);
#line 1076 "Preferences.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		gchar* _tmp5_ = NULL;
		GFile* _tmp6_;
		gchar* _tmp7_;
		GError* _tmp9_;
		const gchar* _tmp10_;
#line 296 "../lib/Services/Preferences.vala"
		e = _inner_error0_;
#line 296 "../lib/Services/Preferences.vala"
		_inner_error0_ = NULL;
#line 300 "../lib/Services/Preferences.vala"
		_tmp6_ = self->priv->backing_file;
#line 300 "../lib/Services/Preferences.vala"
		_tmp7_ = g_file_get_path (_tmp6_);
#line 300 "../lib/Services/Preferences.vala"
		_tmp5_ = _tmp7_;
#line 300 "../lib/Services/Preferences.vala"
		if (_tmp5_ == NULL) {
#line 1099 "Preferences.c"
			gchar* _tmp8_;
#line 300 "../lib/Services/Preferences.vala"
			_tmp8_ = g_strdup ("");
#line 300 "../lib/Services/Preferences.vala"
			_g_free0 (_tmp5_);
#line 300 "../lib/Services/Preferences.vala"
			_tmp5_ = _tmp8_;
#line 1107 "Preferences.c"
		}
#line 300 "../lib/Services/Preferences.vala"
		g_warning ("Preferences.vala:300: Unable to delete the preferences file '%s'", _tmp5_);
#line 301 "../lib/Services/Preferences.vala"
		_tmp9_ = e;
#line 301 "../lib/Services/Preferences.vala"
		_tmp10_ = _tmp9_->message;
#line 301 "../lib/Services/Preferences.vala"
		g_debug ("Preferences.vala:301: %s", _tmp10_);
#line 296 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp5_);
#line 296 "../lib/Services/Preferences.vala"
		_g_error_free0 (e);
#line 1121 "Preferences.c"
	}
	__finally0:
#line 296 "../lib/Services/Preferences.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 296 "../lib/Services/Preferences.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 296 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 296 "../lib/Services/Preferences.vala"
		return;
#line 1132 "Preferences.c"
	}
}

static void
_plank_preferences_backing_file_changed_g_file_monitor_changed (GFileMonitor* _sender,
                                                                GFile* file,
                                                                GFile* other_file,
                                                                GFileMonitorEvent event_type,
                                                                gpointer self)
{
#line 310 "../lib/Services/Preferences.vala"
	plank_preferences_backing_file_changed (file, other_file, event_type, (PlankPreferences*) self);
#line 1145 "Preferences.c"
}

static void
plank_preferences_stop_monitor (PlankPreferences* self)
{
	GFileMonitor* _tmp0_;
	GFileMonitor* _tmp1_;
	guint _tmp2_;
	GFileMonitor* _tmp3_;
#line 305 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 307 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_monitor;
#line 307 "../lib/Services/Preferences.vala"
	if (_tmp0_ == NULL) {
#line 308 "../lib/Services/Preferences.vala"
		return;
#line 1163 "Preferences.c"
	}
#line 310 "../lib/Services/Preferences.vala"
	_tmp1_ = self->priv->backing_monitor;
#line 310 "../lib/Services/Preferences.vala"
	g_signal_parse_name ("changed", g_file_monitor_get_type (), &_tmp2_, NULL, FALSE);
#line 310 "../lib/Services/Preferences.vala"
	g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _plank_preferences_backing_file_changed_g_file_monitor_changed, self);
#line 311 "../lib/Services/Preferences.vala"
	_tmp3_ = self->priv->backing_monitor;
#line 311 "../lib/Services/Preferences.vala"
	g_file_monitor_cancel (_tmp3_);
#line 312 "../lib/Services/Preferences.vala"
	_g_object_unref0 (self->priv->backing_monitor);
#line 312 "../lib/Services/Preferences.vala"
	self->priv->backing_monitor = NULL;
#line 1179 "Preferences.c"
}

static void
plank_preferences_start_monitor (PlankPreferences* self)
{
	GFileMonitor* _tmp0_;
	GError* _inner_error0_ = NULL;
#line 315 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 317 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_monitor;
#line 317 "../lib/Services/Preferences.vala"
	if (_tmp0_ != NULL) {
#line 318 "../lib/Services/Preferences.vala"
		return;
#line 1195 "Preferences.c"
	}
	{
		GFileMonitor* _tmp1_ = NULL;
		GFile* _tmp2_;
		GFileMonitor* _tmp3_;
		GFileMonitor* _tmp4_;
		GFileMonitor* _tmp5_;
#line 321 "../lib/Services/Preferences.vala"
		_tmp2_ = self->priv->backing_file;
#line 321 "../lib/Services/Preferences.vala"
		_tmp3_ = g_file_monitor_file (_tmp2_, 0, NULL, &_inner_error0_);
#line 321 "../lib/Services/Preferences.vala"
		_tmp1_ = _tmp3_;
#line 321 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1211 "Preferences.c"
			goto __catch0_g_error;
		}
#line 321 "../lib/Services/Preferences.vala"
		_tmp4_ = _tmp1_;
#line 321 "../lib/Services/Preferences.vala"
		_tmp1_ = NULL;
#line 321 "../lib/Services/Preferences.vala"
		_g_object_unref0 (self->priv->backing_monitor);
#line 321 "../lib/Services/Preferences.vala"
		self->priv->backing_monitor = _tmp4_;
#line 322 "../lib/Services/Preferences.vala"
		_tmp5_ = self->priv->backing_monitor;
#line 322 "../lib/Services/Preferences.vala"
		g_signal_connect_object (_tmp5_, "changed", (GCallback) _plank_preferences_backing_file_changed_g_file_monitor_changed, self, 0);
#line 320 "../lib/Services/Preferences.vala"
		_g_object_unref0 (_tmp1_);
#line 1228 "Preferences.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		gchar* _tmp6_ = NULL;
		GFile* _tmp7_;
		gchar* _tmp8_;
		GError* _tmp10_;
		const gchar* _tmp11_;
#line 320 "../lib/Services/Preferences.vala"
		e = _inner_error0_;
#line 320 "../lib/Services/Preferences.vala"
		_inner_error0_ = NULL;
#line 324 "../lib/Services/Preferences.vala"
		_tmp7_ = self->priv->backing_file;
#line 324 "../lib/Services/Preferences.vala"
		_tmp8_ = g_file_get_path (_tmp7_);
#line 324 "../lib/Services/Preferences.vala"
		_tmp6_ = _tmp8_;
#line 324 "../lib/Services/Preferences.vala"
		if (_tmp6_ == NULL) {
#line 1251 "Preferences.c"
			gchar* _tmp9_;
#line 324 "../lib/Services/Preferences.vala"
			_tmp9_ = g_strdup ("");
#line 324 "../lib/Services/Preferences.vala"
			_g_free0 (_tmp6_);
#line 324 "../lib/Services/Preferences.vala"
			_tmp6_ = _tmp9_;
#line 1259 "Preferences.c"
		}
#line 324 "../lib/Services/Preferences.vala"
		g_critical ("Preferences.vala:324: Unable to watch the preferences file '%s'", _tmp6_);
#line 325 "../lib/Services/Preferences.vala"
		_tmp10_ = e;
#line 325 "../lib/Services/Preferences.vala"
		_tmp11_ = _tmp10_->message;
#line 325 "../lib/Services/Preferences.vala"
		g_debug ("Preferences.vala:325: %s", _tmp11_);
#line 320 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp6_);
#line 320 "../lib/Services/Preferences.vala"
		_g_error_free0 (e);
#line 1273 "Preferences.c"
	}
	__finally0:
#line 320 "../lib/Services/Preferences.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 320 "../lib/Services/Preferences.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 320 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 320 "../lib/Services/Preferences.vala"
		return;
#line 1284 "Preferences.c"
	}
}

static void
plank_preferences_backing_file_changed (GFile* f,
                                        GFile* other,
                                        GFileMonitorEvent event,
                                        PlankPreferences* self)
{
#line 330 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 330 "../lib/Services/Preferences.vala"
	g_return_if_fail (f != NULL);
#line 332 "../lib/Services/Preferences.vala"
	switch (event) {
#line 332 "../lib/Services/Preferences.vala"
		case G_FILE_MONITOR_EVENT_CHANGES_DONE_HINT:
#line 1302 "Preferences.c"
		{
#line 334 "../lib/Services/Preferences.vala"
			plank_preferences_load_prefs (self);
#line 335 "../lib/Services/Preferences.vala"
			break;
#line 1308 "Preferences.c"
		}
#line 332 "../lib/Services/Preferences.vala"
		case G_FILE_MONITOR_EVENT_DELETED:
#line 1312 "Preferences.c"
		{
#line 337 "../lib/Services/Preferences.vala"
			if (!g_file_query_exists (f, NULL)) {
#line 338 "../lib/Services/Preferences.vala"
				g_signal_emit (self, plank_preferences_signals[PLANK_PREFERENCES_DELETED_SIGNAL], 0);
#line 1318 "Preferences.c"
			}
#line 339 "../lib/Services/Preferences.vala"
			break;
#line 1322 "Preferences.c"
		}
		default:
		{
#line 341 "../lib/Services/Preferences.vala"
			break;
#line 1328 "Preferences.c"
		}
	}
}

static void
plank_preferences_load_prefs (PlankPreferences* self)
{
	gchar* _tmp0_ = NULL;
	GFile* _tmp1_;
	gchar* _tmp2_;
	gchar* backing_file_path = NULL;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	gboolean missing_keys = FALSE;
	guint _tmp6_;
	gboolean _tmp113_ = FALSE;
	GError* _inner_error0_ = NULL;
#line 345 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 347 "../lib/Services/Preferences.vala"
	_tmp1_ = self->priv->backing_file;
#line 347 "../lib/Services/Preferences.vala"
	_tmp2_ = g_file_get_path (_tmp1_);
#line 347 "../lib/Services/Preferences.vala"
	_tmp0_ = _tmp2_;
#line 347 "../lib/Services/Preferences.vala"
	if (_tmp0_ == NULL) {
#line 1356 "Preferences.c"
		gchar* _tmp3_;
#line 347 "../lib/Services/Preferences.vala"
		_tmp3_ = g_strdup ("");
#line 347 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp0_);
#line 347 "../lib/Services/Preferences.vala"
		_tmp0_ = _tmp3_;
#line 1364 "Preferences.c"
	}
#line 347 "../lib/Services/Preferences.vala"
	_tmp4_ = _tmp0_;
#line 347 "../lib/Services/Preferences.vala"
	_tmp0_ = NULL;
#line 347 "../lib/Services/Preferences.vala"
	backing_file_path = _tmp4_;
#line 349 "../lib/Services/Preferences.vala"
	_tmp5_ = backing_file_path;
#line 349 "../lib/Services/Preferences.vala"
	g_debug ("Preferences.vala:349: Loading preferences from file '%s'", _tmp5_);
#line 351 "../lib/Services/Preferences.vala"
	missing_keys = FALSE;
#line 353 "../lib/Services/Preferences.vala"
	g_signal_parse_name ("notify", G_TYPE_OBJECT, &_tmp6_, NULL, FALSE);
#line 353 "../lib/Services/Preferences.vala"
	g_signal_handlers_disconnect_matched ((GObject*) self, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp6_, 0, NULL, (GCallback) _plank_preferences_handle_notify_g_object_notify, self);
#line 354 "../lib/Services/Preferences.vala"
	g_object_freeze_notify ((GObject*) self);
#line 356 "../lib/Services/Preferences.vala"
	self->priv->is_delayed_internal = TRUE;
#line 1386 "Preferences.c"
	{
		GKeyFile* file = NULL;
		GKeyFile* _tmp7_;
		GKeyFile* _tmp8_;
		const gchar* _tmp9_;
		GParamSpec** properties = NULL;
		GObjectClass* _tmp10_;
		guint _tmp11_ = 0;
		GParamSpec** _tmp12_;
		gint properties_length1;
		gint _properties_size_;
		GParamSpec** _tmp13_;
		gint _tmp13__length1;
#line 358 "../lib/Services/Preferences.vala"
		_tmp7_ = g_key_file_new ();
#line 358 "../lib/Services/Preferences.vala"
		file = _tmp7_;
#line 359 "../lib/Services/Preferences.vala"
		_tmp8_ = file;
#line 359 "../lib/Services/Preferences.vala"
		_tmp9_ = backing_file_path;
#line 359 "../lib/Services/Preferences.vala"
		g_key_file_load_from_file (_tmp8_, _tmp9_, 0, &_inner_error0_);
#line 359 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 359 "../lib/Services/Preferences.vala"
			_g_key_file_unref0 (file);
#line 1414 "Preferences.c"
			goto __catch0_g_error;
		}
#line 361 "../lib/Services/Preferences.vala"
		_tmp10_ = G_OBJECT_GET_CLASS ((GObject*) self);
#line 361 "../lib/Services/Preferences.vala"
		_tmp12_ = g_object_class_list_properties (_tmp10_, &_tmp11_);
#line 361 "../lib/Services/Preferences.vala"
		properties = _tmp12_;
#line 361 "../lib/Services/Preferences.vala"
		properties_length1 = _tmp11_;
#line 361 "../lib/Services/Preferences.vala"
		_properties_size_ = properties_length1;
#line 363 "../lib/Services/Preferences.vala"
		_tmp13_ = properties;
#line 363 "../lib/Services/Preferences.vala"
		_tmp13__length1 = properties_length1;
#line 1431 "Preferences.c"
		{
			GParamSpec** prop_collection = NULL;
			gint prop_collection_length1 = 0;
			gint _prop_collection_size_ = 0;
			gint prop_it = 0;
#line 363 "../lib/Services/Preferences.vala"
			prop_collection = _tmp13_;
#line 363 "../lib/Services/Preferences.vala"
			prop_collection_length1 = _tmp13__length1;
#line 363 "../lib/Services/Preferences.vala"
			for (prop_it = 0; prop_it < prop_collection_length1; prop_it = prop_it + 1) {
#line 1443 "Preferences.c"
				GParamSpec* prop = NULL;
#line 363 "../lib/Services/Preferences.vala"
				prop = prop_collection[prop_it];
#line 1447 "Preferences.c"
				{
					const gchar* group_name = NULL;
					GParamSpec* _tmp14_;
					const gchar* _tmp15_;
					const gchar* prop_name = NULL;
					GParamSpec* _tmp16_;
					const gchar* _tmp17_;
					GKeyFile* _tmp18_;
					const gchar* _tmp19_;
					gboolean _tmp27_ = FALSE;
					GKeyFile* _tmp28_;
					const gchar* _tmp29_;
					GType type = 0UL;
					GParamSpec* _tmp37_;
#line 364 "../lib/Services/Preferences.vala"
					_tmp14_ = prop;
#line 364 "../lib/Services/Preferences.vala"
					_tmp15_ = g_type_name (_tmp14_->owner_type);
#line 364 "../lib/Services/Preferences.vala"
					group_name = _tmp15_;
#line 365 "../lib/Services/Preferences.vala"
					_tmp16_ = prop;
#line 365 "../lib/Services/Preferences.vala"
					_tmp17_ = g_param_spec_get_name (_tmp16_);
#line 365 "../lib/Services/Preferences.vala"
					prop_name = _tmp17_;
#line 367 "../lib/Services/Preferences.vala"
					_tmp18_ = file;
#line 367 "../lib/Services/Preferences.vala"
					_tmp19_ = group_name;
#line 367 "../lib/Services/Preferences.vala"
					if (!g_key_file_has_group (_tmp18_, _tmp19_)) {
#line 1480 "Preferences.c"
						{
							gint i = 0;
#line 369 "../lib/Services/Preferences.vala"
							i = 0;
#line 1485 "Preferences.c"
							{
								gboolean _tmp20_ = FALSE;
#line 369 "../lib/Services/Preferences.vala"
								_tmp20_ = TRUE;
#line 369 "../lib/Services/Preferences.vala"
								while (TRUE) {
#line 1492 "Preferences.c"
									gchar** _tmp22_;
									gint _tmp22__length1;
									gint _tmp22__length2;
									const gchar* _tmp23_;
									const gchar* _tmp24_;
#line 369 "../lib/Services/Preferences.vala"
									if (!_tmp20_) {
#line 1500 "Preferences.c"
										gint _tmp21_;
#line 369 "../lib/Services/Preferences.vala"
										_tmp21_ = i;
#line 369 "../lib/Services/Preferences.vala"
										i = _tmp21_ + 1;
#line 1506 "Preferences.c"
									}
#line 369 "../lib/Services/Preferences.vala"
									_tmp20_ = FALSE;
#line 369 "../lib/Services/Preferences.vala"
									if (!(i < 3)) {
#line 369 "../lib/Services/Preferences.vala"
										break;
#line 1514 "Preferences.c"
									}
#line 370 "../lib/Services/Preferences.vala"
									_tmp22_ = plank_preferences_TRANSITION_MAP;
#line 370 "../lib/Services/Preferences.vala"
									_tmp22__length1 = plank_preferences_TRANSITION_MAP_length1;
#line 370 "../lib/Services/Preferences.vala"
									_tmp22__length2 = plank_preferences_TRANSITION_MAP_length2;
#line 370 "../lib/Services/Preferences.vala"
									_tmp23_ = _tmp22_[(i * _tmp22__length2) + 1];
#line 370 "../lib/Services/Preferences.vala"
									_tmp24_ = group_name;
#line 370 "../lib/Services/Preferences.vala"
									if (g_strcmp0 (_tmp23_, _tmp24_) == 0) {
#line 1528 "Preferences.c"
										gchar** _tmp25_;
										gint _tmp25__length1;
										gint _tmp25__length2;
										const gchar* _tmp26_;
#line 371 "../lib/Services/Preferences.vala"
										_tmp25_ = plank_preferences_TRANSITION_MAP;
#line 371 "../lib/Services/Preferences.vala"
										_tmp25__length1 = plank_preferences_TRANSITION_MAP_length1;
#line 371 "../lib/Services/Preferences.vala"
										_tmp25__length2 = plank_preferences_TRANSITION_MAP_length2;
#line 371 "../lib/Services/Preferences.vala"
										_tmp26_ = _tmp25_[(i * _tmp25__length2) + 0];
#line 371 "../lib/Services/Preferences.vala"
										group_name = _tmp26_;
#line 372 "../lib/Services/Preferences.vala"
										missing_keys = TRUE;
#line 373 "../lib/Services/Preferences.vala"
										break;
#line 1547 "Preferences.c"
									}
								}
							}
						}
					}
#line 377 "../lib/Services/Preferences.vala"
					_tmp28_ = file;
#line 377 "../lib/Services/Preferences.vala"
					_tmp29_ = group_name;
#line 377 "../lib/Services/Preferences.vala"
					if (!g_key_file_has_group (_tmp28_, _tmp29_)) {
#line 377 "../lib/Services/Preferences.vala"
						_tmp27_ = TRUE;
#line 1561 "Preferences.c"
					} else {
						gboolean _tmp30_ = FALSE;
						GKeyFile* _tmp31_;
						const gchar* _tmp32_;
						const gchar* _tmp33_;
#line 377 "../lib/Services/Preferences.vala"
						_tmp31_ = file;
#line 377 "../lib/Services/Preferences.vala"
						_tmp32_ = group_name;
#line 377 "../lib/Services/Preferences.vala"
						_tmp33_ = prop_name;
#line 377 "../lib/Services/Preferences.vala"
						_tmp30_ = g_key_file_has_key (_tmp31_, _tmp32_, _tmp33_, &_inner_error0_);
#line 377 "../lib/Services/Preferences.vala"
						if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 377 "../lib/Services/Preferences.vala"
							properties = (g_free (properties), NULL);
#line 377 "../lib/Services/Preferences.vala"
							_g_key_file_unref0 (file);
#line 1581 "Preferences.c"
							goto __catch0_g_error;
						}
#line 377 "../lib/Services/Preferences.vala"
						_tmp27_ = !_tmp30_;
#line 1586 "Preferences.c"
					}
#line 377 "../lib/Services/Preferences.vala"
					if (_tmp27_) {
#line 1590 "Preferences.c"
						const gchar* _tmp34_;
						const gchar* _tmp35_;
						const gchar* _tmp36_;
#line 378 "../lib/Services/Preferences.vala"
						_tmp34_ = prop_name;
#line 378 "../lib/Services/Preferences.vala"
						_tmp35_ = group_name;
#line 378 "../lib/Services/Preferences.vala"
						_tmp36_ = backing_file_path;
#line 378 "../lib/Services/Preferences.vala"
						g_warning ("Preferences.vala:378: Missing key '%s' for group '%s' in preferences f" \
"ile '%s' - using default value", _tmp34_, _tmp35_, _tmp36_);
#line 379 "../lib/Services/Preferences.vala"
						missing_keys = TRUE;
#line 380 "../lib/Services/Preferences.vala"
						continue;
#line 1606 "Preferences.c"
					}
#line 383 "../lib/Services/Preferences.vala"
					_tmp37_ = prop;
#line 383 "../lib/Services/Preferences.vala"
					type = _tmp37_->value_type;
#line 1612 "Preferences.c"
					{
						const gchar* _tmp105_;
#line 386 "../lib/Services/Preferences.vala"
						if (type == G_TYPE_INT) {
#line 1617 "Preferences.c"
							gint old_val = 0;
							const gchar* _tmp38_;
							gint _tmp39_ = 0;
							gint new_val = 0;
							GKeyFile* _tmp40_;
							const gchar* _tmp41_;
							const gchar* _tmp42_;
							const gchar* _tmp43_;
#line 388 "../lib/Services/Preferences.vala"
							_tmp38_ = prop_name;
#line 388 "../lib/Services/Preferences.vala"
							g_object_get ((GObject*) self, _tmp38_, &_tmp39_, NULL);
#line 388 "../lib/Services/Preferences.vala"
							old_val = _tmp39_;
#line 389 "../lib/Services/Preferences.vala"
							_tmp40_ = file;
#line 389 "../lib/Services/Preferences.vala"
							_tmp41_ = group_name;
#line 389 "../lib/Services/Preferences.vala"
							_tmp42_ = prop_name;
#line 389 "../lib/Services/Preferences.vala"
							new_val = g_key_file_get_integer (_tmp40_, _tmp41_, _tmp42_, &_inner_error0_);
#line 389 "../lib/Services/Preferences.vala"
							if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 389 "../lib/Services/Preferences.vala"
								if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1644 "Preferences.c"
									goto __catch1_g_key_file_error;
								}
#line 389 "../lib/Services/Preferences.vala"
								properties = (g_free (properties), NULL);
#line 389 "../lib/Services/Preferences.vala"
								_g_key_file_unref0 (file);
#line 389 "../lib/Services/Preferences.vala"
								_g_free0 (backing_file_path);
#line 389 "../lib/Services/Preferences.vala"
								_g_free0 (_tmp0_);
#line 389 "../lib/Services/Preferences.vala"
								g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 389 "../lib/Services/Preferences.vala"
								g_clear_error (&_inner_error0_);
#line 389 "../lib/Services/Preferences.vala"
								return;
#line 1661 "Preferences.c"
							}
#line 390 "../lib/Services/Preferences.vala"
							if (old_val == new_val) {
#line 391 "../lib/Services/Preferences.vala"
								continue;
#line 1667 "Preferences.c"
							}
#line 392 "../lib/Services/Preferences.vala"
							_tmp43_ = prop_name;
#line 392 "../lib/Services/Preferences.vala"
							g_object_set ((GObject*) self, _tmp43_, new_val, NULL);
#line 1673 "Preferences.c"
						} else {
#line 393 "../lib/Services/Preferences.vala"
							if (type == G_TYPE_UINT) {
#line 1677 "Preferences.c"
								guint old_val = 0U;
								const gchar* _tmp44_;
								guint _tmp45_ = 0U;
								gint _tmp46_ = 0;
								GKeyFile* _tmp47_;
								const gchar* _tmp48_;
								const gchar* _tmp49_;
								guint new_val = 0U;
								const gchar* _tmp50_;
#line 395 "../lib/Services/Preferences.vala"
								_tmp44_ = prop_name;
#line 395 "../lib/Services/Preferences.vala"
								g_object_get ((GObject*) self, _tmp44_, &_tmp45_, NULL);
#line 395 "../lib/Services/Preferences.vala"
								old_val = _tmp45_;
#line 396 "../lib/Services/Preferences.vala"
								_tmp47_ = file;
#line 396 "../lib/Services/Preferences.vala"
								_tmp48_ = group_name;
#line 396 "../lib/Services/Preferences.vala"
								_tmp49_ = prop_name;
#line 396 "../lib/Services/Preferences.vala"
								_tmp46_ = g_key_file_get_integer (_tmp47_, _tmp48_, _tmp49_, &_inner_error0_);
#line 396 "../lib/Services/Preferences.vala"
								if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 396 "../lib/Services/Preferences.vala"
									if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1705 "Preferences.c"
										goto __catch1_g_key_file_error;
									}
#line 396 "../lib/Services/Preferences.vala"
									properties = (g_free (properties), NULL);
#line 396 "../lib/Services/Preferences.vala"
									_g_key_file_unref0 (file);
#line 396 "../lib/Services/Preferences.vala"
									_g_free0 (backing_file_path);
#line 396 "../lib/Services/Preferences.vala"
									_g_free0 (_tmp0_);
#line 396 "../lib/Services/Preferences.vala"
									g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 396 "../lib/Services/Preferences.vala"
									g_clear_error (&_inner_error0_);
#line 396 "../lib/Services/Preferences.vala"
									return;
#line 1722 "Preferences.c"
								}
#line 396 "../lib/Services/Preferences.vala"
								new_val = (guint) _tmp46_;
#line 397 "../lib/Services/Preferences.vala"
								if (old_val == new_val) {
#line 398 "../lib/Services/Preferences.vala"
									continue;
#line 1730 "Preferences.c"
								}
#line 399 "../lib/Services/Preferences.vala"
								_tmp50_ = prop_name;
#line 399 "../lib/Services/Preferences.vala"
								g_object_set ((GObject*) self, _tmp50_, new_val, NULL);
#line 1736 "Preferences.c"
							} else {
#line 400 "../lib/Services/Preferences.vala"
								if (type == G_TYPE_DOUBLE) {
#line 1740 "Preferences.c"
									gdouble old_val = 0.0;
									const gchar* _tmp51_;
									gdouble _tmp52_ = 0.0;
									gdouble new_val = 0.0;
									GKeyFile* _tmp53_;
									const gchar* _tmp54_;
									const gchar* _tmp55_;
									const gchar* _tmp56_;
#line 402 "../lib/Services/Preferences.vala"
									_tmp51_ = prop_name;
#line 402 "../lib/Services/Preferences.vala"
									g_object_get ((GObject*) self, _tmp51_, &_tmp52_, NULL);
#line 402 "../lib/Services/Preferences.vala"
									old_val = _tmp52_;
#line 403 "../lib/Services/Preferences.vala"
									_tmp53_ = file;
#line 403 "../lib/Services/Preferences.vala"
									_tmp54_ = group_name;
#line 403 "../lib/Services/Preferences.vala"
									_tmp55_ = prop_name;
#line 403 "../lib/Services/Preferences.vala"
									new_val = g_key_file_get_double (_tmp53_, _tmp54_, _tmp55_, &_inner_error0_);
#line 403 "../lib/Services/Preferences.vala"
									if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 403 "../lib/Services/Preferences.vala"
										if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1767 "Preferences.c"
											goto __catch1_g_key_file_error;
										}
#line 403 "../lib/Services/Preferences.vala"
										properties = (g_free (properties), NULL);
#line 403 "../lib/Services/Preferences.vala"
										_g_key_file_unref0 (file);
#line 403 "../lib/Services/Preferences.vala"
										_g_free0 (backing_file_path);
#line 403 "../lib/Services/Preferences.vala"
										_g_free0 (_tmp0_);
#line 403 "../lib/Services/Preferences.vala"
										g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 403 "../lib/Services/Preferences.vala"
										g_clear_error (&_inner_error0_);
#line 403 "../lib/Services/Preferences.vala"
										return;
#line 1784 "Preferences.c"
									}
#line 404 "../lib/Services/Preferences.vala"
									if (old_val == new_val) {
#line 405 "../lib/Services/Preferences.vala"
										continue;
#line 1790 "Preferences.c"
									}
#line 406 "../lib/Services/Preferences.vala"
									_tmp56_ = prop_name;
#line 406 "../lib/Services/Preferences.vala"
									g_object_set ((GObject*) self, _tmp56_, new_val, NULL);
#line 1796 "Preferences.c"
								} else {
#line 407 "../lib/Services/Preferences.vala"
									if (type == G_TYPE_STRING) {
#line 1800 "Preferences.c"
										gchar* old_val = NULL;
										const gchar* _tmp57_;
										gchar* _tmp58_ = NULL;
										gchar* new_val = NULL;
										GKeyFile* _tmp59_;
										const gchar* _tmp60_;
										const gchar* _tmp61_;
										gchar* _tmp62_;
										const gchar* _tmp63_;
										const gchar* _tmp64_;
										const gchar* _tmp65_;
										const gchar* _tmp66_;
#line 409 "../lib/Services/Preferences.vala"
										_tmp57_ = prop_name;
#line 409 "../lib/Services/Preferences.vala"
										g_object_get ((GObject*) self, _tmp57_, &_tmp58_, NULL);
#line 409 "../lib/Services/Preferences.vala"
										_g_free0 (old_val);
#line 409 "../lib/Services/Preferences.vala"
										old_val = _tmp58_;
#line 410 "../lib/Services/Preferences.vala"
										_tmp59_ = file;
#line 410 "../lib/Services/Preferences.vala"
										_tmp60_ = group_name;
#line 410 "../lib/Services/Preferences.vala"
										_tmp61_ = prop_name;
#line 410 "../lib/Services/Preferences.vala"
										_tmp62_ = g_key_file_get_string (_tmp59_, _tmp60_, _tmp61_, &_inner_error0_);
#line 410 "../lib/Services/Preferences.vala"
										new_val = _tmp62_;
#line 410 "../lib/Services/Preferences.vala"
										if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 410 "../lib/Services/Preferences.vala"
											_g_free0 (old_val);
#line 410 "../lib/Services/Preferences.vala"
											if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1837 "Preferences.c"
												goto __catch1_g_key_file_error;
											}
#line 410 "../lib/Services/Preferences.vala"
											properties = (g_free (properties), NULL);
#line 410 "../lib/Services/Preferences.vala"
											_g_key_file_unref0 (file);
#line 410 "../lib/Services/Preferences.vala"
											_g_free0 (backing_file_path);
#line 410 "../lib/Services/Preferences.vala"
											_g_free0 (_tmp0_);
#line 410 "../lib/Services/Preferences.vala"
											g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 410 "../lib/Services/Preferences.vala"
											g_clear_error (&_inner_error0_);
#line 410 "../lib/Services/Preferences.vala"
											return;
#line 1854 "Preferences.c"
										}
#line 411 "../lib/Services/Preferences.vala"
										_tmp63_ = old_val;
#line 411 "../lib/Services/Preferences.vala"
										_tmp64_ = new_val;
#line 411 "../lib/Services/Preferences.vala"
										if (g_strcmp0 (_tmp63_, _tmp64_) == 0) {
#line 412 "../lib/Services/Preferences.vala"
											_g_free0 (new_val);
#line 412 "../lib/Services/Preferences.vala"
											_g_free0 (old_val);
#line 412 "../lib/Services/Preferences.vala"
											continue;
#line 1868 "Preferences.c"
										}
#line 413 "../lib/Services/Preferences.vala"
										_tmp65_ = prop_name;
#line 413 "../lib/Services/Preferences.vala"
										_tmp66_ = new_val;
#line 413 "../lib/Services/Preferences.vala"
										g_object_set ((GObject*) self, _tmp65_, _tmp66_, NULL);
#line 407 "../lib/Services/Preferences.vala"
										_g_free0 (new_val);
#line 407 "../lib/Services/Preferences.vala"
										_g_free0 (old_val);
#line 1880 "Preferences.c"
									} else {
#line 414 "../lib/Services/Preferences.vala"
										if (type == G_TYPE_BOOLEAN) {
#line 1884 "Preferences.c"
											gboolean old_val = FALSE;
											const gchar* _tmp67_;
											gboolean _tmp68_ = FALSE;
											gboolean new_val = FALSE;
											GKeyFile* _tmp69_;
											const gchar* _tmp70_;
											const gchar* _tmp71_;
											const gchar* _tmp72_;
#line 416 "../lib/Services/Preferences.vala"
											_tmp67_ = prop_name;
#line 416 "../lib/Services/Preferences.vala"
											g_object_get ((GObject*) self, _tmp67_, &_tmp68_, NULL);
#line 416 "../lib/Services/Preferences.vala"
											old_val = _tmp68_;
#line 417 "../lib/Services/Preferences.vala"
											_tmp69_ = file;
#line 417 "../lib/Services/Preferences.vala"
											_tmp70_ = group_name;
#line 417 "../lib/Services/Preferences.vala"
											_tmp71_ = prop_name;
#line 417 "../lib/Services/Preferences.vala"
											new_val = g_key_file_get_boolean (_tmp69_, _tmp70_, _tmp71_, &_inner_error0_);
#line 417 "../lib/Services/Preferences.vala"
											if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 417 "../lib/Services/Preferences.vala"
												if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1911 "Preferences.c"
													goto __catch1_g_key_file_error;
												}
#line 417 "../lib/Services/Preferences.vala"
												properties = (g_free (properties), NULL);
#line 417 "../lib/Services/Preferences.vala"
												_g_key_file_unref0 (file);
#line 417 "../lib/Services/Preferences.vala"
												_g_free0 (backing_file_path);
#line 417 "../lib/Services/Preferences.vala"
												_g_free0 (_tmp0_);
#line 417 "../lib/Services/Preferences.vala"
												g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 417 "../lib/Services/Preferences.vala"
												g_clear_error (&_inner_error0_);
#line 417 "../lib/Services/Preferences.vala"
												return;
#line 1928 "Preferences.c"
											}
#line 418 "../lib/Services/Preferences.vala"
											if (old_val == new_val) {
#line 419 "../lib/Services/Preferences.vala"
												continue;
#line 1934 "Preferences.c"
											}
#line 420 "../lib/Services/Preferences.vala"
											_tmp72_ = prop_name;
#line 420 "../lib/Services/Preferences.vala"
											g_object_set ((GObject*) self, _tmp72_, new_val, NULL);
#line 1940 "Preferences.c"
										} else {
#line 421 "../lib/Services/Preferences.vala"
											if (G_TYPE_IS_ENUM (type)) {
#line 1944 "Preferences.c"
												gint old_val = 0;
												const gchar* _tmp73_;
												gint _tmp74_ = 0;
												gint new_val = 0;
												GKeyFile* _tmp75_;
												const gchar* _tmp76_;
												const gchar* _tmp77_;
												const gchar* _tmp78_;
#line 423 "../lib/Services/Preferences.vala"
												_tmp73_ = prop_name;
#line 423 "../lib/Services/Preferences.vala"
												g_object_get ((GObject*) self, _tmp73_, &_tmp74_, NULL);
#line 423 "../lib/Services/Preferences.vala"
												old_val = _tmp74_;
#line 424 "../lib/Services/Preferences.vala"
												_tmp75_ = file;
#line 424 "../lib/Services/Preferences.vala"
												_tmp76_ = group_name;
#line 424 "../lib/Services/Preferences.vala"
												_tmp77_ = prop_name;
#line 424 "../lib/Services/Preferences.vala"
												new_val = g_key_file_get_integer (_tmp75_, _tmp76_, _tmp77_, &_inner_error0_);
#line 424 "../lib/Services/Preferences.vala"
												if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 424 "../lib/Services/Preferences.vala"
													if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1971 "Preferences.c"
														goto __catch1_g_key_file_error;
													}
#line 424 "../lib/Services/Preferences.vala"
													properties = (g_free (properties), NULL);
#line 424 "../lib/Services/Preferences.vala"
													_g_key_file_unref0 (file);
#line 424 "../lib/Services/Preferences.vala"
													_g_free0 (backing_file_path);
#line 424 "../lib/Services/Preferences.vala"
													_g_free0 (_tmp0_);
#line 424 "../lib/Services/Preferences.vala"
													g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 424 "../lib/Services/Preferences.vala"
													g_clear_error (&_inner_error0_);
#line 424 "../lib/Services/Preferences.vala"
													return;
#line 1988 "Preferences.c"
												}
#line 425 "../lib/Services/Preferences.vala"
												if (old_val == new_val) {
#line 426 "../lib/Services/Preferences.vala"
													continue;
#line 1994 "Preferences.c"
												}
#line 427 "../lib/Services/Preferences.vala"
												_tmp78_ = prop_name;
#line 427 "../lib/Services/Preferences.vala"
												g_object_set ((GObject*) self, _tmp78_, new_val, NULL);
#line 2000 "Preferences.c"
											} else {
												gboolean _tmp79_ = FALSE;
#line 428 "../lib/Services/Preferences.vala"
												if (g_type_is_a (type, PLANK_TYPE_COLOR)) {
#line 428 "../lib/Services/Preferences.vala"
													_tmp79_ = TRUE;
#line 2007 "Preferences.c"
												} else {
#line 428 "../lib/Services/Preferences.vala"
													_tmp79_ = g_type_is_a (type, gdk_rgba_get_type ());
#line 2011 "Preferences.c"
												}
#line 428 "../lib/Services/Preferences.vala"
												if (_tmp79_) {
#line 2015 "Preferences.c"
													GValue val = {0};
													GValue _tmp80_ = {0};
													const gchar* _tmp81_;
													PlankColor* old_val = NULL;
													void* _tmp82_;
													gchar* old_val_string = NULL;
													gchar* _tmp83_;
													gchar* new_val_string = NULL;
													GKeyFile* _tmp84_;
													const gchar* _tmp85_;
													const gchar* _tmp86_;
													gchar* _tmp87_;
													const gchar* _tmp88_;
													const gchar* _tmp89_;
													PlankColor new_val = {0};
													const gchar* _tmp90_;
													PlankColor _tmp91_ = {0};
													const gchar* _tmp92_;
													GValue _tmp93_;
#line 429 "../lib/Services/Preferences.vala"
													g_value_init (&_tmp80_, type);
#line 429 "../lib/Services/Preferences.vala"
													val = _tmp80_;
#line 430 "../lib/Services/Preferences.vala"
													_tmp81_ = prop_name;
#line 430 "../lib/Services/Preferences.vala"
													g_object_get_property ((GObject*) self, _tmp81_, &val);
#line 431 "../lib/Services/Preferences.vala"
													_tmp82_ = g_value_get_boxed (&val);
#line 431 "../lib/Services/Preferences.vala"
													old_val = _tmp82_;
#line 432 "../lib/Services/Preferences.vala"
													_tmp83_ = plank_color_to_prefs_string (old_val);
#line 432 "../lib/Services/Preferences.vala"
													old_val_string = _tmp83_;
#line 433 "../lib/Services/Preferences.vala"
													_tmp84_ = file;
#line 433 "../lib/Services/Preferences.vala"
													_tmp85_ = group_name;
#line 433 "../lib/Services/Preferences.vala"
													_tmp86_ = prop_name;
#line 433 "../lib/Services/Preferences.vala"
													_tmp87_ = g_key_file_get_string (_tmp84_, _tmp85_, _tmp86_, &_inner_error0_);
#line 433 "../lib/Services/Preferences.vala"
													new_val_string = _tmp87_;
#line 433 "../lib/Services/Preferences.vala"
													if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 433 "../lib/Services/Preferences.vala"
														_g_free0 (old_val_string);
#line 433 "../lib/Services/Preferences.vala"
														G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 433 "../lib/Services/Preferences.vala"
														if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 2069 "Preferences.c"
															goto __catch1_g_key_file_error;
														}
#line 433 "../lib/Services/Preferences.vala"
														properties = (g_free (properties), NULL);
#line 433 "../lib/Services/Preferences.vala"
														_g_key_file_unref0 (file);
#line 433 "../lib/Services/Preferences.vala"
														_g_free0 (backing_file_path);
#line 433 "../lib/Services/Preferences.vala"
														_g_free0 (_tmp0_);
#line 433 "../lib/Services/Preferences.vala"
														g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 433 "../lib/Services/Preferences.vala"
														g_clear_error (&_inner_error0_);
#line 433 "../lib/Services/Preferences.vala"
														return;
#line 2086 "Preferences.c"
													}
#line 434 "../lib/Services/Preferences.vala"
													_tmp88_ = old_val_string;
#line 434 "../lib/Services/Preferences.vala"
													_tmp89_ = new_val_string;
#line 434 "../lib/Services/Preferences.vala"
													if (g_strcmp0 (_tmp88_, _tmp89_) == 0) {
#line 435 "../lib/Services/Preferences.vala"
														_g_free0 (new_val_string);
#line 435 "../lib/Services/Preferences.vala"
														_g_free0 (old_val_string);
#line 435 "../lib/Services/Preferences.vala"
														G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 435 "../lib/Services/Preferences.vala"
														continue;
#line 2102 "Preferences.c"
													}
#line 436 "../lib/Services/Preferences.vala"
													_tmp90_ = new_val_string;
#line 436 "../lib/Services/Preferences.vala"
													plank_color_from_prefs_string (_tmp90_, &_tmp91_);
#line 436 "../lib/Services/Preferences.vala"
													new_val = _tmp91_;
#line 437 "../lib/Services/Preferences.vala"
													g_value_set_boxed (&val, &new_val);
#line 438 "../lib/Services/Preferences.vala"
													_tmp92_ = prop_name;
#line 438 "../lib/Services/Preferences.vala"
													_tmp93_ = val;
#line 438 "../lib/Services/Preferences.vala"
													g_object_set_property ((GObject*) self, _tmp92_, &_tmp93_);
#line 428 "../lib/Services/Preferences.vala"
													_g_free0 (new_val_string);
#line 428 "../lib/Services/Preferences.vala"
													_g_free0 (old_val_string);
#line 428 "../lib/Services/Preferences.vala"
													G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 2124 "Preferences.c"
												} else {
#line 439 "../lib/Services/Preferences.vala"
													if (g_type_is_a (type, PLANK_TYPE_SERIALIZABLE)) {
#line 2128 "Preferences.c"
														PlankSerializable* val = NULL;
														const gchar* _tmp94_;
														PlankSerializable* _tmp95_ = NULL;
														gchar* _tmp96_ = NULL;
														GKeyFile* _tmp97_;
														const gchar* _tmp98_;
														const gchar* _tmp99_;
														gchar* _tmp100_;
														PlankSerializable* _tmp101_;
#line 441 "../lib/Services/Preferences.vala"
														_tmp94_ = prop_name;
#line 441 "../lib/Services/Preferences.vala"
														g_object_get ((GObject*) self, _tmp94_, &_tmp95_, NULL);
#line 441 "../lib/Services/Preferences.vala"
														_g_object_unref0 (val);
#line 441 "../lib/Services/Preferences.vala"
														val = _tmp95_;
#line 442 "../lib/Services/Preferences.vala"
														_tmp97_ = file;
#line 442 "../lib/Services/Preferences.vala"
														_tmp98_ = group_name;
#line 442 "../lib/Services/Preferences.vala"
														_tmp99_ = prop_name;
#line 442 "../lib/Services/Preferences.vala"
														_tmp100_ = g_key_file_get_string (_tmp97_, _tmp98_, _tmp99_, &_inner_error0_);
#line 442 "../lib/Services/Preferences.vala"
														_tmp96_ = _tmp100_;
#line 442 "../lib/Services/Preferences.vala"
														if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 442 "../lib/Services/Preferences.vala"
															_g_object_unref0 (val);
#line 442 "../lib/Services/Preferences.vala"
															if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 2162 "Preferences.c"
																goto __catch1_g_key_file_error;
															}
#line 442 "../lib/Services/Preferences.vala"
															properties = (g_free (properties), NULL);
#line 442 "../lib/Services/Preferences.vala"
															_g_key_file_unref0 (file);
#line 442 "../lib/Services/Preferences.vala"
															_g_free0 (backing_file_path);
#line 442 "../lib/Services/Preferences.vala"
															_g_free0 (_tmp0_);
#line 442 "../lib/Services/Preferences.vala"
															g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 442 "../lib/Services/Preferences.vala"
															g_clear_error (&_inner_error0_);
#line 442 "../lib/Services/Preferences.vala"
															return;
#line 2179 "Preferences.c"
														}
#line 442 "../lib/Services/Preferences.vala"
														_tmp101_ = val;
#line 442 "../lib/Services/Preferences.vala"
														plank_serializable_deserialize (_tmp101_, _tmp96_);
#line 443 "../lib/Services/Preferences.vala"
														_g_free0 (_tmp96_);
#line 443 "../lib/Services/Preferences.vala"
														_g_object_unref0 (val);
#line 443 "../lib/Services/Preferences.vala"
														continue;
#line 2191 "Preferences.c"
													} else {
														const gchar* _tmp102_;
														const gchar* _tmp103_;
														const gchar* _tmp104_;
#line 445 "../lib/Services/Preferences.vala"
														_tmp102_ = g_type_name (type);
#line 445 "../lib/Services/Preferences.vala"
														_tmp103_ = prop_name;
#line 445 "../lib/Services/Preferences.vala"
														_tmp104_ = backing_file_path;
#line 445 "../lib/Services/Preferences.vala"
														g_debug ("Preferences.vala:445: Unsupported preferences type '%s' for property '" \
"%s' in file '%s'", _tmp102_, _tmp103_, _tmp104_);
#line 446 "../lib/Services/Preferences.vala"
														continue;
#line 2206 "Preferences.c"
													}
												}
											}
										}
									}
								}
							}
						}
#line 449 "../lib/Services/Preferences.vala"
						_tmp105_ = prop_name;
#line 449 "../lib/Services/Preferences.vala"
						plank_preferences_call_verify (self, _tmp105_);
#line 2219 "Preferences.c"
					}
					goto __finally1;
					__catch1_g_key_file_error:
					{
						GError* e = NULL;
						const gchar* _tmp106_;
						const gchar* _tmp107_;
						GError* _tmp108_;
						const gchar* _tmp109_;
#line 385 "../lib/Services/Preferences.vala"
						e = _inner_error0_;
#line 385 "../lib/Services/Preferences.vala"
						_inner_error0_ = NULL;
#line 451 "../lib/Services/Preferences.vala"
						_tmp106_ = backing_file_path;
#line 451 "../lib/Services/Preferences.vala"
						_tmp107_ = prop_name;
#line 451 "../lib/Services/Preferences.vala"
						g_warning ("Preferences.vala:451: Problem loading preferences from file '%s' for p" \
"roperty '%s'", _tmp106_, _tmp107_);
#line 452 "../lib/Services/Preferences.vala"
						_tmp108_ = e;
#line 452 "../lib/Services/Preferences.vala"
						_tmp109_ = _tmp108_->message;
#line 452 "../lib/Services/Preferences.vala"
						g_debug ("Preferences.vala:452: %s", _tmp109_);
#line 385 "../lib/Services/Preferences.vala"
						_g_error_free0 (e);
#line 2247 "Preferences.c"
					}
					__finally1:
#line 385 "../lib/Services/Preferences.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 385 "../lib/Services/Preferences.vala"
						properties = (g_free (properties), NULL);
#line 385 "../lib/Services/Preferences.vala"
						_g_key_file_unref0 (file);
#line 2256 "Preferences.c"
						goto __catch0_g_error;
					}
				}
			}
		}
#line 357 "../lib/Services/Preferences.vala"
		properties = (g_free (properties), NULL);
#line 357 "../lib/Services/Preferences.vala"
		_g_key_file_unref0 (file);
#line 2266 "Preferences.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp110_;
		GError* _tmp111_;
		const gchar* _tmp112_;
#line 357 "../lib/Services/Preferences.vala"
		e = _inner_error0_;
#line 357 "../lib/Services/Preferences.vala"
		_inner_error0_ = NULL;
#line 456 "../lib/Services/Preferences.vala"
		_tmp110_ = backing_file_path;
#line 456 "../lib/Services/Preferences.vala"
		g_warning ("Preferences.vala:456: Unable to load preferences from file '%s'", _tmp110_);
#line 457 "../lib/Services/Preferences.vala"
		_tmp111_ = e;
#line 457 "../lib/Services/Preferences.vala"
		_tmp112_ = _tmp111_->message;
#line 457 "../lib/Services/Preferences.vala"
		g_debug ("Preferences.vala:457: %s", _tmp112_);
#line 458 "../lib/Services/Preferences.vala"
		g_signal_emit (self, plank_preferences_signals[PLANK_PREFERENCES_DELETED_SIGNAL], 0);
#line 357 "../lib/Services/Preferences.vala"
		_g_error_free0 (e);
#line 2293 "Preferences.c"
	}
	__finally0:
#line 357 "../lib/Services/Preferences.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 357 "../lib/Services/Preferences.vala"
		_g_free0 (backing_file_path);
#line 357 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp0_);
#line 357 "../lib/Services/Preferences.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 357 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 357 "../lib/Services/Preferences.vala"
		return;
#line 2308 "Preferences.c"
	}
#line 461 "../lib/Services/Preferences.vala"
	g_object_thaw_notify ((GObject*) self);
#line 462 "../lib/Services/Preferences.vala"
	g_signal_connect_object ((GObject*) self, "notify", (GCallback) _plank_preferences_handle_notify_g_object_notify, self, 0);
#line 464 "../lib/Services/Preferences.vala"
	self->priv->is_delayed_internal = FALSE;
#line 465 "../lib/Services/Preferences.vala"
	if (missing_keys) {
#line 465 "../lib/Services/Preferences.vala"
		_tmp113_ = TRUE;
#line 2320 "Preferences.c"
	} else {
		gboolean _tmp114_ = FALSE;
		gboolean _tmp115_ = FALSE;
#line 466 "../lib/Services/Preferences.vala"
		if (!self->priv->is_delayed) {
#line 466 "../lib/Services/Preferences.vala"
			_tmp115_ = self->priv->is_changed;
#line 2328 "Preferences.c"
		} else {
#line 466 "../lib/Services/Preferences.vala"
			_tmp115_ = FALSE;
#line 2332 "Preferences.c"
		}
#line 466 "../lib/Services/Preferences.vala"
		if (_tmp115_) {
#line 2336 "Preferences.c"
			GFile* _tmp116_;
#line 466 "../lib/Services/Preferences.vala"
			_tmp116_ = self->priv->backing_file;
#line 466 "../lib/Services/Preferences.vala"
			_tmp114_ = _tmp116_ != NULL;
#line 2342 "Preferences.c"
		} else {
#line 466 "../lib/Services/Preferences.vala"
			_tmp114_ = FALSE;
#line 2346 "Preferences.c"
		}
#line 466 "../lib/Services/Preferences.vala"
		_tmp113_ = _tmp114_;
#line 2350 "Preferences.c"
	}
#line 465 "../lib/Services/Preferences.vala"
	if (_tmp113_) {
#line 467 "../lib/Services/Preferences.vala"
		plank_preferences_save_prefs (self);
#line 2356 "Preferences.c"
	}
#line 345 "../lib/Services/Preferences.vala"
	_g_free0 (backing_file_path);
#line 345 "../lib/Services/Preferences.vala"
	_g_free0 (_tmp0_);
#line 2362 "Preferences.c"
}

static gchar*
g_date_time_to_string (GDateTime* self)
{
	gchar* _tmp0_;
	gchar* result = NULL;
#line 3320 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 3321 "glib-2.0.vapi"
	_tmp0_ = g_date_time_format (self, "%FT%H:%M:%S%z");
#line 3321 "glib-2.0.vapi"
	result = _tmp0_;
#line 3321 "glib-2.0.vapi"
	return result;
#line 2378 "Preferences.c"
}

static void
plank_preferences_save_prefs (PlankPreferences* self)
{
	GFile* _tmp0_;
	gchar* _tmp1_ = NULL;
	GFile* _tmp2_;
	gchar* _tmp3_;
	gchar* backing_file_path = NULL;
	gchar* _tmp5_;
	gboolean _tmp6_ = FALSE;
	GKeyFile* file = NULL;
	GKeyFile* _tmp8_;
	GParamSpec** properties = NULL;
	GObjectClass* _tmp16_;
	guint _tmp17_ = 0;
	GParamSpec** _tmp18_;
	gint properties_length1;
	gint _properties_size_;
	GParamSpec** _tmp19_;
	gint _tmp19__length1;
	const gchar* _tmp88_;
	GError* _inner_error0_ = NULL;
#line 470 "../lib/Services/Preferences.vala"
	g_return_if_fail (self != NULL);
#line 470 "../lib/Services/Preferences.vala"
	_tmp0_ = self->priv->backing_file;
#line 470 "../lib/Services/Preferences.vala"
	_vala_return_if_fail (_tmp0_ != NULL, "backing_file != null");
#line 473 "../lib/Services/Preferences.vala"
	if (self->priv->read_only) {
#line 474 "../lib/Services/Preferences.vala"
		return;
#line 2413 "Preferences.c"
	}
#line 476 "../lib/Services/Preferences.vala"
	_tmp2_ = self->priv->backing_file;
#line 476 "../lib/Services/Preferences.vala"
	_tmp3_ = g_file_get_path (_tmp2_);
#line 476 "../lib/Services/Preferences.vala"
	_tmp1_ = _tmp3_;
#line 476 "../lib/Services/Preferences.vala"
	if (_tmp1_ == NULL) {
#line 2423 "Preferences.c"
		gchar* _tmp4_;
#line 476 "../lib/Services/Preferences.vala"
		_tmp4_ = g_strdup ("");
#line 476 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp1_);
#line 476 "../lib/Services/Preferences.vala"
		_tmp1_ = _tmp4_;
#line 2431 "Preferences.c"
	}
#line 476 "../lib/Services/Preferences.vala"
	_tmp5_ = _tmp1_;
#line 476 "../lib/Services/Preferences.vala"
	_tmp1_ = NULL;
#line 476 "../lib/Services/Preferences.vala"
	backing_file_path = _tmp5_;
#line 478 "../lib/Services/Preferences.vala"
	if (self->priv->is_delayed) {
#line 478 "../lib/Services/Preferences.vala"
		_tmp6_ = TRUE;
#line 2443 "Preferences.c"
	} else {
#line 478 "../lib/Services/Preferences.vala"
		_tmp6_ = self->priv->is_delayed_internal;
#line 2447 "Preferences.c"
	}
#line 478 "../lib/Services/Preferences.vala"
	if (_tmp6_) {
#line 2451 "Preferences.c"
		const gchar* _tmp7_;
#line 479 "../lib/Services/Preferences.vala"
		_tmp7_ = backing_file_path;
#line 479 "../lib/Services/Preferences.vala"
		plank_logger_verbose ("Preferences.save_prefs('%s') - delaying save", _tmp7_, NULL);
#line 480 "../lib/Services/Preferences.vala"
		self->priv->is_changed = TRUE;
#line 481 "../lib/Services/Preferences.vala"
		_g_free0 (backing_file_path);
#line 481 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp1_);
#line 481 "../lib/Services/Preferences.vala"
		return;
#line 2465 "Preferences.c"
	}
#line 484 "../lib/Services/Preferences.vala"
	plank_preferences_stop_monitor (self);
#line 485 "../lib/Services/Preferences.vala"
	g_object_freeze_notify ((GObject*) self);
#line 487 "../lib/Services/Preferences.vala"
	_tmp8_ = g_key_file_new ();
#line 487 "../lib/Services/Preferences.vala"
	file = _tmp8_;
#line 2475 "Preferences.c"
	{
		GKeyFile* _tmp9_;
		GDateTime* _tmp10_;
		GDateTime* _tmp11_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
#line 490 "../lib/Services/Preferences.vala"
		_tmp9_ = file;
#line 490 "../lib/Services/Preferences.vala"
		_tmp10_ = g_date_time_new_now_utc ();
#line 490 "../lib/Services/Preferences.vala"
		_tmp11_ = _tmp10_;
#line 490 "../lib/Services/Preferences.vala"
		_tmp12_ = g_date_time_to_string (_tmp11_);
#line 490 "../lib/Services/Preferences.vala"
		_tmp13_ = _tmp12_;
#line 490 "../lib/Services/Preferences.vala"
		_tmp14_ = g_strdup_printf ("This file auto-generated by Plank.\n%s", _tmp13_);
#line 490 "../lib/Services/Preferences.vala"
		_tmp15_ = _tmp14_;
#line 490 "../lib/Services/Preferences.vala"
		g_key_file_set_comment (_tmp9_, NULL, NULL, _tmp15_, &_inner_error0_);
#line 490 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp15_);
#line 490 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp13_);
#line 490 "../lib/Services/Preferences.vala"
		_g_date_time_unref0 (_tmp11_);
#line 490 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 2508 "Preferences.c"
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 489 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 2517 "Preferences.c"
	}
	__finally0:
#line 489 "../lib/Services/Preferences.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 489 "../lib/Services/Preferences.vala"
		_g_key_file_unref0 (file);
#line 489 "../lib/Services/Preferences.vala"
		_g_free0 (backing_file_path);
#line 489 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp1_);
#line 489 "../lib/Services/Preferences.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 489 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 489 "../lib/Services/Preferences.vala"
		return;
#line 2534 "Preferences.c"
	}
#line 493 "../lib/Services/Preferences.vala"
	_tmp16_ = G_OBJECT_GET_CLASS ((GObject*) self);
#line 493 "../lib/Services/Preferences.vala"
	_tmp18_ = g_object_class_list_properties (_tmp16_, &_tmp17_);
#line 493 "../lib/Services/Preferences.vala"
	properties = _tmp18_;
#line 493 "../lib/Services/Preferences.vala"
	properties_length1 = _tmp17_;
#line 493 "../lib/Services/Preferences.vala"
	_properties_size_ = properties_length1;
#line 495 "../lib/Services/Preferences.vala"
	_tmp19_ = properties;
#line 495 "../lib/Services/Preferences.vala"
	_tmp19__length1 = properties_length1;
#line 2550 "Preferences.c"
	{
		GParamSpec** prop_collection = NULL;
		gint prop_collection_length1 = 0;
		gint _prop_collection_size_ = 0;
		gint prop_it = 0;
#line 495 "../lib/Services/Preferences.vala"
		prop_collection = _tmp19_;
#line 495 "../lib/Services/Preferences.vala"
		prop_collection_length1 = _tmp19__length1;
#line 495 "../lib/Services/Preferences.vala"
		for (prop_it = 0; prop_it < prop_collection_length1; prop_it = prop_it + 1) {
#line 2562 "Preferences.c"
			GParamSpec* prop = NULL;
#line 495 "../lib/Services/Preferences.vala"
			prop = prop_collection[prop_it];
#line 2566 "Preferences.c"
			{
				const gchar* group_name = NULL;
				GParamSpec* _tmp20_;
				const gchar* _tmp21_;
				const gchar* prop_name = NULL;
				GParamSpec* _tmp22_;
				const gchar* _tmp23_;
				GType type = 0UL;
				GParamSpec* _tmp24_;
				const gchar* prop_blurb = NULL;
				GParamSpec* _tmp76_;
				const gchar* _tmp77_;
				gboolean _tmp78_ = FALSE;
				gboolean _tmp79_ = FALSE;
				const gchar* _tmp80_;
#line 496 "../lib/Services/Preferences.vala"
				_tmp20_ = prop;
#line 496 "../lib/Services/Preferences.vala"
				_tmp21_ = g_type_name (_tmp20_->owner_type);
#line 496 "../lib/Services/Preferences.vala"
				group_name = _tmp21_;
#line 497 "../lib/Services/Preferences.vala"
				_tmp22_ = prop;
#line 497 "../lib/Services/Preferences.vala"
				_tmp23_ = g_param_spec_get_name (_tmp22_);
#line 497 "../lib/Services/Preferences.vala"
				prop_name = _tmp23_;
#line 498 "../lib/Services/Preferences.vala"
				_tmp24_ = prop;
#line 498 "../lib/Services/Preferences.vala"
				type = _tmp24_->value_type;
#line 500 "../lib/Services/Preferences.vala"
				if (type == G_TYPE_INT) {
#line 2600 "Preferences.c"
					gint new_val = 0;
					const gchar* _tmp25_;
					gint _tmp26_ = 0;
					GKeyFile* _tmp27_;
					const gchar* _tmp28_;
					const gchar* _tmp29_;
#line 502 "../lib/Services/Preferences.vala"
					_tmp25_ = prop_name;
#line 502 "../lib/Services/Preferences.vala"
					g_object_get ((GObject*) self, _tmp25_, &_tmp26_, NULL);
#line 502 "../lib/Services/Preferences.vala"
					new_val = _tmp26_;
#line 503 "../lib/Services/Preferences.vala"
					_tmp27_ = file;
#line 503 "../lib/Services/Preferences.vala"
					_tmp28_ = group_name;
#line 503 "../lib/Services/Preferences.vala"
					_tmp29_ = prop_name;
#line 503 "../lib/Services/Preferences.vala"
					g_key_file_set_integer (_tmp27_, _tmp28_, _tmp29_, new_val);
#line 2621 "Preferences.c"
				} else {
#line 504 "../lib/Services/Preferences.vala"
					if (type == G_TYPE_UINT) {
#line 2625 "Preferences.c"
						guint new_val = 0U;
						const gchar* _tmp30_;
						guint _tmp31_ = 0U;
						GKeyFile* _tmp32_;
						const gchar* _tmp33_;
						const gchar* _tmp34_;
#line 506 "../lib/Services/Preferences.vala"
						_tmp30_ = prop_name;
#line 506 "../lib/Services/Preferences.vala"
						g_object_get ((GObject*) self, _tmp30_, &_tmp31_, NULL);
#line 506 "../lib/Services/Preferences.vala"
						new_val = _tmp31_;
#line 507 "../lib/Services/Preferences.vala"
						_tmp32_ = file;
#line 507 "../lib/Services/Preferences.vala"
						_tmp33_ = group_name;
#line 507 "../lib/Services/Preferences.vala"
						_tmp34_ = prop_name;
#line 507 "../lib/Services/Preferences.vala"
						g_key_file_set_integer (_tmp32_, _tmp33_, _tmp34_, (gint) new_val);
#line 2646 "Preferences.c"
					} else {
#line 508 "../lib/Services/Preferences.vala"
						if (type == G_TYPE_DOUBLE) {
#line 2650 "Preferences.c"
							gdouble new_val = 0.0;
							const gchar* _tmp35_;
							gdouble _tmp36_ = 0.0;
							GKeyFile* _tmp37_;
							const gchar* _tmp38_;
							const gchar* _tmp39_;
#line 510 "../lib/Services/Preferences.vala"
							_tmp35_ = prop_name;
#line 510 "../lib/Services/Preferences.vala"
							g_object_get ((GObject*) self, _tmp35_, &_tmp36_, NULL);
#line 510 "../lib/Services/Preferences.vala"
							new_val = _tmp36_;
#line 511 "../lib/Services/Preferences.vala"
							_tmp37_ = file;
#line 511 "../lib/Services/Preferences.vala"
							_tmp38_ = group_name;
#line 511 "../lib/Services/Preferences.vala"
							_tmp39_ = prop_name;
#line 511 "../lib/Services/Preferences.vala"
							g_key_file_set_double (_tmp37_, _tmp38_, _tmp39_, new_val);
#line 2671 "Preferences.c"
						} else {
#line 512 "../lib/Services/Preferences.vala"
							if (type == G_TYPE_STRING) {
#line 2675 "Preferences.c"
								gchar* new_val = NULL;
								const gchar* _tmp40_;
								gchar* _tmp41_ = NULL;
								GKeyFile* _tmp42_;
								const gchar* _tmp43_;
								const gchar* _tmp44_;
								const gchar* _tmp45_;
#line 514 "../lib/Services/Preferences.vala"
								_tmp40_ = prop_name;
#line 514 "../lib/Services/Preferences.vala"
								g_object_get ((GObject*) self, _tmp40_, &_tmp41_, NULL);
#line 514 "../lib/Services/Preferences.vala"
								_g_free0 (new_val);
#line 514 "../lib/Services/Preferences.vala"
								new_val = _tmp41_;
#line 515 "../lib/Services/Preferences.vala"
								_tmp42_ = file;
#line 515 "../lib/Services/Preferences.vala"
								_tmp43_ = group_name;
#line 515 "../lib/Services/Preferences.vala"
								_tmp44_ = prop_name;
#line 515 "../lib/Services/Preferences.vala"
								_tmp45_ = new_val;
#line 515 "../lib/Services/Preferences.vala"
								g_key_file_set_string (_tmp42_, _tmp43_, _tmp44_, _tmp45_);
#line 512 "../lib/Services/Preferences.vala"
								_g_free0 (new_val);
#line 2703 "Preferences.c"
							} else {
#line 516 "../lib/Services/Preferences.vala"
								if (type == G_TYPE_BOOLEAN) {
#line 2707 "Preferences.c"
									gboolean new_val = FALSE;
									const gchar* _tmp46_;
									gboolean _tmp47_ = FALSE;
									GKeyFile* _tmp48_;
									const gchar* _tmp49_;
									const gchar* _tmp50_;
#line 518 "../lib/Services/Preferences.vala"
									_tmp46_ = prop_name;
#line 518 "../lib/Services/Preferences.vala"
									g_object_get ((GObject*) self, _tmp46_, &_tmp47_, NULL);
#line 518 "../lib/Services/Preferences.vala"
									new_val = _tmp47_;
#line 519 "../lib/Services/Preferences.vala"
									_tmp48_ = file;
#line 519 "../lib/Services/Preferences.vala"
									_tmp49_ = group_name;
#line 519 "../lib/Services/Preferences.vala"
									_tmp50_ = prop_name;
#line 519 "../lib/Services/Preferences.vala"
									g_key_file_set_boolean (_tmp48_, _tmp49_, _tmp50_, new_val);
#line 2728 "Preferences.c"
								} else {
#line 520 "../lib/Services/Preferences.vala"
									if (G_TYPE_IS_ENUM (type)) {
#line 2732 "Preferences.c"
										gint new_val = 0;
										const gchar* _tmp51_;
										gint _tmp52_ = 0;
										GKeyFile* _tmp53_;
										const gchar* _tmp54_;
										const gchar* _tmp55_;
#line 522 "../lib/Services/Preferences.vala"
										_tmp51_ = prop_name;
#line 522 "../lib/Services/Preferences.vala"
										g_object_get ((GObject*) self, _tmp51_, &_tmp52_, NULL);
#line 522 "../lib/Services/Preferences.vala"
										new_val = _tmp52_;
#line 523 "../lib/Services/Preferences.vala"
										_tmp53_ = file;
#line 523 "../lib/Services/Preferences.vala"
										_tmp54_ = group_name;
#line 523 "../lib/Services/Preferences.vala"
										_tmp55_ = prop_name;
#line 523 "../lib/Services/Preferences.vala"
										g_key_file_set_integer (_tmp53_, _tmp54_, _tmp55_, new_val);
#line 2753 "Preferences.c"
									} else {
										gboolean _tmp56_ = FALSE;
#line 524 "../lib/Services/Preferences.vala"
										if (g_type_is_a (type, PLANK_TYPE_COLOR)) {
#line 524 "../lib/Services/Preferences.vala"
											_tmp56_ = TRUE;
#line 2760 "Preferences.c"
										} else {
#line 524 "../lib/Services/Preferences.vala"
											_tmp56_ = g_type_is_a (type, gdk_rgba_get_type ());
#line 2764 "Preferences.c"
										}
#line 524 "../lib/Services/Preferences.vala"
										if (_tmp56_) {
#line 2768 "Preferences.c"
											GValue val = {0};
											GValue _tmp57_ = {0};
											const gchar* _tmp58_;
											PlankColor* color = NULL;
											void* _tmp59_;
											GKeyFile* _tmp60_;
											const gchar* _tmp61_;
											const gchar* _tmp62_;
											gchar* _tmp63_;
											gchar* _tmp64_;
#line 525 "../lib/Services/Preferences.vala"
											g_value_init (&_tmp57_, type);
#line 525 "../lib/Services/Preferences.vala"
											val = _tmp57_;
#line 526 "../lib/Services/Preferences.vala"
											_tmp58_ = prop_name;
#line 526 "../lib/Services/Preferences.vala"
											g_object_get_property ((GObject*) self, _tmp58_, &val);
#line 527 "../lib/Services/Preferences.vala"
											_tmp59_ = g_value_get_boxed (&val);
#line 527 "../lib/Services/Preferences.vala"
											color = _tmp59_;
#line 528 "../lib/Services/Preferences.vala"
											_tmp60_ = file;
#line 528 "../lib/Services/Preferences.vala"
											_tmp61_ = group_name;
#line 528 "../lib/Services/Preferences.vala"
											_tmp62_ = prop_name;
#line 528 "../lib/Services/Preferences.vala"
											_tmp63_ = plank_color_to_prefs_string (color);
#line 528 "../lib/Services/Preferences.vala"
											_tmp64_ = _tmp63_;
#line 528 "../lib/Services/Preferences.vala"
											g_key_file_set_string (_tmp60_, _tmp61_, _tmp62_, _tmp64_);
#line 528 "../lib/Services/Preferences.vala"
											_g_free0 (_tmp64_);
#line 524 "../lib/Services/Preferences.vala"
											G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 2807 "Preferences.c"
										} else {
#line 529 "../lib/Services/Preferences.vala"
											if (g_type_is_a (type, PLANK_TYPE_SERIALIZABLE)) {
#line 2811 "Preferences.c"
												GValue val = {0};
												GValue _tmp65_ = {0};
												const gchar* _tmp66_;
												GKeyFile* _tmp67_;
												const gchar* _tmp68_;
												const gchar* _tmp69_;
												GObject* _tmp70_;
												gchar* _tmp71_;
												gchar* _tmp72_;
#line 530 "../lib/Services/Preferences.vala"
												g_value_init (&_tmp65_, type);
#line 530 "../lib/Services/Preferences.vala"
												val = _tmp65_;
#line 531 "../lib/Services/Preferences.vala"
												_tmp66_ = prop_name;
#line 531 "../lib/Services/Preferences.vala"
												g_object_get_property ((GObject*) self, _tmp66_, &val);
#line 532 "../lib/Services/Preferences.vala"
												_tmp67_ = file;
#line 532 "../lib/Services/Preferences.vala"
												_tmp68_ = group_name;
#line 532 "../lib/Services/Preferences.vala"
												_tmp69_ = prop_name;
#line 532 "../lib/Services/Preferences.vala"
												_tmp70_ = g_value_get_object (&val);
#line 532 "../lib/Services/Preferences.vala"
												_tmp71_ = plank_serializable_serialize (G_TYPE_CHECK_INSTANCE_CAST (_tmp70_, PLANK_TYPE_SERIALIZABLE, PlankSerializable));
#line 532 "../lib/Services/Preferences.vala"
												_tmp72_ = _tmp71_;
#line 532 "../lib/Services/Preferences.vala"
												g_key_file_set_string (_tmp67_, _tmp68_, _tmp69_, _tmp72_);
#line 532 "../lib/Services/Preferences.vala"
												_g_free0 (_tmp72_);
#line 529 "../lib/Services/Preferences.vala"
												G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 2847 "Preferences.c"
											} else {
												const gchar* _tmp73_;
												const gchar* _tmp74_;
												const gchar* _tmp75_;
#line 534 "../lib/Services/Preferences.vala"
												_tmp73_ = g_type_name (type);
#line 534 "../lib/Services/Preferences.vala"
												_tmp74_ = prop_name;
#line 534 "../lib/Services/Preferences.vala"
												_tmp75_ = backing_file_path;
#line 534 "../lib/Services/Preferences.vala"
												g_debug ("Preferences.vala:534: Unsupported preferences type '%s' for property '" \
"%s' in file '%s'", _tmp73_, _tmp74_, _tmp75_);
#line 535 "../lib/Services/Preferences.vala"
												continue;
#line 2862 "Preferences.c"
											}
										}
									}
								}
							}
						}
					}
				}
#line 538 "../lib/Services/Preferences.vala"
				_tmp76_ = prop;
#line 538 "../lib/Services/Preferences.vala"
				_tmp77_ = g_param_spec_get_blurb (_tmp76_);
#line 538 "../lib/Services/Preferences.vala"
				prop_blurb = _tmp77_;
#line 539 "../lib/Services/Preferences.vala"
				_tmp80_ = prop_blurb;
#line 539 "../lib/Services/Preferences.vala"
				if (_tmp80_ != NULL) {
#line 2881 "Preferences.c"
					const gchar* _tmp81_;
#line 539 "../lib/Services/Preferences.vala"
					_tmp81_ = prop_blurb;
#line 539 "../lib/Services/Preferences.vala"
					_tmp79_ = g_strcmp0 (_tmp81_, "") != 0;
#line 2887 "Preferences.c"
				} else {
#line 539 "../lib/Services/Preferences.vala"
					_tmp79_ = FALSE;
#line 2891 "Preferences.c"
				}
#line 539 "../lib/Services/Preferences.vala"
				if (_tmp79_) {
#line 2895 "Preferences.c"
					const gchar* _tmp82_;
					const gchar* _tmp83_;
#line 539 "../lib/Services/Preferences.vala"
					_tmp82_ = prop_blurb;
#line 539 "../lib/Services/Preferences.vala"
					_tmp83_ = prop_name;
#line 539 "../lib/Services/Preferences.vala"
					_tmp78_ = g_strcmp0 (_tmp82_, _tmp83_) != 0;
#line 2904 "Preferences.c"
				} else {
#line 539 "../lib/Services/Preferences.vala"
					_tmp78_ = FALSE;
#line 2908 "Preferences.c"
				}
#line 539 "../lib/Services/Preferences.vala"
				if (_tmp78_) {
#line 2912 "Preferences.c"
					{
						GKeyFile* _tmp84_;
						const gchar* _tmp85_;
						const gchar* _tmp86_;
						const gchar* _tmp87_;
#line 541 "../lib/Services/Preferences.vala"
						_tmp84_ = file;
#line 541 "../lib/Services/Preferences.vala"
						_tmp85_ = group_name;
#line 541 "../lib/Services/Preferences.vala"
						_tmp86_ = prop_name;
#line 541 "../lib/Services/Preferences.vala"
						_tmp87_ = prop_blurb;
#line 541 "../lib/Services/Preferences.vala"
						g_key_file_set_comment (_tmp84_, _tmp85_, _tmp86_, _tmp87_, &_inner_error0_);
#line 541 "../lib/Services/Preferences.vala"
						if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 2930 "Preferences.c"
							goto __catch1_g_error;
						}
					}
					goto __finally1;
					__catch1_g_error:
					{
#line 540 "../lib/Services/Preferences.vala"
						g_clear_error (&_inner_error0_);
#line 2939 "Preferences.c"
					}
					__finally1:
#line 540 "../lib/Services/Preferences.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 540 "../lib/Services/Preferences.vala"
						properties = (g_free (properties), NULL);
#line 540 "../lib/Services/Preferences.vala"
						_g_key_file_unref0 (file);
#line 540 "../lib/Services/Preferences.vala"
						_g_free0 (backing_file_path);
#line 540 "../lib/Services/Preferences.vala"
						_g_free0 (_tmp1_);
#line 540 "../lib/Services/Preferences.vala"
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 540 "../lib/Services/Preferences.vala"
						g_clear_error (&_inner_error0_);
#line 540 "../lib/Services/Preferences.vala"
						return;
#line 2958 "Preferences.c"
					}
				}
			}
		}
	}
#line 545 "../lib/Services/Preferences.vala"
	_tmp88_ = backing_file_path;
#line 545 "../lib/Services/Preferences.vala"
	g_debug ("Preferences.vala:545: Saving preferences '%s'", _tmp88_);
#line 546 "../lib/Services/Preferences.vala"
	self->priv->is_changed = FALSE;
#line 2970 "Preferences.c"
	{
		GFileOutputStream* _tmp89_ = NULL;
		GFile* _tmp90_;
		GFileOutputStream* _tmp91_;
		GDataOutputStream* stream = NULL;
		GDataOutputStream* _tmp92_;
		GDataOutputStream* _tmp93_;
		GKeyFile* _tmp94_;
		gchar* _tmp95_;
		gchar* _tmp96_;
		GDataOutputStream* _tmp97_;
#line 549 "../lib/Services/Preferences.vala"
		_tmp90_ = self->priv->backing_file;
#line 549 "../lib/Services/Preferences.vala"
		_tmp91_ = g_file_replace (_tmp90_, NULL, FALSE, 0, NULL, &_inner_error0_);
#line 549 "../lib/Services/Preferences.vala"
		_tmp89_ = _tmp91_;
#line 549 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 2990 "Preferences.c"
			goto __catch2_g_error;
		}
#line 549 "../lib/Services/Preferences.vala"
		_tmp92_ = g_data_output_stream_new ((GOutputStream*) _tmp89_);
#line 549 "../lib/Services/Preferences.vala"
		stream = _tmp92_;
#line 550 "../lib/Services/Preferences.vala"
		_tmp93_ = stream;
#line 550 "../lib/Services/Preferences.vala"
		_tmp94_ = file;
#line 550 "../lib/Services/Preferences.vala"
		_tmp95_ = g_key_file_to_data (_tmp94_, NULL, NULL);
#line 550 "../lib/Services/Preferences.vala"
		_tmp96_ = _tmp95_;
#line 550 "../lib/Services/Preferences.vala"
		g_data_output_stream_put_string (_tmp93_, _tmp96_, NULL, &_inner_error0_);
#line 550 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp96_);
#line 550 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 550 "../lib/Services/Preferences.vala"
			_g_object_unref0 (stream);
#line 550 "../lib/Services/Preferences.vala"
			_g_object_unref0 (_tmp89_);
#line 3015 "Preferences.c"
			goto __catch2_g_error;
		}
#line 551 "../lib/Services/Preferences.vala"
		_tmp97_ = stream;
#line 551 "../lib/Services/Preferences.vala"
		g_output_stream_close ((GOutputStream*) _tmp97_, NULL, &_inner_error0_);
#line 551 "../lib/Services/Preferences.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 551 "../lib/Services/Preferences.vala"
			_g_object_unref0 (stream);
#line 551 "../lib/Services/Preferences.vala"
			_g_object_unref0 (_tmp89_);
#line 3028 "Preferences.c"
			goto __catch2_g_error;
		}
#line 548 "../lib/Services/Preferences.vala"
		_g_object_unref0 (stream);
#line 548 "../lib/Services/Preferences.vala"
		_g_object_unref0 (_tmp89_);
#line 3035 "Preferences.c"
	}
	goto __finally2;
	__catch2_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp98_;
		GError* _tmp99_;
		const gchar* _tmp100_;
#line 548 "../lib/Services/Preferences.vala"
		e = _inner_error0_;
#line 548 "../lib/Services/Preferences.vala"
		_inner_error0_ = NULL;
#line 553 "../lib/Services/Preferences.vala"
		_tmp98_ = backing_file_path;
#line 553 "../lib/Services/Preferences.vala"
		g_warning ("Preferences.vala:553: Unable to create the preferences file '%s'", _tmp98_);
#line 554 "../lib/Services/Preferences.vala"
		_tmp99_ = e;
#line 554 "../lib/Services/Preferences.vala"
		_tmp100_ = _tmp99_->message;
#line 554 "../lib/Services/Preferences.vala"
		g_debug ("Preferences.vala:554: %s", _tmp100_);
#line 548 "../lib/Services/Preferences.vala"
		_g_error_free0 (e);
#line 3060 "Preferences.c"
	}
	__finally2:
#line 548 "../lib/Services/Preferences.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 548 "../lib/Services/Preferences.vala"
		properties = (g_free (properties), NULL);
#line 548 "../lib/Services/Preferences.vala"
		_g_key_file_unref0 (file);
#line 548 "../lib/Services/Preferences.vala"
		_g_free0 (backing_file_path);
#line 548 "../lib/Services/Preferences.vala"
		_g_free0 (_tmp1_);
#line 548 "../lib/Services/Preferences.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 548 "../lib/Services/Preferences.vala"
		g_clear_error (&_inner_error0_);
#line 548 "../lib/Services/Preferences.vala"
		return;
#line 3079 "Preferences.c"
	}
#line 557 "../lib/Services/Preferences.vala"
	g_object_thaw_notify ((GObject*) self);
#line 558 "../lib/Services/Preferences.vala"
	plank_preferences_start_monitor (self);
#line 470 "../lib/Services/Preferences.vala"
	properties = (g_free (properties), NULL);
#line 470 "../lib/Services/Preferences.vala"
	_g_key_file_unref0 (file);
#line 470 "../lib/Services/Preferences.vala"
	_g_free0 (backing_file_path);
#line 470 "../lib/Services/Preferences.vala"
	_g_free0 (_tmp1_);
#line 3093 "Preferences.c"
}

static GObject *
plank_preferences_constructor (GType type,
                               guint n_construct_properties,
                               GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	PlankPreferences * self;
#line 72 "../lib/Services/Preferences.vala"
	parent_class = G_OBJECT_CLASS (plank_preferences_parent_class);
#line 72 "../lib/Services/Preferences.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 72 "../lib/Services/Preferences.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PLANK_TYPE_PREFERENCES, PlankPreferences);
#line 74 "../lib/Services/Preferences.vala"
	plank_preferences_reset_properties (self);
#line 75 "../lib/Services/Preferences.vala"
	g_signal_connect_object ((GObject*) self, "notify", (GCallback) _plank_preferences_handle_notify_g_object_notify, self, 0);
#line 72 "../lib/Services/Preferences.vala"
	return obj;
#line 3116 "Preferences.c"
}

static void
plank_preferences_class_init (PlankPreferencesClass * klass,
                              gpointer klass_data)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar** _tmp6_;
#line 50 "../lib/Services/Preferences.vala"
	plank_preferences_parent_class = g_type_class_peek_parent (klass);
#line 50 "../lib/Services/Preferences.vala"
	g_type_class_adjust_private_offset (klass, &PlankPreferences_private_offset);
#line 50 "../lib/Services/Preferences.vala"
	((PlankPreferencesClass *) klass)->verify = (void (*) (PlankPreferences*, const gchar*)) plank_preferences_real_verify;
#line 50 "../lib/Services/Preferences.vala"
	((PlankPreferencesClass *) klass)->reset_properties = (void (*) (PlankPreferences*)) plank_preferences_real_reset_properties;
#line 50 "../lib/Services/Preferences.vala"
	G_OBJECT_CLASS (klass)->constructor = plank_preferences_constructor;
#line 50 "../lib/Services/Preferences.vala"
	G_OBJECT_CLASS (klass)->finalize = plank_preferences_finalize;
#line 3142 "Preferences.c"
	/**
	 * This signal indicates that the backing file for this preferences was deleted.
	 */
#line 50 "../lib/Services/Preferences.vala"
	plank_preferences_signals[PLANK_PREFERENCES_DELETED_SIGNAL] = g_signal_new ("deleted", PLANK_TYPE_PREFERENCES, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 53 "../lib/Services/Preferences.vala"
	_tmp0_ = g_strdup ("PlankItemsDockItemPreferences");
#line 53 "../lib/Services/Preferences.vala"
	_tmp1_ = g_strdup ("PlankDockItemPreferences");
#line 53 "../lib/Services/Preferences.vala"
	_tmp2_ = g_strdup ("PlankDrawingTheme");
#line 53 "../lib/Services/Preferences.vala"
	_tmp3_ = g_strdup ("PlankTheme");
#line 53 "../lib/Services/Preferences.vala"
	_tmp4_ = g_strdup ("PlankDrawingDockTheme");
#line 53 "../lib/Services/Preferences.vala"
	_tmp5_ = g_strdup ("PlankDockTheme");
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_ = g_new0 (gchar*, (3 * 2) + 1);
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[0] = _tmp0_;
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[1] = _tmp1_;
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[2] = _tmp2_;
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[3] = _tmp3_;
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[4] = _tmp4_;
#line 53 "../lib/Services/Preferences.vala"
	_tmp6_[5] = _tmp5_;
#line 53 "../lib/Services/Preferences.vala"
	plank_preferences_TRANSITION_MAP = _tmp6_;
#line 53 "../lib/Services/Preferences.vala"
	plank_preferences_TRANSITION_MAP_length1 = 3;
#line 53 "../lib/Services/Preferences.vala"
	plank_preferences_TRANSITION_MAP_length2 = 2;
#line 3180 "Preferences.c"
}

static void
plank_preferences_instance_init (PlankPreferences * self,
                                 gpointer klass)
{
#line 50 "../lib/Services/Preferences.vala"
	self->priv = plank_preferences_get_instance_private (self);
#line 147 "../lib/Services/Preferences.vala"
	self->priv->read_only = FALSE;
#line 219 "../lib/Services/Preferences.vala"
	self->priv->is_delayed = FALSE;
#line 220 "../lib/Services/Preferences.vala"
	self->priv->is_delayed_internal = FALSE;
#line 221 "../lib/Services/Preferences.vala"
	self->priv->is_changed = FALSE;
#line 3197 "Preferences.c"
}

static void
plank_preferences_finalize (GObject * obj)
{
	PlankPreferences * self;
	guint _tmp0_;
#line 50 "../lib/Services/Preferences.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PLANK_TYPE_PREFERENCES, PlankPreferences);
#line 80 "../lib/Services/Preferences.vala"
	g_signal_parse_name ("notify", G_TYPE_OBJECT, &_tmp0_, NULL, FALSE);
#line 80 "../lib/Services/Preferences.vala"
	g_signal_handlers_disconnect_matched ((GObject*) self, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp0_, 0, NULL, (GCallback) _plank_preferences_handle_notify_g_object_notify, self);
#line 81 "../lib/Services/Preferences.vala"
	plank_preferences_apply (self);
#line 82 "../lib/Services/Preferences.vala"
	plank_preferences_stop_monitor (self);
#line 145 "../lib/Services/Preferences.vala"
	_g_object_unref0 (self->priv->backing_file);
#line 146 "../lib/Services/Preferences.vala"
	_g_object_unref0 (self->priv->backing_monitor);
#line 50 "../lib/Services/Preferences.vala"
	G_OBJECT_CLASS (plank_preferences_parent_class)->finalize (obj);
#line 3221 "Preferences.c"
}

/**
 * The base class for all preferences in the system.  Preferences are serialized to files.
 * The file is watched for changes and loads new values if the backing file changed.  When
 * any public property of a sub-class is changed, the public properties are serialized to
 * the backing file.
 */
static GType
plank_preferences_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (PlankPreferencesClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) plank_preferences_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PlankPreferences), 0, (GInstanceInitFunc) plank_preferences_instance_init, NULL };
	GType plank_preferences_type_id;
	plank_preferences_type_id = g_type_register_static (G_TYPE_OBJECT, "PlankPreferences", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
	PlankPreferences_private_offset = g_type_add_instance_private (plank_preferences_type_id, sizeof (PlankPreferencesPrivate));
	return plank_preferences_type_id;
}

GType
plank_preferences_get_type (void)
{
	static volatile gsize plank_preferences_type_id__volatile = 0;
	if (g_once_init_enter (&plank_preferences_type_id__volatile)) {
		GType plank_preferences_type_id;
		plank_preferences_type_id = plank_preferences_get_type_once ();
		g_once_init_leave (&plank_preferences_type_id__volatile, plank_preferences_type_id);
	}
	return plank_preferences_type_id__volatile;
}

