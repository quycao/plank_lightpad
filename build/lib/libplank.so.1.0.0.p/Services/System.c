/* System.c generated by valac 0.48.17, the Vala compiler
 * generated from System.vala, do not modify */

/**/
/*  Copyright (C) 2011 Robert Dyer*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gdk/gdk.h>
#include <gio/gdesktopappinfo.h>

#define PLANK_TYPE_SYSTEM (plank_system_get_type ())
#define PLANK_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PLANK_TYPE_SYSTEM, PlankSystem))
#define PLANK_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PLANK_TYPE_SYSTEM, PlankSystemClass))
#define PLANK_IS_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PLANK_TYPE_SYSTEM))
#define PLANK_IS_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PLANK_TYPE_SYSTEM))
#define PLANK_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PLANK_TYPE_SYSTEM, PlankSystemClass))

typedef struct _PlankSystem PlankSystem;
typedef struct _PlankSystemClass PlankSystemClass;
typedef struct _PlankSystemPrivate PlankSystemPrivate;
enum  {
	PLANK_SYSTEM_0_PROPERTY,
	PLANK_SYSTEM_CONTEXT_PROPERTY,
	PLANK_SYSTEM_NUM_PROPERTIES
};
static GParamSpec* plank_system_properties[PLANK_SYSTEM_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_key_file_unref0(var) ((var == NULL) ? NULL : (var = (g_key_file_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _PlankSystem {
	GObject parent_instance;
	PlankSystemPrivate * priv;
};

struct _PlankSystemClass {
	GObjectClass parent_class;
};

struct _PlankSystemPrivate {
	GAppLaunchContext* _context;
};

static gint PlankSystem_private_offset;
static gpointer plank_system_parent_class = NULL;
static PlankSystem* plank_system_instance;
static PlankSystem* plank_system_instance = NULL;

GType plank_system_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PlankSystem, g_object_unref)
GAppLaunchContext* plank_system_get_context (PlankSystem* self);
static void plank_system_on_launch_failed (PlankSystem* self,
                                    const gchar* startup_notify_id);
static void _plank_system_on_launch_failed_g_app_launch_context_launch_failed (GAppLaunchContext* _sender,
                                                                        const gchar* startup_notify_id,
                                                                        gpointer self);
static void plank_system_on_launched (PlankSystem* self,
                               GAppInfo* info,
                               GVariant* platform_data);
static void _plank_system_on_launched_g_app_launch_context_launched (GAppLaunchContext* _sender,
                                                              GAppInfo* info,
                                                              GVariant* platform_data,
                                                              gpointer self);
PlankSystem* plank_system_get_default (void);
PlankSystem* plank_system_new (GAppLaunchContext* context);
PlankSystem* plank_system_construct (GType object_type,
                                     GAppLaunchContext* context);
void plank_logger_verbose (const gchar* msg,
                           ...);
void plank_system_open_uri (PlankSystem* self,
                            const gchar* uri);
void plank_system_open (PlankSystem* self,
                        GFile* file);
void plank_system_launch_with_files (PlankSystem* self,
                                     GFile* app,
                                     GFile** files,
                                     gint files_length1);
void plank_system_open_files (PlankSystem* self,
                              GFile** files,
                              gint files_length1);
void plank_system_launch (PlankSystem* self,
                          GFile* app);
static gboolean plank_system_path_is_mounted (const gchar* path);
static void _g_object_unref0_ (gpointer var);
static inline void _g_list_free__g_object_unref0_ (GList* self);
static void plank_system_internal_launch (PlankSystem* self,
                                   GFile* app,
                                   GList* files);
static void _g_free0_ (gpointer var);
static inline void _g_list_free__g_free0_ (GList* self);
static void plank_system_set_context (PlankSystem* self,
                               GAppLaunchContext* value);
static GObject * plank_system_constructor (GType type,
                                    guint n_construct_properties,
                                    GObjectConstructParam * construct_properties);
static void plank_system_finalize (GObject * obj);
static GType plank_system_get_type_once (void);
static void _vala_plank_system_get_property (GObject * object,
                                      guint property_id,
                                      GValue * value,
                                      GParamSpec * pspec);
static void _vala_plank_system_set_property (GObject * object,
                                      guint property_id,
                                      const GValue * value,
                                      GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
plank_system_get_instance_private (PlankSystem* self)
{
	return G_STRUCT_MEMBER_P (self, PlankSystem_private_offset);
}

static void
_plank_system_on_launch_failed_g_app_launch_context_launch_failed (GAppLaunchContext* _sender,
                                                                   const gchar* startup_notify_id,
                                                                   gpointer self)
{
#line 52 "../lib/Services/System.vala"
	plank_system_on_launch_failed ((PlankSystem*) self, startup_notify_id);
#line 148 "System.c"
}

static void
_plank_system_on_launched_g_app_launch_context_launched (GAppLaunchContext* _sender,
                                                         GAppInfo* info,
                                                         GVariant* platform_data,
                                                         gpointer self)
{
#line 53 "../lib/Services/System.vala"
	plank_system_on_launched ((PlankSystem*) self, info, platform_data);
#line 159 "System.c"
}

PlankSystem*
plank_system_get_default (void)
{
	PlankSystem* _tmp0_;
	PlankSystem* _tmp5_;
	PlankSystem* result = NULL;
#line 31 "../lib/Services/System.vala"
	_tmp0_ = plank_system_instance;
#line 31 "../lib/Services/System.vala"
	if (_tmp0_ == NULL) {
#line 172 "System.c"
		GdkDisplay* _tmp1_;
		GdkAppLaunchContext* _tmp2_;
		GdkAppLaunchContext* _tmp3_;
		PlankSystem* _tmp4_;
#line 32 "../lib/Services/System.vala"
		_tmp1_ = gdk_display_get_default ();
#line 32 "../lib/Services/System.vala"
		_tmp2_ = gdk_display_get_app_launch_context (_tmp1_);
#line 32 "../lib/Services/System.vala"
		_tmp3_ = _tmp2_;
#line 32 "../lib/Services/System.vala"
		_tmp4_ = plank_system_new ((GAppLaunchContext*) _tmp3_);
#line 32 "../lib/Services/System.vala"
		_g_object_unref0 (plank_system_instance);
#line 32 "../lib/Services/System.vala"
		plank_system_instance = _tmp4_;
#line 32 "../lib/Services/System.vala"
		_g_object_unref0 (_tmp3_);
#line 191 "System.c"
	}
#line 34 "../lib/Services/System.vala"
	_tmp5_ = plank_system_instance;
#line 34 "../lib/Services/System.vala"
	result = _tmp5_;
#line 34 "../lib/Services/System.vala"
	return result;
#line 199 "System.c"
}

PlankSystem*
plank_system_construct (GType object_type,
                        GAppLaunchContext* context)
{
	PlankSystem * self = NULL;
#line 39 "../lib/Services/System.vala"
	g_return_val_if_fail (context != NULL, NULL);
#line 41 "../lib/Services/System.vala"
	self = (PlankSystem*) g_object_new (object_type, "context", context, NULL);
#line 39 "../lib/Services/System.vala"
	return self;
#line 213 "System.c"
}

PlankSystem*
plank_system_new (GAppLaunchContext* context)
{
#line 39 "../lib/Services/System.vala"
	return plank_system_construct (PLANK_TYPE_SYSTEM, context);
#line 221 "System.c"
}

static void
plank_system_on_launch_failed (PlankSystem* self,
                               const gchar* startup_notify_id)
{
#line 56 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 56 "../lib/Services/System.vala"
	g_return_if_fail (startup_notify_id != NULL);
#line 58 "../lib/Services/System.vala"
	g_warning ("System.vala:58: Failed to launch '%s'", startup_notify_id);
#line 234 "System.c"
}

static void
plank_system_on_launched (PlankSystem* self,
                          GAppInfo* info,
                          GVariant* platform_data)
{
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 61 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 61 "../lib/Services/System.vala"
	g_return_if_fail (info != NULL);
#line 61 "../lib/Services/System.vala"
	g_return_if_fail (platform_data != NULL);
#line 63 "../lib/Services/System.vala"
	_tmp0_ = g_app_info_get_name (info);
#line 63 "../lib/Services/System.vala"
	_tmp1_ = g_app_info_get_executable (info);
#line 63 "../lib/Services/System.vala"
	plank_logger_verbose ("Launched '%s' ('%s')", _tmp0_, _tmp1_, NULL);
#line 256 "System.c"
}

/**
 * Opens a file based on a URI.
 *
 * @param uri the URI to open
 */
void
plank_system_open_uri (PlankSystem* self,
                       const gchar* uri)
{
	GFile* _tmp0_;
	GFile* _tmp1_;
#line 71 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 71 "../lib/Services/System.vala"
	g_return_if_fail (uri != NULL);
#line 73 "../lib/Services/System.vala"
	_tmp0_ = g_file_new_for_uri (uri);
#line 73 "../lib/Services/System.vala"
	_tmp1_ = _tmp0_;
#line 73 "../lib/Services/System.vala"
	plank_system_open (self, _tmp1_);
#line 73 "../lib/Services/System.vala"
	_g_object_unref0 (_tmp1_);
#line 282 "System.c"
}

/**
 * Opens a file based on a {@link GLib.File}.
 *
 * @param file the {@link GLib.File} to open
 */
static gpointer
_g_object_ref0 (gpointer self)
{
#line 83 "../lib/Services/System.vala"
	return self ? g_object_ref (self) : NULL;
#line 295 "System.c"
}

void
plank_system_open (PlankSystem* self,
                   GFile* file)
{
	GFile* _tmp0_;
	GFile** _tmp1_;
	GFile** _tmp2_;
	gint _tmp2__length1;
#line 81 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 81 "../lib/Services/System.vala"
	g_return_if_fail (file != NULL);
#line 83 "../lib/Services/System.vala"
	_tmp0_ = _g_object_ref0 (file);
#line 83 "../lib/Services/System.vala"
	_tmp1_ = g_new0 (GFile*, 1 + 1);
#line 83 "../lib/Services/System.vala"
	_tmp1_[0] = _tmp0_;
#line 83 "../lib/Services/System.vala"
	_tmp2_ = _tmp1_;
#line 83 "../lib/Services/System.vala"
	_tmp2__length1 = 1;
#line 83 "../lib/Services/System.vala"
	plank_system_launch_with_files (self, NULL, _tmp2_, (gint) 1);
#line 83 "../lib/Services/System.vala"
	_tmp2_ = (_vala_array_free (_tmp2_, _tmp2__length1, (GDestroyNotify) g_object_unref), NULL);
#line 324 "System.c"
}

/**
 * Opens multiple files based on {@link GLib.File}.
 *
 * @param files the {@link GLib.File}s to open
 */
void
plank_system_open_files (PlankSystem* self,
                         GFile** files,
                         gint files_length1)
{
#line 91 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 93 "../lib/Services/System.vala"
	plank_system_launch_with_files (self, NULL, files, (gint) files_length1);
#line 341 "System.c"
}

/**
 * Launches an application.
 *
 * @param app the application to launch
 */
void
plank_system_launch (PlankSystem* self,
                     GFile* app)
{
	GFile** _tmp0_;
	GFile** _tmp1_;
	gint _tmp1__length1;
#line 101 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 101 "../lib/Services/System.vala"
	g_return_if_fail (app != NULL);
#line 103 "../lib/Services/System.vala"
	_tmp0_ = g_new0 (GFile*, 0 + 1);
#line 103 "../lib/Services/System.vala"
	_tmp1_ = _tmp0_;
#line 103 "../lib/Services/System.vala"
	_tmp1__length1 = 0;
#line 103 "../lib/Services/System.vala"
	plank_system_launch_with_files (self, app, _tmp1_, (gint) 0);
#line 103 "../lib/Services/System.vala"
	_tmp1_ = (_vala_array_free (_tmp1_, _tmp1__length1, (GDestroyNotify) g_object_unref), NULL);
#line 370 "System.c"
}

/**
 * Launches an application and opens files.
 *
 * @param app the application to launch
 * @param files the files to open with the application
 */
static void
_g_object_unref0_ (gpointer var)
{
#line 129 "../lib/Services/System.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 384 "System.c"
}

static inline void
_g_list_free__g_object_unref0_ (GList* self)
{
#line 129 "../lib/Services/System.vala"
	g_list_free_full (self, (GDestroyNotify) _g_object_unref0_);
#line 392 "System.c"
}

void
plank_system_launch_with_files (PlankSystem* self,
                                GFile* app,
                                GFile** files,
                                gint files_length1)
{
	gboolean _tmp0_ = FALSE;
	GList* mounted_files = NULL;
	gboolean _tmp23_ = FALSE;
	GList* _tmp24_;
	GError* _inner_error0_ = NULL;
#line 112 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 114 "../lib/Services/System.vala"
	if (app != NULL) {
#line 114 "../lib/Services/System.vala"
		_tmp0_ = !g_file_query_exists (app, NULL);
#line 412 "System.c"
	} else {
#line 114 "../lib/Services/System.vala"
		_tmp0_ = FALSE;
#line 416 "System.c"
	}
#line 114 "../lib/Services/System.vala"
	if (_tmp0_) {
#line 420 "System.c"
		gchar* _tmp1_ = NULL;
		gchar* _tmp2_;
#line 115 "../lib/Services/System.vala"
		_tmp2_ = g_file_get_path (app);
#line 115 "../lib/Services/System.vala"
		_tmp1_ = _tmp2_;
#line 115 "../lib/Services/System.vala"
		if (_tmp1_ == NULL) {
#line 429 "System.c"
			gchar* _tmp3_;
#line 115 "../lib/Services/System.vala"
			_tmp3_ = g_strdup ("");
#line 115 "../lib/Services/System.vala"
			_g_free0 (_tmp1_);
#line 115 "../lib/Services/System.vala"
			_tmp1_ = _tmp3_;
#line 437 "System.c"
		}
#line 115 "../lib/Services/System.vala"
		g_warning ("System.vala:115: Application '%s' doesn't exist", _tmp1_);
#line 116 "../lib/Services/System.vala"
		_g_free0 (_tmp1_);
#line 116 "../lib/Services/System.vala"
		return;
#line 445 "System.c"
	}
#line 119 "../lib/Services/System.vala"
	mounted_files = NULL;
#line 449 "System.c"
	{
		GFile** f_collection = NULL;
		gint f_collection_length1 = 0;
		gint _f_collection_size_ = 0;
		gint f_it = 0;
#line 122 "../lib/Services/System.vala"
		f_collection = files;
#line 122 "../lib/Services/System.vala"
		f_collection_length1 = files_length1;
#line 122 "../lib/Services/System.vala"
		for (f_it = 0; f_it < f_collection_length1; f_it = f_it + 1) {
#line 461 "System.c"
			GFile* _tmp4_;
			GFile* f = NULL;
#line 122 "../lib/Services/System.vala"
			_tmp4_ = _g_object_ref0 (f_collection[f_it]);
#line 122 "../lib/Services/System.vala"
			f = _tmp4_;
#line 468 "System.c"
			{
				gchar* path = NULL;
				GFile* _tmp5_;
				gchar* _tmp6_;
				gboolean _tmp7_ = FALSE;
				gboolean _tmp8_ = FALSE;
				const gchar* _tmp9_;
#line 123 "../lib/Services/System.vala"
				_tmp5_ = f;
#line 123 "../lib/Services/System.vala"
				_tmp6_ = g_file_get_path (_tmp5_);
#line 123 "../lib/Services/System.vala"
				path = _tmp6_;
#line 124 "../lib/Services/System.vala"
				_tmp9_ = path;
#line 124 "../lib/Services/System.vala"
				if (_tmp9_ != NULL) {
#line 486 "System.c"
					const gchar* _tmp10_;
#line 124 "../lib/Services/System.vala"
					_tmp10_ = path;
#line 124 "../lib/Services/System.vala"
					_tmp8_ = g_strcmp0 (_tmp10_, "") != 0;
#line 492 "System.c"
				} else {
#line 124 "../lib/Services/System.vala"
					_tmp8_ = FALSE;
#line 496 "System.c"
				}
#line 124 "../lib/Services/System.vala"
				if (_tmp8_) {
#line 500 "System.c"
					gboolean _tmp11_ = FALSE;
					GFile* _tmp12_;
#line 124 "../lib/Services/System.vala"
					_tmp12_ = f;
#line 124 "../lib/Services/System.vala"
					if (g_file_is_native (_tmp12_)) {
#line 124 "../lib/Services/System.vala"
						_tmp11_ = TRUE;
#line 509 "System.c"
					} else {
						const gchar* _tmp13_;
#line 124 "../lib/Services/System.vala"
						_tmp13_ = path;
#line 124 "../lib/Services/System.vala"
						_tmp11_ = plank_system_path_is_mounted (_tmp13_);
#line 516 "System.c"
					}
#line 124 "../lib/Services/System.vala"
					_tmp7_ = _tmp11_;
#line 520 "System.c"
				} else {
#line 124 "../lib/Services/System.vala"
					_tmp7_ = FALSE;
#line 524 "System.c"
				}
#line 124 "../lib/Services/System.vala"
				if (_tmp7_) {
#line 528 "System.c"
					GFile* _tmp14_;
					GFile* _tmp15_;
#line 125 "../lib/Services/System.vala"
					_tmp14_ = f;
#line 125 "../lib/Services/System.vala"
					_tmp15_ = _g_object_ref0 (_tmp14_);
#line 125 "../lib/Services/System.vala"
					mounted_files = g_list_append (mounted_files, _tmp15_);
#line 126 "../lib/Services/System.vala"
					_g_free0 (path);
#line 126 "../lib/Services/System.vala"
					_g_object_unref0 (f);
#line 126 "../lib/Services/System.vala"
					continue;
#line 543 "System.c"
				}
				{
					GFile* _tmp16_;
					gchar* _tmp17_;
					gchar* _tmp18_;
					GAppLaunchContext* _tmp19_;
#line 130 "../lib/Services/System.vala"
					_tmp16_ = f;
#line 130 "../lib/Services/System.vala"
					_tmp17_ = g_file_get_uri (_tmp16_);
#line 130 "../lib/Services/System.vala"
					_tmp18_ = _tmp17_;
#line 130 "../lib/Services/System.vala"
					_tmp19_ = self->priv->_context;
#line 130 "../lib/Services/System.vala"
					g_app_info_launch_default_for_uri (_tmp18_, _tmp19_, &_inner_error0_);
#line 130 "../lib/Services/System.vala"
					_g_free0 (_tmp18_);
#line 130 "../lib/Services/System.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 564 "System.c"
						goto __catch0_g_error;
					}
				}
				goto __finally0;
				__catch0_g_error:
				{
					GFile* _tmp20_;
					GFile* _tmp21_;
					GFile* _tmp22_;
#line 129 "../lib/Services/System.vala"
					g_clear_error (&_inner_error0_);
#line 132 "../lib/Services/System.vala"
					_tmp20_ = f;
#line 132 "../lib/Services/System.vala"
					g_file_mount_enclosing_volume (_tmp20_, 0, NULL, NULL, NULL, NULL);
#line 133 "../lib/Services/System.vala"
					_tmp21_ = f;
#line 133 "../lib/Services/System.vala"
					_tmp22_ = _g_object_ref0 (_tmp21_);
#line 133 "../lib/Services/System.vala"
					mounted_files = g_list_append (mounted_files, _tmp22_);
#line 586 "System.c"
				}
				__finally0:
#line 129 "../lib/Services/System.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 129 "../lib/Services/System.vala"
					_g_free0 (path);
#line 129 "../lib/Services/System.vala"
					_g_object_unref0 (f);
#line 129 "../lib/Services/System.vala"
					(mounted_files == NULL) ? NULL : (mounted_files = (_g_list_free__g_object_unref0_ (mounted_files), NULL));
#line 129 "../lib/Services/System.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 129 "../lib/Services/System.vala"
					g_clear_error (&_inner_error0_);
#line 129 "../lib/Services/System.vala"
					return;
#line 603 "System.c"
				}
#line 122 "../lib/Services/System.vala"
				_g_free0 (path);
#line 122 "../lib/Services/System.vala"
				_g_object_unref0 (f);
#line 609 "System.c"
			}
		}
	}
#line 137 "../lib/Services/System.vala"
	_tmp24_ = mounted_files;
#line 137 "../lib/Services/System.vala"
	if (g_list_length (_tmp24_) > ((guint) 0)) {
#line 137 "../lib/Services/System.vala"
		_tmp23_ = TRUE;
#line 619 "System.c"
	} else {
#line 137 "../lib/Services/System.vala"
		_tmp23_ = files_length1 == 0;
#line 623 "System.c"
	}
#line 137 "../lib/Services/System.vala"
	if (_tmp23_) {
#line 627 "System.c"
		GList* _tmp25_;
#line 138 "../lib/Services/System.vala"
		_tmp25_ = mounted_files;
#line 138 "../lib/Services/System.vala"
		plank_system_internal_launch (self, app, _tmp25_);
#line 633 "System.c"
	}
#line 112 "../lib/Services/System.vala"
	(mounted_files == NULL) ? NULL : (mounted_files = (_g_list_free__g_object_unref0_ (mounted_files), NULL));
#line 637 "System.c"
}

static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gchar* _tmp0_;
	gboolean result = FALSE;
#line 1538 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1538 "glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1539 "glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1539 "glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1539 "glib-2.0.vapi"
	return result;
#line 656 "System.c"
}

static gboolean
plank_system_path_is_mounted (const gchar* path)
{
	GVolumeMonitor* _tmp0_;
	GVolumeMonitor* _tmp1_;
	GList* _tmp2_;
	GList* _tmp3_;
	gboolean result = FALSE;
#line 141 "../lib/Services/System.vala"
	g_return_val_if_fail (path != NULL, FALSE);
#line 143 "../lib/Services/System.vala"
	_tmp0_ = g_volume_monitor_get ();
#line 143 "../lib/Services/System.vala"
	_tmp1_ = _tmp0_;
#line 143 "../lib/Services/System.vala"
	_tmp2_ = g_volume_monitor_get_mounts (_tmp1_);
#line 143 "../lib/Services/System.vala"
	_tmp3_ = _tmp2_;
#line 143 "../lib/Services/System.vala"
	_g_object_unref0 (_tmp1_);
#line 679 "System.c"
	{
		GList* m_collection = NULL;
		GList* m_it = NULL;
#line 143 "../lib/Services/System.vala"
		m_collection = _tmp3_;
#line 143 "../lib/Services/System.vala"
		for (m_it = m_collection; m_it != NULL; m_it = m_it->next) {
#line 687 "System.c"
			GMount* _tmp4_;
			GMount* m = NULL;
#line 143 "../lib/Services/System.vala"
			_tmp4_ = _g_object_ref0 ((GMount*) m_it->data);
#line 143 "../lib/Services/System.vala"
			m = _tmp4_;
#line 694 "System.c"
			{
				GFile* m_root = NULL;
				GMount* _tmp5_;
				GFile* _tmp6_;
				GFile* _tmp7_;
				gchar* m_path = NULL;
				GFile* _tmp8_;
				gchar* _tmp9_;
				gboolean _tmp10_ = FALSE;
				const gchar* _tmp11_;
#line 144 "../lib/Services/System.vala"
				_tmp5_ = m;
#line 144 "../lib/Services/System.vala"
				_tmp6_ = g_mount_get_root (_tmp5_);
#line 144 "../lib/Services/System.vala"
				m_root = _tmp6_;
#line 145 "../lib/Services/System.vala"
				_tmp7_ = m_root;
#line 145 "../lib/Services/System.vala"
				if (_tmp7_ == NULL) {
#line 146 "../lib/Services/System.vala"
					_g_object_unref0 (m_root);
#line 146 "../lib/Services/System.vala"
					_g_object_unref0 (m);
#line 146 "../lib/Services/System.vala"
					continue;
#line 721 "System.c"
				}
#line 148 "../lib/Services/System.vala"
				_tmp8_ = m_root;
#line 148 "../lib/Services/System.vala"
				_tmp9_ = g_file_get_path (_tmp8_);
#line 148 "../lib/Services/System.vala"
				m_path = _tmp9_;
#line 149 "../lib/Services/System.vala"
				_tmp11_ = m_path;
#line 149 "../lib/Services/System.vala"
				if (_tmp11_ != NULL) {
#line 733 "System.c"
					const gchar* _tmp12_;
#line 149 "../lib/Services/System.vala"
					_tmp12_ = m_path;
#line 149 "../lib/Services/System.vala"
					_tmp10_ = string_contains (path, _tmp12_);
#line 739 "System.c"
				} else {
#line 149 "../lib/Services/System.vala"
					_tmp10_ = FALSE;
#line 743 "System.c"
				}
#line 149 "../lib/Services/System.vala"
				if (_tmp10_) {
#line 150 "../lib/Services/System.vala"
					result = TRUE;
#line 150 "../lib/Services/System.vala"
					_g_free0 (m_path);
#line 150 "../lib/Services/System.vala"
					_g_object_unref0 (m_root);
#line 150 "../lib/Services/System.vala"
					_g_object_unref0 (m);
#line 150 "../lib/Services/System.vala"
					(m_collection == NULL) ? NULL : (m_collection = (_g_list_free__g_object_unref0_ (m_collection), NULL));
#line 150 "../lib/Services/System.vala"
					return result;
#line 759 "System.c"
				}
#line 143 "../lib/Services/System.vala"
				_g_free0 (m_path);
#line 143 "../lib/Services/System.vala"
				_g_object_unref0 (m_root);
#line 143 "../lib/Services/System.vala"
				_g_object_unref0 (m);
#line 767 "System.c"
			}
		}
#line 143 "../lib/Services/System.vala"
		(m_collection == NULL) ? NULL : (m_collection = (_g_list_free__g_object_unref0_ (m_collection), NULL));
#line 772 "System.c"
	}
#line 153 "../lib/Services/System.vala"
	result = FALSE;
#line 153 "../lib/Services/System.vala"
	return result;
#line 778 "System.c"
}

static void
_g_free0_ (gpointer var)
{
#line 228 "../lib/Services/System.vala"
	var = (g_free (var), NULL);
#line 786 "System.c"
}

static inline void
_g_list_free__g_free0_ (GList* self)
{
#line 228 "../lib/Services/System.vala"
	g_list_free_full (self, (GDestroyNotify) _g_free0_);
#line 794 "System.c"
}

static void
plank_system_internal_launch (PlankSystem* self,
                              GFile* app,
                              GList* files)
{
	gboolean _tmp0_ = FALSE;
	GAppInfo* info = NULL;
	GAppInfo* _tmp33_;
	GError* _inner_error0_ = NULL;
#line 156 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 158 "../lib/Services/System.vala"
	if (app == NULL) {
#line 158 "../lib/Services/System.vala"
		_tmp0_ = g_list_length (files) == ((guint) 0);
#line 812 "System.c"
	} else {
#line 158 "../lib/Services/System.vala"
		_tmp0_ = FALSE;
#line 816 "System.c"
	}
#line 158 "../lib/Services/System.vala"
	if (_tmp0_) {
#line 159 "../lib/Services/System.vala"
		return;
#line 822 "System.c"
	}
#line 161 "../lib/Services/System.vala"
	info = NULL;
#line 163 "../lib/Services/System.vala"
	if (app != NULL) {
#line 828 "System.c"
		GKeyFile* keyfile = NULL;
		gchar* launcher = NULL;
		gchar* _tmp1_;
		const gchar* _tmp24_;
		GDesktopAppInfo* _tmp25_;
#line 165 "../lib/Services/System.vala"
		_tmp1_ = g_file_get_path (app);
#line 165 "../lib/Services/System.vala"
		launcher = _tmp1_;
#line 838 "System.c"
		{
			GKeyFile* _tmp2_;
			GKeyFile* _tmp3_;
			const gchar* _tmp4_;
#line 168 "../lib/Services/System.vala"
			_tmp2_ = g_key_file_new ();
#line 168 "../lib/Services/System.vala"
			_g_key_file_unref0 (keyfile);
#line 168 "../lib/Services/System.vala"
			keyfile = _tmp2_;
#line 169 "../lib/Services/System.vala"
			_tmp3_ = keyfile;
#line 169 "../lib/Services/System.vala"
			_tmp4_ = launcher;
#line 169 "../lib/Services/System.vala"
			g_key_file_load_from_file (_tmp3_, _tmp4_, G_KEY_FILE_NONE, &_inner_error0_);
#line 169 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 857 "System.c"
				goto __catch0_g_error;
			}
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			const gchar* _tmp5_;
			GError* _tmp6_;
			const gchar* _tmp7_;
#line 167 "../lib/Services/System.vala"
			e = _inner_error0_;
#line 167 "../lib/Services/System.vala"
			_inner_error0_ = NULL;
#line 171 "../lib/Services/System.vala"
			_tmp5_ = launcher;
#line 171 "../lib/Services/System.vala"
			_tmp6_ = e;
#line 171 "../lib/Services/System.vala"
			_tmp7_ = _tmp6_->message;
#line 171 "../lib/Services/System.vala"
			g_critical ("System.vala:171: %s: %s", _tmp5_, _tmp7_);
#line 172 "../lib/Services/System.vala"
			_g_error_free0 (e);
#line 172 "../lib/Services/System.vala"
			_g_free0 (launcher);
#line 172 "../lib/Services/System.vala"
			_g_key_file_unref0 (keyfile);
#line 172 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 172 "../lib/Services/System.vala"
			return;
#line 890 "System.c"
		}
		__finally0:
#line 167 "../lib/Services/System.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 167 "../lib/Services/System.vala"
			_g_free0 (launcher);
#line 167 "../lib/Services/System.vala"
			_g_key_file_unref0 (keyfile);
#line 167 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 167 "../lib/Services/System.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 167 "../lib/Services/System.vala"
			g_clear_error (&_inner_error0_);
#line 167 "../lib/Services/System.vala"
			return;
#line 907 "System.c"
		}
		{
			gchar* type = NULL;
			GKeyFile* _tmp8_;
			gchar* _tmp9_;
			const gchar* _tmp10_;
			const gchar* _tmp11_;
			GQuark _tmp13_ = 0U;
#line 176 "../lib/Services/System.vala"
			_tmp8_ = keyfile;
#line 176 "../lib/Services/System.vala"
			_tmp9_ = g_key_file_get_string (_tmp8_, G_KEY_FILE_DESKTOP_GROUP, G_KEY_FILE_DESKTOP_KEY_TYPE, &_inner_error0_);
#line 176 "../lib/Services/System.vala"
			type = _tmp9_;
#line 176 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 176 "../lib/Services/System.vala"
				if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 926 "System.c"
					goto __catch1_g_key_file_error;
				}
#line 176 "../lib/Services/System.vala"
				_g_free0 (launcher);
#line 176 "../lib/Services/System.vala"
				_g_key_file_unref0 (keyfile);
#line 176 "../lib/Services/System.vala"
				_g_object_unref0 (info);
#line 176 "../lib/Services/System.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 176 "../lib/Services/System.vala"
				g_clear_error (&_inner_error0_);
#line 176 "../lib/Services/System.vala"
				return;
#line 941 "System.c"
			}
#line 177 "../lib/Services/System.vala"
			_tmp10_ = type;
#line 177 "../lib/Services/System.vala"
			_tmp11_ = _tmp10_;
#line 177 "../lib/Services/System.vala"
			_tmp13_ = (NULL == _tmp11_) ? 0 : g_quark_from_string (_tmp11_);
#line 177 "../lib/Services/System.vala"
			if (_tmp13_ == g_quark_from_string (G_KEY_FILE_DESKTOP_TYPE_LINK)) {
#line 177 "../lib/Services/System.vala"
				switch (0) {
#line 953 "System.c"
					default:
					{
						{
							gchar* url = NULL;
							GKeyFile* _tmp14_;
							gchar* _tmp15_;
							const gchar* _tmp16_;
							GAppLaunchContext* _tmp17_;
#line 184 "../lib/Services/System.vala"
							_tmp14_ = keyfile;
#line 184 "../lib/Services/System.vala"
							_tmp15_ = g_key_file_get_string (_tmp14_, G_KEY_FILE_DESKTOP_GROUP, G_KEY_FILE_DESKTOP_KEY_URL, &_inner_error0_);
#line 184 "../lib/Services/System.vala"
							url = _tmp15_;
#line 184 "../lib/Services/System.vala"
							if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 970 "System.c"
								goto __catch2_g_error;
							}
#line 185 "../lib/Services/System.vala"
							_tmp16_ = url;
#line 185 "../lib/Services/System.vala"
							_tmp17_ = self->priv->_context;
#line 185 "../lib/Services/System.vala"
							g_app_info_launch_default_for_uri (_tmp16_, _tmp17_, &_inner_error0_);
#line 185 "../lib/Services/System.vala"
							if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 185 "../lib/Services/System.vala"
								_g_free0 (url);
#line 983 "System.c"
								goto __catch2_g_error;
							}
#line 183 "../lib/Services/System.vala"
							_g_free0 (url);
#line 988 "System.c"
						}
						goto __finally2;
						__catch2_g_error:
						{
							GError* e = NULL;
							const gchar* _tmp18_;
							GError* _tmp19_;
							const gchar* _tmp20_;
#line 183 "../lib/Services/System.vala"
							e = _inner_error0_;
#line 183 "../lib/Services/System.vala"
							_inner_error0_ = NULL;
#line 187 "../lib/Services/System.vala"
							_tmp18_ = launcher;
#line 187 "../lib/Services/System.vala"
							_tmp19_ = e;
#line 187 "../lib/Services/System.vala"
							_tmp20_ = _tmp19_->message;
#line 187 "../lib/Services/System.vala"
							g_critical ("System.vala:187: %s: %s", _tmp18_, _tmp20_);
#line 183 "../lib/Services/System.vala"
							_g_error_free0 (e);
#line 1011 "System.c"
						}
						__finally2:
#line 183 "../lib/Services/System.vala"
						if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 183 "../lib/Services/System.vala"
							_g_free0 (type);
#line 183 "../lib/Services/System.vala"
							if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
#line 1020 "System.c"
								goto __catch1_g_key_file_error;
							}
#line 183 "../lib/Services/System.vala"
							_g_free0 (launcher);
#line 183 "../lib/Services/System.vala"
							_g_key_file_unref0 (keyfile);
#line 183 "../lib/Services/System.vala"
							_g_object_unref0 (info);
#line 183 "../lib/Services/System.vala"
							g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 183 "../lib/Services/System.vala"
							g_clear_error (&_inner_error0_);
#line 183 "../lib/Services/System.vala"
							return;
#line 1035 "System.c"
						}
#line 189 "../lib/Services/System.vala"
						_g_free0 (type);
#line 189 "../lib/Services/System.vala"
						_g_free0 (launcher);
#line 189 "../lib/Services/System.vala"
						_g_key_file_unref0 (keyfile);
#line 189 "../lib/Services/System.vala"
						_g_object_unref0 (info);
#line 189 "../lib/Services/System.vala"
						return;
#line 1047 "System.c"
					}
				}
			} else {
#line 177 "../lib/Services/System.vala"
				switch (0) {
#line 1053 "System.c"
					default:
					{
#line 181 "../lib/Services/System.vala"
						break;
#line 1058 "System.c"
					}
				}
			}
#line 175 "../lib/Services/System.vala"
			_g_free0 (type);
#line 1064 "System.c"
		}
		goto __finally1;
		__catch1_g_key_file_error:
		{
			GError* e = NULL;
			const gchar* _tmp21_;
			GError* _tmp22_;
			const gchar* _tmp23_;
#line 175 "../lib/Services/System.vala"
			e = _inner_error0_;
#line 175 "../lib/Services/System.vala"
			_inner_error0_ = NULL;
#line 192 "../lib/Services/System.vala"
			_tmp21_ = launcher;
#line 192 "../lib/Services/System.vala"
			_tmp22_ = e;
#line 192 "../lib/Services/System.vala"
			_tmp23_ = _tmp22_->message;
#line 192 "../lib/Services/System.vala"
			g_critical ("System.vala:192: %s: %s", _tmp21_, _tmp23_);
#line 193 "../lib/Services/System.vala"
			_g_error_free0 (e);
#line 193 "../lib/Services/System.vala"
			_g_free0 (launcher);
#line 193 "../lib/Services/System.vala"
			_g_key_file_unref0 (keyfile);
#line 193 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 193 "../lib/Services/System.vala"
			return;
#line 1095 "System.c"
		}
		__finally1:
#line 175 "../lib/Services/System.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 175 "../lib/Services/System.vala"
			_g_free0 (launcher);
#line 175 "../lib/Services/System.vala"
			_g_key_file_unref0 (keyfile);
#line 175 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 175 "../lib/Services/System.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 175 "../lib/Services/System.vala"
			g_clear_error (&_inner_error0_);
#line 175 "../lib/Services/System.vala"
			return;
#line 1112 "System.c"
		}
#line 196 "../lib/Services/System.vala"
		_tmp24_ = launcher;
#line 196 "../lib/Services/System.vala"
		_tmp25_ = g_desktop_app_info_new_from_filename (_tmp24_);
#line 196 "../lib/Services/System.vala"
		_g_object_unref0 (info);
#line 196 "../lib/Services/System.vala"
		info = (GAppInfo*) _tmp25_;
#line 163 "../lib/Services/System.vala"
		_g_free0 (launcher);
#line 163 "../lib/Services/System.vala"
		_g_key_file_unref0 (keyfile);
#line 1126 "System.c"
	} else {
		{
			GAppInfo* _tmp26_ = NULL;
			GList* _tmp27_;
			gconstpointer _tmp28_;
			GAppInfo* _tmp29_;
			GAppInfo* _tmp30_;
#line 199 "../lib/Services/System.vala"
			_tmp27_ = g_list_first (files);
#line 199 "../lib/Services/System.vala"
			_tmp28_ = _tmp27_->data;
#line 199 "../lib/Services/System.vala"
			_tmp29_ = g_file_query_default_handler ((GFile*) _tmp28_, NULL, &_inner_error0_);
#line 199 "../lib/Services/System.vala"
			_tmp26_ = _tmp29_;
#line 199 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1144 "System.c"
				goto __catch3_g_error;
			}
#line 199 "../lib/Services/System.vala"
			_tmp30_ = _tmp26_;
#line 199 "../lib/Services/System.vala"
			_tmp26_ = NULL;
#line 199 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 199 "../lib/Services/System.vala"
			info = _tmp30_;
#line 198 "../lib/Services/System.vala"
			_g_object_unref0 (_tmp26_);
#line 1157 "System.c"
		}
		goto __finally3;
		__catch3_g_error:
		{
			GError* e = NULL;
			GError* _tmp31_;
			const gchar* _tmp32_;
#line 198 "../lib/Services/System.vala"
			e = _inner_error0_;
#line 198 "../lib/Services/System.vala"
			_inner_error0_ = NULL;
#line 201 "../lib/Services/System.vala"
			_tmp31_ = e;
#line 201 "../lib/Services/System.vala"
			_tmp32_ = _tmp31_->message;
#line 201 "../lib/Services/System.vala"
			g_critical ("System.vala:201: %s", _tmp32_);
#line 198 "../lib/Services/System.vala"
			_g_error_free0 (e);
#line 1177 "System.c"
		}
		__finally3:
#line 198 "../lib/Services/System.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 198 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 198 "../lib/Services/System.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 198 "../lib/Services/System.vala"
			g_clear_error (&_inner_error0_);
#line 198 "../lib/Services/System.vala"
			return;
#line 1190 "System.c"
		}
	}
#line 205 "../lib/Services/System.vala"
	_tmp33_ = info;
#line 205 "../lib/Services/System.vala"
	if (_tmp33_ == NULL) {
#line 1197 "System.c"
		gchar* _tmp34_ = NULL;
#line 207 "../lib/Services/System.vala"
		if (app != NULL) {
#line 1201 "System.c"
			gchar* _tmp35_;
#line 207 "../lib/Services/System.vala"
			_tmp35_ = g_file_get_path (app);
#line 207 "../lib/Services/System.vala"
			_g_free0 (_tmp34_);
#line 207 "../lib/Services/System.vala"
			_tmp34_ = _tmp35_;
#line 1209 "System.c"
		} else {
			GList* _tmp36_;
			gconstpointer _tmp37_;
			gchar* _tmp38_;
#line 207 "../lib/Services/System.vala"
			_tmp36_ = g_list_first (files);
#line 207 "../lib/Services/System.vala"
			_tmp37_ = _tmp36_->data;
#line 207 "../lib/Services/System.vala"
			_tmp38_ = g_file_get_path ((GFile*) _tmp37_);
#line 207 "../lib/Services/System.vala"
			_g_free0 (_tmp34_);
#line 207 "../lib/Services/System.vala"
			_tmp34_ = _tmp38_;
#line 1224 "System.c"
		}
#line 206 "../lib/Services/System.vala"
		g_critical ("System.vala:206: Unable to use application/file '%s' for execution.", _tmp34_);
#line 208 "../lib/Services/System.vala"
		_g_free0 (_tmp34_);
#line 208 "../lib/Services/System.vala"
		_g_object_unref0 (info);
#line 208 "../lib/Services/System.vala"
		return;
#line 1234 "System.c"
	}
	{
		GAppInfo* _tmp39_;
		const gchar* _tmp40_;
		GAppInfo* _tmp41_;
		const gchar* _tmp42_;
		GAppInfo* _tmp45_;
		GAppInfo* _tmp48_;
		GAppInfo* _tmp55_;
		const gchar* _tmp56_;
#line 212 "../lib/Services/System.vala"
		_tmp39_ = info;
#line 212 "../lib/Services/System.vala"
		_tmp40_ = g_app_info_get_name (_tmp39_);
#line 212 "../lib/Services/System.vala"
		_tmp41_ = info;
#line 212 "../lib/Services/System.vala"
		_tmp42_ = g_app_info_get_executable (_tmp41_);
#line 212 "../lib/Services/System.vala"
		plank_logger_verbose ("Launch '%s' ('%s')", _tmp40_, _tmp42_, NULL);
#line 214 "../lib/Services/System.vala"
		if (g_list_length (files) == ((guint) 0)) {
#line 1257 "System.c"
			GAppInfo* _tmp43_;
			GAppLaunchContext* _tmp44_;
#line 215 "../lib/Services/System.vala"
			_tmp43_ = info;
#line 215 "../lib/Services/System.vala"
			_tmp44_ = self->priv->_context;
#line 215 "../lib/Services/System.vala"
			g_app_info_launch (_tmp43_, NULL, _tmp44_, &_inner_error0_);
#line 215 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1268 "System.c"
				goto __catch4_g_error;
			}
#line 216 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 216 "../lib/Services/System.vala"
			return;
#line 1275 "System.c"
		}
#line 219 "../lib/Services/System.vala"
		_tmp45_ = info;
#line 219 "../lib/Services/System.vala"
		if (g_app_info_supports_files (_tmp45_)) {
#line 1281 "System.c"
			GAppInfo* _tmp46_;
			GAppLaunchContext* _tmp47_;
#line 220 "../lib/Services/System.vala"
			_tmp46_ = info;
#line 220 "../lib/Services/System.vala"
			_tmp47_ = self->priv->_context;
#line 220 "../lib/Services/System.vala"
			g_app_info_launch (_tmp46_, files, _tmp47_, &_inner_error0_);
#line 220 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1292 "System.c"
				goto __catch4_g_error;
			}
#line 221 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 221 "../lib/Services/System.vala"
			return;
#line 1299 "System.c"
		}
#line 224 "../lib/Services/System.vala"
		_tmp48_ = info;
#line 224 "../lib/Services/System.vala"
		if (g_app_info_supports_uris (_tmp48_)) {
#line 1305 "System.c"
			GList* uris = NULL;
			GAppInfo* _tmp52_;
			GList* _tmp53_;
			GAppLaunchContext* _tmp54_;
#line 225 "../lib/Services/System.vala"
			uris = NULL;
#line 1312 "System.c"
			{
				GList* f_collection = NULL;
				GList* f_it = NULL;
#line 226 "../lib/Services/System.vala"
				f_collection = files;
#line 226 "../lib/Services/System.vala"
				for (f_it = f_collection; f_it != NULL; f_it = f_it->next) {
#line 1320 "System.c"
					GFile* _tmp49_;
					GFile* f = NULL;
#line 226 "../lib/Services/System.vala"
					_tmp49_ = _g_object_ref0 ((GFile*) f_it->data);
#line 226 "../lib/Services/System.vala"
					f = _tmp49_;
#line 1327 "System.c"
					{
						GFile* _tmp50_;
						gchar* _tmp51_;
#line 227 "../lib/Services/System.vala"
						_tmp50_ = f;
#line 227 "../lib/Services/System.vala"
						_tmp51_ = g_file_get_uri (_tmp50_);
#line 227 "../lib/Services/System.vala"
						uris = g_list_append (uris, _tmp51_);
#line 226 "../lib/Services/System.vala"
						_g_object_unref0 (f);
#line 1339 "System.c"
					}
				}
			}
#line 228 "../lib/Services/System.vala"
			_tmp52_ = info;
#line 228 "../lib/Services/System.vala"
			_tmp53_ = uris;
#line 228 "../lib/Services/System.vala"
			_tmp54_ = self->priv->_context;
#line 228 "../lib/Services/System.vala"
			g_app_info_launch_uris (_tmp52_, _tmp53_, _tmp54_, &_inner_error0_);
#line 228 "../lib/Services/System.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 228 "../lib/Services/System.vala"
				(uris == NULL) ? NULL : (uris = (_g_list_free__g_free0_ (uris), NULL));
#line 1355 "System.c"
				goto __catch4_g_error;
			}
#line 229 "../lib/Services/System.vala"
			(uris == NULL) ? NULL : (uris = (_g_list_free__g_free0_ (uris), NULL));
#line 229 "../lib/Services/System.vala"
			_g_object_unref0 (info);
#line 229 "../lib/Services/System.vala"
			return;
#line 1364 "System.c"
		}
#line 232 "../lib/Services/System.vala"
		_tmp55_ = info;
#line 232 "../lib/Services/System.vala"
		_tmp56_ = g_app_info_get_name (_tmp55_);
#line 232 "../lib/Services/System.vala"
		g_warning ("System.vala:232: The application '%s' doesn't support files/URIs or wa" \
"sn't found.", _tmp56_);
#line 1372 "System.c"
	}
	goto __finally4;
	__catch4_g_error:
	{
		GError* e = NULL;
		GError* _tmp57_;
		const gchar* _tmp58_;
#line 211 "../lib/Services/System.vala"
		e = _inner_error0_;
#line 211 "../lib/Services/System.vala"
		_inner_error0_ = NULL;
#line 234 "../lib/Services/System.vala"
		_tmp57_ = e;
#line 234 "../lib/Services/System.vala"
		_tmp58_ = _tmp57_->message;
#line 234 "../lib/Services/System.vala"
		g_critical ("System.vala:234: %s", _tmp58_);
#line 211 "../lib/Services/System.vala"
		_g_error_free0 (e);
#line 1392 "System.c"
	}
	__finally4:
#line 211 "../lib/Services/System.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 211 "../lib/Services/System.vala"
		_g_object_unref0 (info);
#line 211 "../lib/Services/System.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 211 "../lib/Services/System.vala"
		g_clear_error (&_inner_error0_);
#line 211 "../lib/Services/System.vala"
		return;
#line 1405 "System.c"
	}
#line 156 "../lib/Services/System.vala"
	_g_object_unref0 (info);
#line 1409 "System.c"
}

GAppLaunchContext*
plank_system_get_context (PlankSystem* self)
{
	GAppLaunchContext* result;
	GAppLaunchContext* _tmp0_;
#line 37 "../lib/Services/System.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 37 "../lib/Services/System.vala"
	_tmp0_ = self->priv->_context;
#line 37 "../lib/Services/System.vala"
	result = _tmp0_;
#line 37 "../lib/Services/System.vala"
	return result;
#line 1425 "System.c"
}

static void
plank_system_set_context (PlankSystem* self,
                          GAppLaunchContext* value)
{
	GAppLaunchContext* old_value;
#line 37 "../lib/Services/System.vala"
	g_return_if_fail (self != NULL);
#line 37 "../lib/Services/System.vala"
	old_value = plank_system_get_context (self);
#line 37 "../lib/Services/System.vala"
	if (old_value != value) {
#line 1439 "System.c"
		GAppLaunchContext* _tmp0_;
#line 37 "../lib/Services/System.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 37 "../lib/Services/System.vala"
		_g_object_unref0 (self->priv->_context);
#line 37 "../lib/Services/System.vala"
		self->priv->_context = _tmp0_;
#line 37 "../lib/Services/System.vala"
		g_object_notify_by_pspec ((GObject *) self, plank_system_properties[PLANK_SYSTEM_CONTEXT_PROPERTY]);
#line 1449 "System.c"
	}
}

static GObject *
plank_system_constructor (GType type,
                          guint n_construct_properties,
                          GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	PlankSystem * self;
	GAppLaunchContext* _tmp0_;
	GAppLaunchContext* _tmp1_;
#line 44 "../lib/Services/System.vala"
	parent_class = G_OBJECT_CLASS (plank_system_parent_class);
#line 44 "../lib/Services/System.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 44 "../lib/Services/System.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PLANK_TYPE_SYSTEM, PlankSystem);
#line 46 "../lib/Services/System.vala"
	_tmp0_ = self->priv->_context;
#line 46 "../lib/Services/System.vala"
	g_signal_connect_object (_tmp0_, "launch-failed", (GCallback) _plank_system_on_launch_failed_g_app_launch_context_launch_failed, self, 0);
#line 47 "../lib/Services/System.vala"
	_tmp1_ = self->priv->_context;
#line 47 "../lib/Services/System.vala"
	g_signal_connect_object (_tmp1_, "launched", (GCallback) _plank_system_on_launched_g_app_launch_context_launched, self, 0);
#line 44 "../lib/Services/System.vala"
	return obj;
#line 1479 "System.c"
}

static void
plank_system_class_init (PlankSystemClass * klass,
                         gpointer klass_data)
{
#line 25 "../lib/Services/System.vala"
	plank_system_parent_class = g_type_class_peek_parent (klass);
#line 25 "../lib/Services/System.vala"
	g_type_class_adjust_private_offset (klass, &PlankSystem_private_offset);
#line 25 "../lib/Services/System.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_plank_system_get_property;
#line 25 "../lib/Services/System.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_plank_system_set_property;
#line 25 "../lib/Services/System.vala"
	G_OBJECT_CLASS (klass)->constructor = plank_system_constructor;
#line 25 "../lib/Services/System.vala"
	G_OBJECT_CLASS (klass)->finalize = plank_system_finalize;
#line 25 "../lib/Services/System.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), PLANK_SYSTEM_CONTEXT_PROPERTY, plank_system_properties[PLANK_SYSTEM_CONTEXT_PROPERTY] = g_param_spec_object ("context", "context", "context", g_app_launch_context_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 1500 "System.c"
}

static void
plank_system_instance_init (PlankSystem * self,
                            gpointer klass)
{
#line 25 "../lib/Services/System.vala"
	self->priv = plank_system_get_instance_private (self);
#line 1509 "System.c"
}

static void
plank_system_finalize (GObject * obj)
{
	PlankSystem * self;
	GAppLaunchContext* _tmp0_;
	guint _tmp1_;
	GAppLaunchContext* _tmp2_;
	guint _tmp3_;
#line 25 "../lib/Services/System.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PLANK_TYPE_SYSTEM, PlankSystem);
#line 52 "../lib/Services/System.vala"
	_tmp0_ = self->priv->_context;
#line 52 "../lib/Services/System.vala"
	g_signal_parse_name ("launch-failed", g_app_launch_context_get_type (), &_tmp1_, NULL, FALSE);
#line 52 "../lib/Services/System.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _plank_system_on_launch_failed_g_app_launch_context_launch_failed, self);
#line 53 "../lib/Services/System.vala"
	_tmp2_ = self->priv->_context;
#line 53 "../lib/Services/System.vala"
	g_signal_parse_name ("launched", g_app_launch_context_get_type (), &_tmp3_, NULL, FALSE);
#line 53 "../lib/Services/System.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _plank_system_on_launched_g_app_launch_context_launched, self);
#line 37 "../lib/Services/System.vala"
	_g_object_unref0 (self->priv->_context);
#line 25 "../lib/Services/System.vala"
	G_OBJECT_CLASS (plank_system_parent_class)->finalize (obj);
#line 1538 "System.c"
}

/**
 * A utility class for launching applications and opening files/URIs.
 */
static GType
plank_system_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (PlankSystemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) plank_system_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PlankSystem), 0, (GInstanceInitFunc) plank_system_instance_init, NULL };
	GType plank_system_type_id;
	plank_system_type_id = g_type_register_static (G_TYPE_OBJECT, "PlankSystem", &g_define_type_info, 0);
	PlankSystem_private_offset = g_type_add_instance_private (plank_system_type_id, sizeof (PlankSystemPrivate));
	return plank_system_type_id;
}

GType
plank_system_get_type (void)
{
	static volatile gsize plank_system_type_id__volatile = 0;
	if (g_once_init_enter (&plank_system_type_id__volatile)) {
		GType plank_system_type_id;
		plank_system_type_id = plank_system_get_type_once ();
		g_once_init_leave (&plank_system_type_id__volatile, plank_system_type_id);
	}
	return plank_system_type_id__volatile;
}

static void
_vala_plank_system_get_property (GObject * object,
                                 guint property_id,
                                 GValue * value,
                                 GParamSpec * pspec)
{
	PlankSystem * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, PLANK_TYPE_SYSTEM, PlankSystem);
#line 25 "../lib/Services/System.vala"
	switch (property_id) {
#line 25 "../lib/Services/System.vala"
		case PLANK_SYSTEM_CONTEXT_PROPERTY:
#line 25 "../lib/Services/System.vala"
		g_value_set_object (value, plank_system_get_context (self));
#line 25 "../lib/Services/System.vala"
		break;
#line 1582 "System.c"
		default:
#line 25 "../lib/Services/System.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 25 "../lib/Services/System.vala"
		break;
#line 1588 "System.c"
	}
}

static void
_vala_plank_system_set_property (GObject * object,
                                 guint property_id,
                                 const GValue * value,
                                 GParamSpec * pspec)
{
	PlankSystem * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, PLANK_TYPE_SYSTEM, PlankSystem);
#line 25 "../lib/Services/System.vala"
	switch (property_id) {
#line 25 "../lib/Services/System.vala"
		case PLANK_SYSTEM_CONTEXT_PROPERTY:
#line 25 "../lib/Services/System.vala"
		plank_system_set_context (self, g_value_get_object (value));
#line 25 "../lib/Services/System.vala"
		break;
#line 1608 "System.c"
		default:
#line 25 "../lib/Services/System.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 25 "../lib/Services/System.vala"
		break;
#line 1614 "System.c"
	}
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
#line 114 "../lib/Services/EnvironmentSettings.vala"
	if ((array != NULL) && (destroy_func != NULL)) {
#line 1625 "System.c"
		gint i;
#line 114 "../lib/Services/EnvironmentSettings.vala"
		for (i = 0; i < array_length; i = i + 1) {
#line 114 "../lib/Services/EnvironmentSettings.vala"
			if (((gpointer*) array)[i] != NULL) {
#line 114 "../lib/Services/EnvironmentSettings.vala"
				destroy_func (((gpointer*) array)[i]);
#line 1633 "System.c"
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
#line 114 "../lib/Services/EnvironmentSettings.vala"
	_vala_array_destroy (array, array_length, destroy_func);
#line 114 "../lib/Services/EnvironmentSettings.vala"
	g_free (array);
#line 1648 "System.c"
}

