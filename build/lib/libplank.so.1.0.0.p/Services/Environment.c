/* Environment.c generated by valac 0.48.17, the Vala compiler
 * generated from Environment.vala, do not modify */

/**/
/*  Copyright (C) 2015 Rico Tzschichholz*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gdk/gdk.h>
#include <gdk/gdkx.h>

typedef enum  {
	PLANK_XDG_SESSION_CLASS_USER,
	PLANK_XDG_SESSION_CLASS_GREETER,
	PLANK_XDG_SESSION_CLASS_LOCK_SCREEN,
	PLANK_XDG_SESSION_CLASS_BACKGROUND
} PlankXdgSessionClass;

#define PLANK_TYPE_XDG_SESSION_CLASS (plank_xdg_session_class_get_type ())
typedef enum  {
	PLANK_XDG_SESSION_DESKTOP_GNOME = 1 << 0,
	PLANK_XDG_SESSION_DESKTOP_KDE = 1 << 1,
	PLANK_XDG_SESSION_DESKTOP_LXDE = 1 << 2,
	PLANK_XDG_SESSION_DESKTOP_MATE = 1 << 3,
	PLANK_XDG_SESSION_DESKTOP_RAZOR = 1 << 4,
	PLANK_XDG_SESSION_DESKTOP_ROX = 1 << 5,
	PLANK_XDG_SESSION_DESKTOP_TDE = 1 << 6,
	PLANK_XDG_SESSION_DESKTOP_UNITY = 1 << 7,
	PLANK_XDG_SESSION_DESKTOP_XFCE = 1 << 8,
	PLANK_XDG_SESSION_DESKTOP_EDE = 1 << 9,
	PLANK_XDG_SESSION_DESKTOP_CINNAMON = 1 << 10,
	PLANK_XDG_SESSION_DESKTOP_PANTHEON = 1 << 11,
	PLANK_XDG_SESSION_DESKTOP_OLD = 1 << 12,
	PLANK_XDG_SESSION_DESKTOP_UBUNTU = 1 << 13
} PlankXdgSessionDesktop;

#define PLANK_TYPE_XDG_SESSION_DESKTOP (plank_xdg_session_desktop_get_type ())
typedef enum  {
	PLANK_XDG_SESSION_TYPE_UNSPECIFIED,
	PLANK_XDG_SESSION_TYPE_TTY,
	PLANK_XDG_SESSION_TYPE_X11,
	PLANK_XDG_SESSION_TYPE_WAYLAND,
	PLANK_XDG_SESSION_TYPE_MIR
} PlankXdgSessionType;

#define PLANK_TYPE_XDG_SESSION_TYPE (plank_xdg_session_type_get_type ())

extern PlankXdgSessionClass plank_session_class;
PlankXdgSessionClass plank_session_class = 0;
extern PlankXdgSessionDesktop plank_session_desktop;
PlankXdgSessionDesktop plank_session_desktop = 0U;
extern PlankXdgSessionType plank_session_type;
PlankXdgSessionType plank_session_type = 0;

GType plank_xdg_session_class_get_type (void) G_GNUC_CONST;
PlankXdgSessionClass plank_xdg_session_class_from_string (const gchar* s);
GType plank_xdg_session_desktop_get_type (void) G_GNUC_CONST;
static PlankXdgSessionDesktop plank_xdg_session_desktop_from_single_string (const gchar* s);
PlankXdgSessionDesktop plank_xdg_session_desktop_from_string (const gchar* s);
GType plank_xdg_session_type_get_type (void) G_GNUC_CONST;
PlankXdgSessionType plank_xdg_session_type_from_string (const gchar* s);
void plank_environment_initialize (void);
G_GNUC_INTERNAL PlankXdgSessionClass plank_get_xdg_session_class (void);
G_GNUC_INTERNAL PlankXdgSessionDesktop plank_get_xdg_session_desktop (void);
G_GNUC_INTERNAL PlankXdgSessionType plank_get_xdg_session_type (void);
gboolean plank_environment_is_session_class (PlankXdgSessionClass type);
gboolean plank_environment_is_session_desktop (PlankXdgSessionDesktop type);
gboolean plank_environment_is_session_type (PlankXdgSessionType type);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);

PlankXdgSessionClass
plank_xdg_session_class_from_string (const gchar* s)
{
	PlankXdgSessionClass _result_ = 0;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GQuark _tmp3_ = 0U;
#line 33 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label0 = 0;
#line 33 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label1 = 0;
#line 33 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label2 = 0;
#line 109 "Environment.c"
	PlankXdgSessionClass result = 0;
#line 29 "../lib/Services/Environment.vala"
	g_return_val_if_fail (s != NULL, 0);
#line 33 "../lib/Services/Environment.vala"
	_tmp0_ = g_utf8_strdown (s, (gssize) -1);
#line 33 "../lib/Services/Environment.vala"
	_tmp1_ = _tmp0_;
#line 33 "../lib/Services/Environment.vala"
	_tmp3_ = (NULL == _tmp1_) ? 0 : g_quark_from_string (_tmp1_);
#line 33 "../lib/Services/Environment.vala"
	g_free (_tmp1_);
#line 33 "../lib/Services/Environment.vala"
	if (_tmp3_ == ((0 != _tmp2_label0) ? _tmp2_label0 : (_tmp2_label0 = g_quark_from_static_string ("greeter")))) {
#line 33 "../lib/Services/Environment.vala"
		switch (0) {
#line 125 "Environment.c"
			default:
			{
#line 36 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_CLASS_GREETER;
#line 36 "../lib/Services/Environment.vala"
				break;
#line 132 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label1) ? _tmp2_label1 : (_tmp2_label1 = g_quark_from_static_string ("lock-screen")))) {
#line 33 "../lib/Services/Environment.vala"
		switch (0) {
#line 138 "Environment.c"
			default:
			{
#line 37 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_CLASS_LOCK_SCREEN;
#line 37 "../lib/Services/Environment.vala"
				break;
#line 145 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label2) ? _tmp2_label2 : (_tmp2_label2 = g_quark_from_static_string ("background")))) {
#line 33 "../lib/Services/Environment.vala"
		switch (0) {
#line 151 "Environment.c"
			default:
			{
#line 38 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_CLASS_BACKGROUND;
#line 38 "../lib/Services/Environment.vala"
				break;
#line 158 "Environment.c"
			}
		}
	} else {
#line 33 "../lib/Services/Environment.vala"
		switch (0) {
#line 164 "Environment.c"
			default:
			{
#line 35 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_CLASS_USER;
#line 35 "../lib/Services/Environment.vala"
				break;
#line 171 "Environment.c"
			}
		}
	}
#line 41 "../lib/Services/Environment.vala"
	result = _result_;
#line 41 "../lib/Services/Environment.vala"
	return result;
#line 179 "Environment.c"
}

static GType
plank_xdg_session_class_get_type_once (void)
{
	static const GEnumValue values[] = {{PLANK_XDG_SESSION_CLASS_USER, "PLANK_XDG_SESSION_CLASS_USER", "user"}, {PLANK_XDG_SESSION_CLASS_GREETER, "PLANK_XDG_SESSION_CLASS_GREETER", "greeter"}, {PLANK_XDG_SESSION_CLASS_LOCK_SCREEN, "PLANK_XDG_SESSION_CLASS_LOCK_SCREEN", "lock-screen"}, {PLANK_XDG_SESSION_CLASS_BACKGROUND, "PLANK_XDG_SESSION_CLASS_BACKGROUND", "background"}, {0, NULL, NULL}};
	GType plank_xdg_session_class_type_id;
	plank_xdg_session_class_type_id = g_enum_register_static ("PlankXdgSessionClass", values);
	return plank_xdg_session_class_type_id;
}

GType
plank_xdg_session_class_get_type (void)
{
	static volatile gsize plank_xdg_session_class_type_id__volatile = 0;
	if (g_once_init_enter (&plank_xdg_session_class_type_id__volatile)) {
		GType plank_xdg_session_class_type_id;
		plank_xdg_session_class_type_id = plank_xdg_session_class_get_type_once ();
		g_once_init_leave (&plank_xdg_session_class_type_id__volatile, plank_xdg_session_class_type_id);
	}
	return plank_xdg_session_class_type_id__volatile;
}

static PlankXdgSessionDesktop
plank_xdg_session_desktop_from_single_string (const gchar* s)
{
	PlankXdgSessionDesktop _result_ = 0U;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GQuark _tmp3_ = 0U;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label0 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label1 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label2 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label3 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label4 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label5 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label6 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label7 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label8 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label9 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label10 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label11 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label12 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label13 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label14 = 0;
#line 67 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label15 = 0;
#line 242 "Environment.c"
	PlankXdgSessionDesktop result = 0U;
#line 63 "../lib/Services/Environment.vala"
	g_return_val_if_fail (s != NULL, 0U);
#line 67 "../lib/Services/Environment.vala"
	_tmp0_ = g_utf8_strdown (s, (gssize) -1);
#line 67 "../lib/Services/Environment.vala"
	_tmp1_ = _tmp0_;
#line 67 "../lib/Services/Environment.vala"
	_tmp3_ = (NULL == _tmp1_) ? 0 : g_quark_from_string (_tmp1_);
#line 67 "../lib/Services/Environment.vala"
	g_free (_tmp1_);
#line 67 "../lib/Services/Environment.vala"
	if (_tmp3_ == ((0 != _tmp2_label0) ? _tmp2_label0 : (_tmp2_label0 = g_quark_from_static_string ("gnome")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 258 "Environment.c"
			default:
			{
#line 68 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_GNOME;
#line 68 "../lib/Services/Environment.vala"
				break;
#line 265 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label1) ? _tmp2_label1 : (_tmp2_label1 = g_quark_from_static_string ("gnome-xorg")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 271 "Environment.c"
			default:
			{
#line 69 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_GNOME;
#line 69 "../lib/Services/Environment.vala"
				break;
#line 278 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label2) ? _tmp2_label2 : (_tmp2_label2 = g_quark_from_static_string ("ubuntu")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 284 "Environment.c"
			default:
			{
#line 70 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_UBUNTU;
#line 70 "../lib/Services/Environment.vala"
				break;
#line 291 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label3) ? _tmp2_label3 : (_tmp2_label3 = g_quark_from_static_string ("ubuntu-xorg")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 297 "Environment.c"
			default:
			{
#line 71 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_UBUNTU;
#line 71 "../lib/Services/Environment.vala"
				break;
#line 304 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label4) ? _tmp2_label4 : (_tmp2_label4 = g_quark_from_static_string ("kde")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 310 "Environment.c"
			default:
			{
#line 72 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_KDE;
#line 72 "../lib/Services/Environment.vala"
				break;
#line 317 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label5) ? _tmp2_label5 : (_tmp2_label5 = g_quark_from_static_string ("lxde")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 323 "Environment.c"
			default:
			{
#line 73 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_LXDE;
#line 73 "../lib/Services/Environment.vala"
				break;
#line 330 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label6) ? _tmp2_label6 : (_tmp2_label6 = g_quark_from_static_string ("mate")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 336 "Environment.c"
			default:
			{
#line 74 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_MATE;
#line 74 "../lib/Services/Environment.vala"
				break;
#line 343 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label7) ? _tmp2_label7 : (_tmp2_label7 = g_quark_from_static_string ("razor")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 349 "Environment.c"
			default:
			{
#line 75 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_RAZOR;
#line 75 "../lib/Services/Environment.vala"
				break;
#line 356 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label8) ? _tmp2_label8 : (_tmp2_label8 = g_quark_from_static_string ("rox")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 362 "Environment.c"
			default:
			{
#line 76 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_ROX;
#line 76 "../lib/Services/Environment.vala"
				break;
#line 369 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label9) ? _tmp2_label9 : (_tmp2_label9 = g_quark_from_static_string ("tde")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 375 "Environment.c"
			default:
			{
#line 77 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_TDE;
#line 77 "../lib/Services/Environment.vala"
				break;
#line 382 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label10) ? _tmp2_label10 : (_tmp2_label10 = g_quark_from_static_string ("unity")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 388 "Environment.c"
			default:
			{
#line 78 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_UNITY;
#line 78 "../lib/Services/Environment.vala"
				break;
#line 395 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label11) ? _tmp2_label11 : (_tmp2_label11 = g_quark_from_static_string ("xfce")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 401 "Environment.c"
			default:
			{
#line 79 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_XFCE;
#line 79 "../lib/Services/Environment.vala"
				break;
#line 408 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label12) ? _tmp2_label12 : (_tmp2_label12 = g_quark_from_static_string ("ede")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 414 "Environment.c"
			default:
			{
#line 80 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_EDE;
#line 80 "../lib/Services/Environment.vala"
				break;
#line 421 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label13) ? _tmp2_label13 : (_tmp2_label13 = g_quark_from_static_string ("cinnamon")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 427 "Environment.c"
			default:
			{
#line 81 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_CINNAMON;
#line 81 "../lib/Services/Environment.vala"
				break;
#line 434 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label14) ? _tmp2_label14 : (_tmp2_label14 = g_quark_from_static_string ("pantheon")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 440 "Environment.c"
			default:
			{
#line 82 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_PANTHEON;
#line 82 "../lib/Services/Environment.vala"
				break;
#line 447 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label15) ? _tmp2_label15 : (_tmp2_label15 = g_quark_from_static_string ("old")))) {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 453 "Environment.c"
			default:
			{
#line 83 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_DESKTOP_OLD;
#line 83 "../lib/Services/Environment.vala"
				break;
#line 460 "Environment.c"
			}
		}
	} else {
#line 67 "../lib/Services/Environment.vala"
		switch (0) {
#line 466 "Environment.c"
			default:
			{
#line 84 "../lib/Services/Environment.vala"
				_result_ = 0;
#line 84 "../lib/Services/Environment.vala"
				break;
#line 473 "Environment.c"
			}
		}
	}
#line 87 "../lib/Services/Environment.vala"
	result = _result_;
#line 87 "../lib/Services/Environment.vala"
	return result;
#line 481 "Environment.c"
}

static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gchar* _tmp0_;
	gboolean result = FALSE;
#line 1530 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1530 "glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1531 "glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1531 "glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1531 "glib-2.0.vapi"
	return result;
#line 500 "Environment.c"
}

PlankXdgSessionDesktop
plank_xdg_session_desktop_from_string (const gchar* s)
{
	PlankXdgSessionDesktop _result_ = 0U;
	PlankXdgSessionDesktop result = 0U;
#line 90 "../lib/Services/Environment.vala"
	g_return_val_if_fail (s != NULL, 0U);
#line 92 "../lib/Services/Environment.vala"
	_result_ = 0;
#line 94 "../lib/Services/Environment.vala"
	if (string_contains (s, ";")) {
#line 514 "Environment.c"
		gchar** _tmp0_;
		gchar** _tmp1_;
#line 95 "../lib/Services/Environment.vala"
		_tmp1_ = _tmp0_ = g_strsplit (s, ";", 0);
#line 519 "Environment.c"
		{
			gchar** e_collection = NULL;
			gint e_collection_length1 = 0;
			gint _e_collection_size_ = 0;
			gint e_it = 0;
#line 95 "../lib/Services/Environment.vala"
			e_collection = _tmp1_;
#line 95 "../lib/Services/Environment.vala"
			e_collection_length1 = _vala_array_length (_tmp0_);
#line 95 "../lib/Services/Environment.vala"
			for (e_it = 0; e_it < e_collection_length1; e_it = e_it + 1) {
#line 531 "Environment.c"
				const gchar* e = NULL;
#line 95 "../lib/Services/Environment.vala"
				e = e_collection[e_it];
#line 535 "Environment.c"
				{
					const gchar* _tmp2_;
#line 96 "../lib/Services/Environment.vala"
					_tmp2_ = e;
#line 96 "../lib/Services/Environment.vala"
					if (_tmp2_ != NULL) {
#line 542 "Environment.c"
						PlankXdgSessionDesktop _tmp3_;
						const gchar* _tmp4_;
#line 97 "../lib/Services/Environment.vala"
						_tmp3_ = _result_;
#line 97 "../lib/Services/Environment.vala"
						_tmp4_ = e;
#line 97 "../lib/Services/Environment.vala"
						_result_ = _tmp3_ | plank_xdg_session_desktop_from_single_string (_tmp4_);
#line 551 "Environment.c"
					}
				}
			}
#line 95 "../lib/Services/Environment.vala"
			e_collection = (_vala_array_free (e_collection, e_collection_length1, (GDestroyNotify) g_free), NULL);
#line 557 "Environment.c"
		}
	} else {
#line 99 "../lib/Services/Environment.vala"
		_result_ = plank_xdg_session_desktop_from_single_string (s);
#line 562 "Environment.c"
	}
#line 102 "../lib/Services/Environment.vala"
	result = _result_;
#line 102 "../lib/Services/Environment.vala"
	return result;
#line 568 "Environment.c"
}

static GType
plank_xdg_session_desktop_get_type_once (void)
{
	static const GFlagsValue values[] = {{PLANK_XDG_SESSION_DESKTOP_GNOME, "PLANK_XDG_SESSION_DESKTOP_GNOME", "gnome"}, {PLANK_XDG_SESSION_DESKTOP_KDE, "PLANK_XDG_SESSION_DESKTOP_KDE", "kde"}, {PLANK_XDG_SESSION_DESKTOP_LXDE, "PLANK_XDG_SESSION_DESKTOP_LXDE", "lxde"}, {PLANK_XDG_SESSION_DESKTOP_MATE, "PLANK_XDG_SESSION_DESKTOP_MATE", "mate"}, {PLANK_XDG_SESSION_DESKTOP_RAZOR, "PLANK_XDG_SESSION_DESKTOP_RAZOR", "razor"}, {PLANK_XDG_SESSION_DESKTOP_ROX, "PLANK_XDG_SESSION_DESKTOP_ROX", "rox"}, {PLANK_XDG_SESSION_DESKTOP_TDE, "PLANK_XDG_SESSION_DESKTOP_TDE", "tde"}, {PLANK_XDG_SESSION_DESKTOP_UNITY, "PLANK_XDG_SESSION_DESKTOP_UNITY", "unity"}, {PLANK_XDG_SESSION_DESKTOP_XFCE, "PLANK_XDG_SESSION_DESKTOP_XFCE", "xfce"}, {PLANK_XDG_SESSION_DESKTOP_EDE, "PLANK_XDG_SESSION_DESKTOP_EDE", "ede"}, {PLANK_XDG_SESSION_DESKTOP_CINNAMON, "PLANK_XDG_SESSION_DESKTOP_CINNAMON", "cinnamon"}, {PLANK_XDG_SESSION_DESKTOP_PANTHEON, "PLANK_XDG_SESSION_DESKTOP_PANTHEON", "pantheon"}, {PLANK_XDG_SESSION_DESKTOP_OLD, "PLANK_XDG_SESSION_DESKTOP_OLD", "old"}, {PLANK_XDG_SESSION_DESKTOP_UBUNTU, "PLANK_XDG_SESSION_DESKTOP_UBUNTU", "ubuntu"}, {0, NULL, NULL}};
	GType plank_xdg_session_desktop_type_id;
	plank_xdg_session_desktop_type_id = g_flags_register_static ("PlankXdgSessionDesktop", values);
	return plank_xdg_session_desktop_type_id;
}

GType
plank_xdg_session_desktop_get_type (void)
{
	static volatile gsize plank_xdg_session_desktop_type_id__volatile = 0;
	if (g_once_init_enter (&plank_xdg_session_desktop_type_id__volatile)) {
		GType plank_xdg_session_desktop_type_id;
		plank_xdg_session_desktop_type_id = plank_xdg_session_desktop_get_type_once ();
		g_once_init_leave (&plank_xdg_session_desktop_type_id__volatile, plank_xdg_session_desktop_type_id);
	}
	return plank_xdg_session_desktop_type_id__volatile;
}

PlankXdgSessionType
plank_xdg_session_type_from_string (const gchar* s)
{
	PlankXdgSessionType _result_ = 0;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GQuark _tmp3_ = 0U;
#line 118 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label0 = 0;
#line 118 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label1 = 0;
#line 118 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label2 = 0;
#line 118 "../lib/Services/Environment.vala"
	static GQuark _tmp2_label3 = 0;
#line 607 "Environment.c"
	PlankXdgSessionType result = 0;
#line 114 "../lib/Services/Environment.vala"
	g_return_val_if_fail (s != NULL, 0);
#line 118 "../lib/Services/Environment.vala"
	_tmp0_ = g_utf8_strdown (s, (gssize) -1);
#line 118 "../lib/Services/Environment.vala"
	_tmp1_ = _tmp0_;
#line 118 "../lib/Services/Environment.vala"
	_tmp3_ = (NULL == _tmp1_) ? 0 : g_quark_from_string (_tmp1_);
#line 118 "../lib/Services/Environment.vala"
	g_free (_tmp1_);
#line 118 "../lib/Services/Environment.vala"
	if (_tmp3_ == ((0 != _tmp2_label0) ? _tmp2_label0 : (_tmp2_label0 = g_quark_from_static_string ("tty")))) {
#line 118 "../lib/Services/Environment.vala"
		switch (0) {
#line 623 "Environment.c"
			default:
			{
#line 121 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_TYPE_TTY;
#line 121 "../lib/Services/Environment.vala"
				break;
#line 630 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label1) ? _tmp2_label1 : (_tmp2_label1 = g_quark_from_static_string ("x11")))) {
#line 118 "../lib/Services/Environment.vala"
		switch (0) {
#line 636 "Environment.c"
			default:
			{
#line 122 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_TYPE_X11;
#line 122 "../lib/Services/Environment.vala"
				break;
#line 643 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label2) ? _tmp2_label2 : (_tmp2_label2 = g_quark_from_static_string ("wayland")))) {
#line 118 "../lib/Services/Environment.vala"
		switch (0) {
#line 649 "Environment.c"
			default:
			{
#line 123 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_TYPE_WAYLAND;
#line 123 "../lib/Services/Environment.vala"
				break;
#line 656 "Environment.c"
			}
		}
	} else if (_tmp3_ == ((0 != _tmp2_label3) ? _tmp2_label3 : (_tmp2_label3 = g_quark_from_static_string ("mir")))) {
#line 118 "../lib/Services/Environment.vala"
		switch (0) {
#line 662 "Environment.c"
			default:
			{
#line 124 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_TYPE_MIR;
#line 124 "../lib/Services/Environment.vala"
				break;
#line 669 "Environment.c"
			}
		}
	} else {
#line 118 "../lib/Services/Environment.vala"
		switch (0) {
#line 675 "Environment.c"
			default:
			{
#line 120 "../lib/Services/Environment.vala"
				_result_ = PLANK_XDG_SESSION_TYPE_UNSPECIFIED;
#line 120 "../lib/Services/Environment.vala"
				break;
#line 682 "Environment.c"
			}
		}
	}
#line 127 "../lib/Services/Environment.vala"
	result = _result_;
#line 127 "../lib/Services/Environment.vala"
	return result;
#line 690 "Environment.c"
}

static GType
plank_xdg_session_type_get_type_once (void)
{
	static const GEnumValue values[] = {{PLANK_XDG_SESSION_TYPE_UNSPECIFIED, "PLANK_XDG_SESSION_TYPE_UNSPECIFIED", "unspecified"}, {PLANK_XDG_SESSION_TYPE_TTY, "PLANK_XDG_SESSION_TYPE_TTY", "tty"}, {PLANK_XDG_SESSION_TYPE_X11, "PLANK_XDG_SESSION_TYPE_X11", "x11"}, {PLANK_XDG_SESSION_TYPE_WAYLAND, "PLANK_XDG_SESSION_TYPE_WAYLAND", "wayland"}, {PLANK_XDG_SESSION_TYPE_MIR, "PLANK_XDG_SESSION_TYPE_MIR", "mir"}, {0, NULL, NULL}};
	GType plank_xdg_session_type_type_id;
	plank_xdg_session_type_type_id = g_enum_register_static ("PlankXdgSessionType", values);
	return plank_xdg_session_type_type_id;
}

GType
plank_xdg_session_type_get_type (void)
{
	static volatile gsize plank_xdg_session_type_type_id__volatile = 0;
	if (g_once_init_enter (&plank_xdg_session_type_type_id__volatile)) {
		GType plank_xdg_session_type_type_id;
		plank_xdg_session_type_type_id = plank_xdg_session_type_get_type_once ();
		g_once_init_leave (&plank_xdg_session_type_type_id__volatile, plank_xdg_session_type_type_id);
	}
	return plank_xdg_session_type_type_id__volatile;
}

void
plank_environment_initialize (void)
{
#line 137 "../lib/Services/Environment.vala"
	plank_session_class = plank_get_xdg_session_class ();
#line 138 "../lib/Services/Environment.vala"
	plank_session_desktop = plank_get_xdg_session_desktop ();
#line 139 "../lib/Services/Environment.vala"
	plank_session_type = plank_get_xdg_session_type ();
#line 723 "Environment.c"
}

gboolean
plank_environment_is_session_class (PlankXdgSessionClass type)
{
	PlankXdgSessionClass _tmp0_;
	gboolean result = FALSE;
#line 144 "../lib/Services/Environment.vala"
	_tmp0_ = plank_session_class;
#line 144 "../lib/Services/Environment.vala"
	result = type == _tmp0_;
#line 144 "../lib/Services/Environment.vala"
	return result;
#line 737 "Environment.c"
}

gboolean
plank_environment_is_session_desktop (PlankXdgSessionDesktop type)
{
	PlankXdgSessionDesktop _tmp0_;
	gboolean result = FALSE;
#line 149 "../lib/Services/Environment.vala"
	_tmp0_ = plank_session_desktop;
#line 149 "../lib/Services/Environment.vala"
	result = (_tmp0_ & type) == type;
#line 149 "../lib/Services/Environment.vala"
	return result;
#line 751 "Environment.c"
}

gboolean
plank_environment_is_session_type (PlankXdgSessionType type)
{
	PlankXdgSessionType _tmp0_;
	gboolean result = FALSE;
#line 154 "../lib/Services/Environment.vala"
	_tmp0_ = plank_session_type;
#line 154 "../lib/Services/Environment.vala"
	result = type == _tmp0_;
#line 154 "../lib/Services/Environment.vala"
	return result;
#line 765 "Environment.c"
}

G_GNUC_INTERNAL PlankXdgSessionClass
plank_get_xdg_session_class (void)
{
	const gchar* _result_ = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	PlankXdgSessionClass result = 0;
#line 161 "../lib/Services/Environment.vala"
	_tmp0_ = g_getenv ("XDG_SESSION_CLASS");
#line 161 "../lib/Services/Environment.vala"
	_result_ = _tmp0_;
#line 162 "../lib/Services/Environment.vala"
	_tmp1_ = _result_;
#line 162 "../lib/Services/Environment.vala"
	if (_tmp1_ != NULL) {
#line 783 "Environment.c"
		const gchar* _tmp2_;
#line 163 "../lib/Services/Environment.vala"
		_tmp2_ = _result_;
#line 163 "../lib/Services/Environment.vala"
		result = plank_xdg_session_class_from_string (_tmp2_);
#line 163 "../lib/Services/Environment.vala"
		return result;
#line 791 "Environment.c"
	}
#line 165 "../lib/Services/Environment.vala"
	g_warning ("Environment.vala:165: XDG_SESSION_CLASS not set in this environment!");
#line 167 "../lib/Services/Environment.vala"
	result = PLANK_XDG_SESSION_CLASS_USER;
#line 167 "../lib/Services/Environment.vala"
	return result;
#line 799 "Environment.c"
}

G_GNUC_INTERNAL PlankXdgSessionDesktop
plank_get_xdg_session_desktop (void)
{
	const gchar* _result_ = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp3_;
	const gchar* _tmp5_;
	PlankXdgSessionDesktop result = 0U;
#line 174 "../lib/Services/Environment.vala"
	_tmp0_ = g_getenv ("XDG_SESSION_DESKTOP");
#line 174 "../lib/Services/Environment.vala"
	_result_ = _tmp0_;
#line 175 "../lib/Services/Environment.vala"
	_tmp1_ = _result_;
#line 175 "../lib/Services/Environment.vala"
	if (_tmp1_ == NULL) {
#line 819 "Environment.c"
		const gchar* _tmp2_;
#line 176 "../lib/Services/Environment.vala"
		_tmp2_ = g_getenv ("XDG_CURRENT_DESKTOP");
#line 176 "../lib/Services/Environment.vala"
		_result_ = _tmp2_;
#line 825 "Environment.c"
	}
#line 177 "../lib/Services/Environment.vala"
	_tmp3_ = _result_;
#line 177 "../lib/Services/Environment.vala"
	if (_tmp3_ == NULL) {
#line 831 "Environment.c"
		const gchar* _tmp4_;
#line 178 "../lib/Services/Environment.vala"
		_tmp4_ = g_getenv ("DESKTOP_SESSION");
#line 178 "../lib/Services/Environment.vala"
		_result_ = _tmp4_;
#line 837 "Environment.c"
	}
#line 180 "../lib/Services/Environment.vala"
	_tmp5_ = _result_;
#line 180 "../lib/Services/Environment.vala"
	if (_tmp5_ != NULL) {
#line 843 "Environment.c"
		const gchar* _tmp6_;
#line 181 "../lib/Services/Environment.vala"
		_tmp6_ = _result_;
#line 181 "../lib/Services/Environment.vala"
		result = plank_xdg_session_desktop_from_string (_tmp6_);
#line 181 "../lib/Services/Environment.vala"
		return result;
#line 851 "Environment.c"
	}
#line 183 "../lib/Services/Environment.vala"
	g_warning ("Environment.vala:183: Neither of XDG_SESSION_DESKTOP, XDG_CURRENT_DESK" \
"TOP or DESKTOP_SESSION is set in this environment!");
#line 185 "../lib/Services/Environment.vala"
	result = PLANK_XDG_SESSION_DESKTOP_GNOME;
#line 185 "../lib/Services/Environment.vala"
	return result;
#line 859 "Environment.c"
}

G_GNUC_INTERNAL PlankXdgSessionType
plank_get_xdg_session_type (void)
{
	const gchar* _result_ = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	GdkScreen* _tmp3_;
	PlankXdgSessionType result = 0;
#line 192 "../lib/Services/Environment.vala"
	_tmp0_ = g_getenv ("XDG_SESSION_TYPE");
#line 192 "../lib/Services/Environment.vala"
	_result_ = _tmp0_;
#line 193 "../lib/Services/Environment.vala"
	_tmp1_ = _result_;
#line 193 "../lib/Services/Environment.vala"
	if (_tmp1_ != NULL) {
#line 878 "Environment.c"
		const gchar* _tmp2_;
#line 194 "../lib/Services/Environment.vala"
		_tmp2_ = _result_;
#line 194 "../lib/Services/Environment.vala"
		result = plank_xdg_session_type_from_string (_tmp2_);
#line 194 "../lib/Services/Environment.vala"
		return result;
#line 886 "Environment.c"
	}
#line 196 "../lib/Services/Environment.vala"
	g_warning ("Environment.vala:196: XDG_SESSION_TYPE not set in this environment!");
#line 198 "../lib/Services/Environment.vala"
	_tmp3_ = gdk_screen_get_default ();
#line 198 "../lib/Services/Environment.vala"
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp3_, gdk_x11_screen_get_type ())) {
#line 199 "../lib/Services/Environment.vala"
		result = PLANK_XDG_SESSION_TYPE_X11;
#line 199 "../lib/Services/Environment.vala"
		return result;
#line 898 "Environment.c"
	}
#line 201 "../lib/Services/Environment.vala"
	g_error ("Environment.vala:201: XdgSessionType could not be determined!");
#line 902 "Environment.c"
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
#line 52 "../lib/Docklets/DockletManager.vala"
	if ((array != NULL) && (destroy_func != NULL)) {
#line 912 "Environment.c"
		gint i;
#line 52 "../lib/Docklets/DockletManager.vala"
		for (i = 0; i < array_length; i = i + 1) {
#line 52 "../lib/Docklets/DockletManager.vala"
			if (((gpointer*) array)[i] != NULL) {
#line 52 "../lib/Docklets/DockletManager.vala"
				destroy_func (((gpointer*) array)[i]);
#line 920 "Environment.c"
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
#line 52 "../lib/Docklets/DockletManager.vala"
	_vala_array_destroy (array, array_length, destroy_func);
#line 52 "../lib/Docklets/DockletManager.vala"
	g_free (array);
#line 935 "Environment.c"
}

static gint
_vala_array_length (gpointer array)
{
	gint length;
	length = 0;
#line 52 "../lib/Docklets/DockletManager.vala"
	if (array) {
#line 52 "../lib/Docklets/DockletManager.vala"
		while (((gpointer*) array)[length]) {
#line 52 "../lib/Docklets/DockletManager.vala"
			length++;
#line 949 "Environment.c"
		}
	}
#line 52 "../lib/Docklets/DockletManager.vala"
	return length;
#line 954 "Environment.c"
}

