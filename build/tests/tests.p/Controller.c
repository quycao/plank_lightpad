/* Controller.c generated by valac 0.48.17, the Vala compiler
 * generated from Controller.vala, do not modify */

/**/
/*  Copyright (C) 2014 Rico Tzschichholz*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib.h>
#include "plank.h"
#include <gio/gio.h>
#include "test-config.h"
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>

#define PLANK_TESTS_TYPE_TEST_DOCK_ITEM (plank_tests_test_dock_item_get_type ())
#define PLANK_TESTS_TEST_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PLANK_TESTS_TYPE_TEST_DOCK_ITEM, PlankTestsTestDockItem))
#define PLANK_TESTS_TEST_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PLANK_TESTS_TYPE_TEST_DOCK_ITEM, PlankTestsTestDockItemClass))
#define PLANK_TESTS_IS_TEST_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PLANK_TESTS_TYPE_TEST_DOCK_ITEM))
#define PLANK_TESTS_IS_TEST_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PLANK_TESTS_TYPE_TEST_DOCK_ITEM))
#define PLANK_TESTS_TEST_DOCK_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PLANK_TESTS_TYPE_TEST_DOCK_ITEM, PlankTestsTestDockItemClass))

typedef struct _PlankTestsTestDockItem PlankTestsTestDockItem;
typedef struct _PlankTestsTestDockItemClass PlankTestsTestDockItemClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

void plank_tests_register_controller_tests (void);
G_GNUC_INTERNAL void plank_tests_controller_construct_default (void);
static void _plank_tests_controller_construct_default_gtest_func (void);
G_GNUC_INTERNAL void plank_tests_controller_construct_custom (void);
static void _plank_tests_controller_construct_custom_gtest_func (void);
G_GNUC_INTERNAL PlankDockItem* plank_tests_create_controller_testitem (void);
GType plank_tests_test_dock_item_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PlankTestsTestDockItem, g_object_unref)
PlankTestsTestDockItem* plank_tests_test_dock_item_new (void);
PlankTestsTestDockItem* plank_tests_test_dock_item_construct (GType object_type);
#define PLANK_TESTS_TEST_ICON DATA_DIR "/test-icon.svg"
#define PLANK_TESTS_TEST_DOCK_NAME "test1"
G_GNUC_INTERNAL void plank_tests_wait (guint milliseconds);
G_GNUC_INTERNAL void plank_tests_controller_items_match (PlankDockController* controller);

static void
_plank_tests_controller_construct_default_gtest_func (void)
{
#line 26 "../tests/Controller.vala"
	plank_tests_controller_construct_default ();
#line 69 "Controller.c"
}

static void
_plank_tests_controller_construct_custom_gtest_func (void)
{
#line 27 "../tests/Controller.vala"
	plank_tests_controller_construct_custom ();
#line 77 "Controller.c"
}

void
plank_tests_register_controller_tests (void)
{
#line 26 "../tests/Controller.vala"
	g_test_add_func ("/Controller/construct_default", _plank_tests_controller_construct_default_gtest_func);
#line 27 "../tests/Controller.vala"
	g_test_add_func ("/Controller/construct_custom", _plank_tests_controller_construct_custom_gtest_func);
#line 87 "Controller.c"
}

G_GNUC_INTERNAL PlankDockItem*
plank_tests_create_controller_testitem (void)
{
	GFile* file = NULL;
	GFile* _tmp0_;
	PlankTestsTestDockItem* item = NULL;
	PlankTestsTestDockItem* _tmp1_;
	PlankDockItemPreferences* _tmp2_;
	PlankDockItemPreferences* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	PlankDockItem* result = NULL;
#line 32 "../tests/Controller.vala"
	_tmp0_ = g_file_new_for_path (DATA_DIR "/test.desktop");
#line 32 "../tests/Controller.vala"
	file = _tmp0_;
#line 33 "../tests/Controller.vala"
	_tmp1_ = plank_tests_test_dock_item_new ();
#line 33 "../tests/Controller.vala"
	item = _tmp1_;
#line 34 "../tests/Controller.vala"
	_tmp2_ = plank_dock_item_get_Prefs ((PlankDockItem*) item);
#line 34 "../tests/Controller.vala"
	_tmp3_ = _tmp2_;
#line 34 "../tests/Controller.vala"
	_tmp4_ = g_file_get_uri (file);
#line 34 "../tests/Controller.vala"
	_tmp5_ = _tmp4_;
#line 34 "../tests/Controller.vala"
	plank_dock_item_preferences_set_Launcher (_tmp3_, _tmp5_);
#line 34 "../tests/Controller.vala"
	_g_free0 (_tmp5_);
#line 35 "../tests/Controller.vala"
	plank_dock_element_set_Text ((PlankDockElement*) item, "Plank");
#line 36 "../tests/Controller.vala"
	plank_dock_item_set_Icon ((PlankDockItem*) item, PLANK_TESTS_TEST_ICON);
#line 37 "../tests/Controller.vala"
	plank_dock_item_set_Count ((PlankDockItem*) item, (gint64) 42);
#line 38 "../tests/Controller.vala"
	plank_dock_item_set_CountVisible ((PlankDockItem*) item, TRUE);
#line 39 "../tests/Controller.vala"
	plank_dock_item_set_Progress ((PlankDockItem*) item, 0.42);
#line 40 "../tests/Controller.vala"
	plank_dock_item_set_ProgressVisible ((PlankDockItem*) item, TRUE);
#line 41 "../tests/Controller.vala"
	plank_dock_item_set_Position ((PlankDockItem*) item, 1);
#line 43 "../tests/Controller.vala"
	result = (PlankDockItem*) item;
#line 43 "../tests/Controller.vala"
	_g_object_unref0 (file);
#line 43 "../tests/Controller.vala"
	return result;
#line 142 "Controller.c"
}

G_GNUC_INTERNAL void
plank_tests_controller_construct_custom (void)
{
	PlankDockController* controller = NULL;
	PlankApplicationDockItemProvider* provider = NULL;
	PlankDockItem* item = NULL;
	PlankDockItem* item2 = NULL;
	PlankDockItem* item3 = NULL;
	GFile* config_folder = NULL;
	GFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GFile* launchers_folder = NULL;
	GFile* _tmp3_;
	PlankApplicationDockItemProvider* _tmp4_;
	PlankDockItem* _tmp5_;
	PlankDockController* _tmp6_;
	PlankDockItem* _tmp7_;
	PlankDockItem* _tmp8_;
#line 52 "../tests/Controller.vala"
	_tmp0_ = plank_paths_get_AppConfigFolder ();
#line 52 "../tests/Controller.vala"
	_tmp1_ = _tmp0_;
#line 52 "../tests/Controller.vala"
	_tmp2_ = g_file_get_child (_tmp1_, PLANK_TESTS_TEST_DOCK_NAME);
#line 52 "../tests/Controller.vala"
	config_folder = _tmp2_;
#line 53 "../tests/Controller.vala"
	_tmp3_ = g_file_get_child (config_folder, "launchers-custom");
#line 53 "../tests/Controller.vala"
	launchers_folder = _tmp3_;
#line 55 "../tests/Controller.vala"
	_tmp4_ = plank_application_dock_item_provider_new (launchers_folder);
#line 55 "../tests/Controller.vala"
	_g_object_unref0 (provider);
#line 55 "../tests/Controller.vala"
	provider = _tmp4_;
#line 56 "../tests/Controller.vala"
	_tmp5_ = plank_tests_create_controller_testitem ();
#line 56 "../tests/Controller.vala"
	_g_object_unref0 (item);
#line 56 "../tests/Controller.vala"
	item = _tmp5_;
#line 57 "../tests/Controller.vala"
	plank_dock_container_add ((PlankDockContainer*) provider, (PlankDockElement*) item, NULL);
#line 58 "../tests/Controller.vala"
	_vala_assert (((GObject*) item)->ref_count > ((guint) 1), "item.ref_count > 1");
#line 60 "../tests/Controller.vala"
	_tmp6_ = plank_dock_controller_new (PLANK_TESTS_TEST_DOCK_NAME, config_folder);
#line 60 "../tests/Controller.vala"
	_g_object_unref0 (controller);
#line 60 "../tests/Controller.vala"
	controller = _tmp6_;
#line 61 "../tests/Controller.vala"
	plank_dock_container_add ((PlankDockContainer*) controller, (PlankDockElement*) provider, NULL);
#line 62 "../tests/Controller.vala"
	plank_dock_controller_initialize (controller);
#line 64 "../tests/Controller.vala"
	plank_tests_wait ((guint) 1000);
#line 66 "../tests/Controller.vala"
	plank_dock_container_remove ((PlankDockContainer*) provider, (PlankDockElement*) item);
#line 67 "../tests/Controller.vala"
	_vala_assert (((GObject*) item)->ref_count == ((guint) 1), "item.ref_count == 1");
#line 69 "../tests/Controller.vala"
	plank_tests_wait ((guint) 1000);
#line 71 "../tests/Controller.vala"
	_tmp7_ = plank_tests_create_controller_testitem ();
#line 71 "../tests/Controller.vala"
	_g_object_unref0 (item2);
#line 71 "../tests/Controller.vala"
	item2 = _tmp7_;
#line 72 "../tests/Controller.vala"
	plank_dock_container_add ((PlankDockContainer*) provider, (PlankDockElement*) item2, NULL);
#line 73 "../tests/Controller.vala"
	plank_tests_wait ((guint) 500);
#line 75 "../tests/Controller.vala"
	plank_tests_controller_items_match (controller);
#line 77 "../tests/Controller.vala"
	_tmp8_ = plank_tests_create_controller_testitem ();
#line 77 "../tests/Controller.vala"
	_g_object_unref0 (item3);
#line 77 "../tests/Controller.vala"
	item3 = _tmp8_;
#line 78 "../tests/Controller.vala"
	plank_dock_container_replace ((PlankDockContainer*) provider, (PlankDockElement*) item3, (PlankDockElement*) item2);
#line 79 "../tests/Controller.vala"
	plank_tests_wait ((guint) 500);
#line 81 "../tests/Controller.vala"
	plank_tests_controller_items_match (controller);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (launchers_folder);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (config_folder);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (item3);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (item2);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (item);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (provider);
#line 46 "../tests/Controller.vala"
	_g_object_unref0 (controller);
#line 248 "Controller.c"
}

G_GNUC_INTERNAL void
plank_tests_controller_construct_default (void)
{
	PlankDockController* controller = NULL;
	GFile* config_folder = NULL;
	GFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	PlankDockController* _tmp3_;
#line 88 "../tests/Controller.vala"
	_tmp0_ = plank_paths_get_AppConfigFolder ();
#line 88 "../tests/Controller.vala"
	_tmp1_ = _tmp0_;
#line 88 "../tests/Controller.vala"
	_tmp2_ = g_file_get_child (_tmp1_, PLANK_TESTS_TEST_DOCK_NAME);
#line 88 "../tests/Controller.vala"
	config_folder = _tmp2_;
#line 89 "../tests/Controller.vala"
	_tmp3_ = plank_dock_controller_new (PLANK_TESTS_TEST_DOCK_NAME, config_folder);
#line 89 "../tests/Controller.vala"
	_g_object_unref0 (controller);
#line 89 "../tests/Controller.vala"
	controller = _tmp3_;
#line 90 "../tests/Controller.vala"
	plank_dock_controller_initialize (controller);
#line 84 "../tests/Controller.vala"
	_g_object_unref0 (config_folder);
#line 84 "../tests/Controller.vala"
	_g_object_unref0 (controller);
#line 280 "Controller.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 95 "../tests/Controller.vala"
	return self ? g_object_ref (self) : NULL;
#line 288 "Controller.c"
}

G_GNUC_INTERNAL void
plank_tests_controller_items_match (PlankDockController* controller)
{
	GeeArrayList* controller_items = NULL;
	GeeArrayList* _tmp0_;
	GeeArrayList* _tmp1_;
	GeeArrayList* _tmp2_;
	GeeArrayList* items = NULL;
	GeeArrayList* _tmp3_;
	GeeArrayList* _tmp20_;
	gint _tmp21_;
	gint _tmp22_;
	GeeArrayList* _tmp23_;
	gint _tmp24_;
	gint _tmp25_;
#line 93 "../tests/Controller.vala"
	g_return_if_fail (controller != NULL);
#line 95 "../tests/Controller.vala"
	_tmp0_ = plank_dock_controller_get_VisibleItems (controller);
#line 95 "../tests/Controller.vala"
	_tmp1_ = _tmp0_;
#line 95 "../tests/Controller.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 95 "../tests/Controller.vala"
	controller_items = _tmp2_;
#line 96 "../tests/Controller.vala"
	_tmp3_ = gee_array_list_new (PLANK_TYPE_DOCK_ELEMENT, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
#line 96 "../tests/Controller.vala"
	items = _tmp3_;
#line 320 "Controller.c"
	{
		GeeArrayList* _element_list = NULL;
		GeeArrayList* _tmp4_;
		GeeArrayList* _tmp5_;
		GeeArrayList* _tmp6_;
		gint _element_size = 0;
		GeeArrayList* _tmp7_;
		gint _tmp8_;
		gint _tmp9_;
		gint _element_index = 0;
#line 98 "../tests/Controller.vala"
		_tmp4_ = plank_dock_container_get_VisibleElements ((PlankDockContainer*) controller);
#line 98 "../tests/Controller.vala"
		_tmp5_ = _tmp4_;
#line 98 "../tests/Controller.vala"
		_tmp6_ = _g_object_ref0 (_tmp5_);
#line 98 "../tests/Controller.vala"
		_element_list = _tmp6_;
#line 98 "../tests/Controller.vala"
		_tmp7_ = _element_list;
#line 98 "../tests/Controller.vala"
		_tmp8_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp7_);
#line 98 "../tests/Controller.vala"
		_tmp9_ = _tmp8_;
#line 98 "../tests/Controller.vala"
		_element_size = _tmp9_;
#line 98 "../tests/Controller.vala"
		_element_index = -1;
#line 98 "../tests/Controller.vala"
		while (TRUE) {
#line 351 "Controller.c"
			gint _tmp10_;
			gint _tmp11_;
			PlankDockElement* element = NULL;
			GeeArrayList* _tmp12_;
			gpointer _tmp13_;
			PlankDockContainer* container = NULL;
			PlankDockElement* _tmp14_;
			PlankDockContainer* _tmp15_;
#line 98 "../tests/Controller.vala"
			_element_index = _element_index + 1;
#line 98 "../tests/Controller.vala"
			_tmp10_ = _element_index;
#line 98 "../tests/Controller.vala"
			_tmp11_ = _element_size;
#line 98 "../tests/Controller.vala"
			if (!(_tmp10_ < _tmp11_)) {
#line 98 "../tests/Controller.vala"
				break;
#line 370 "Controller.c"
			}
#line 98 "../tests/Controller.vala"
			_tmp12_ = _element_list;
#line 98 "../tests/Controller.vala"
			_tmp13_ = gee_abstract_list_get ((GeeAbstractList*) _tmp12_, _element_index);
#line 98 "../tests/Controller.vala"
			element = (PlankDockElement*) _tmp13_;
#line 99 "../tests/Controller.vala"
			_tmp14_ = element;
#line 99 "../tests/Controller.vala"
			container = G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, PLANK_TYPE_DOCK_CONTAINER) ? ((PlankDockContainer*) _tmp14_) : NULL;
#line 100 "../tests/Controller.vala"
			_tmp15_ = container;
#line 100 "../tests/Controller.vala"
			if (_tmp15_ != NULL) {
#line 386 "Controller.c"
				GeeArrayList* _tmp16_;
				PlankDockContainer* _tmp17_;
				GeeArrayList* _tmp18_;
				GeeArrayList* _tmp19_;
#line 101 "../tests/Controller.vala"
				_tmp16_ = items;
#line 101 "../tests/Controller.vala"
				_tmp17_ = container;
#line 101 "../tests/Controller.vala"
				_tmp18_ = plank_dock_container_get_VisibleElements (_tmp17_);
#line 101 "../tests/Controller.vala"
				_tmp19_ = _tmp18_;
#line 101 "../tests/Controller.vala"
				gee_array_list_add_all (_tmp16_, (GeeCollection*) _tmp19_);
#line 401 "Controller.c"
			}
#line 98 "../tests/Controller.vala"
			_g_object_unref0 (element);
#line 405 "Controller.c"
		}
#line 98 "../tests/Controller.vala"
		_g_object_unref0 (_element_list);
#line 409 "Controller.c"
	}
#line 104 "../tests/Controller.vala"
	_tmp20_ = items;
#line 104 "../tests/Controller.vala"
	_tmp21_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp20_);
#line 104 "../tests/Controller.vala"
	_tmp22_ = _tmp21_;
#line 104 "../tests/Controller.vala"
	_tmp23_ = controller_items;
#line 104 "../tests/Controller.vala"
	_tmp24_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp23_);
#line 104 "../tests/Controller.vala"
	_tmp25_ = _tmp24_;
#line 104 "../tests/Controller.vala"
	_vala_assert (_tmp22_ == _tmp25_, "items.size == controller_items.size");
#line 425 "Controller.c"
	{
		gint i = 0;
#line 105 "../tests/Controller.vala"
		i = 0;
#line 430 "Controller.c"
		{
			gboolean _tmp26_ = FALSE;
#line 105 "../tests/Controller.vala"
			_tmp26_ = TRUE;
#line 105 "../tests/Controller.vala"
			while (TRUE) {
#line 437 "Controller.c"
				GeeArrayList* _tmp28_;
				gint _tmp29_;
				gint _tmp30_;
				GeeArrayList* _tmp31_;
				gpointer _tmp32_;
				PlankDockElement* _tmp33_;
				GeeArrayList* _tmp34_;
				gpointer _tmp35_;
#line 105 "../tests/Controller.vala"
				if (!_tmp26_) {
#line 448 "Controller.c"
					gint _tmp27_;
#line 105 "../tests/Controller.vala"
					_tmp27_ = i;
#line 105 "../tests/Controller.vala"
					i = _tmp27_ + 1;
#line 454 "Controller.c"
				}
#line 105 "../tests/Controller.vala"
				_tmp26_ = FALSE;
#line 105 "../tests/Controller.vala"
				_tmp28_ = items;
#line 105 "../tests/Controller.vala"
				_tmp29_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp28_);
#line 105 "../tests/Controller.vala"
				_tmp30_ = _tmp29_;
#line 105 "../tests/Controller.vala"
				if (!(i < _tmp30_)) {
#line 105 "../tests/Controller.vala"
					break;
#line 468 "Controller.c"
				}
#line 106 "../tests/Controller.vala"
				_tmp31_ = items;
#line 106 "../tests/Controller.vala"
				_tmp32_ = gee_abstract_list_get ((GeeAbstractList*) _tmp31_, i);
#line 106 "../tests/Controller.vala"
				_tmp33_ = (PlankDockElement*) _tmp32_;
#line 106 "../tests/Controller.vala"
				_tmp34_ = controller_items;
#line 106 "../tests/Controller.vala"
				_tmp35_ = gee_abstract_list_get ((GeeAbstractList*) _tmp34_, i);
#line 106 "../tests/Controller.vala"
				_vala_assert (_tmp33_ == G_TYPE_CHECK_INSTANCE_CAST ((PlankDockItem*) _tmp35_, PLANK_TYPE_DOCK_ELEMENT, PlankDockElement), "items[i] == controller_items[i]");
#line 106 "../tests/Controller.vala"
				_g_object_unref0 (_tmp33_);
#line 484 "Controller.c"
			}
		}
	}
#line 93 "../tests/Controller.vala"
	_g_object_unref0 (items);
#line 93 "../tests/Controller.vala"
	_g_object_unref0 (controller_items);
#line 492 "Controller.c"
}

