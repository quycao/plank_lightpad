/* TrashDockItem.c generated by valac 0.48.17, the Vala compiler
 * generated from TrashDockItem.vala, do not modify */

/**/
/*  Copyright (C) 2011 Robert Dyer*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <gio/gio.h>
#include <glib.h>
#include <string.h>
#include "plank.h"
#include <gdk/gdk.h>
#include <stdlib.h>
#include <gee.h>
#include <gtk/gtk.h>
#include <glib/gi18n-lib.h>

#define DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS (docky_nautilus_file_operations_get_type ())
#define DOCKY_NAUTILUS_FILE_OPERATIONS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS, DockyNautilusFileOperations))
#define DOCKY_IS_NAUTILUS_FILE_OPERATIONS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS))
#define DOCKY_NAUTILUS_FILE_OPERATIONS_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS, DockyNautilusFileOperationsIface))

typedef struct _DockyNautilusFileOperations DockyNautilusFileOperations;
typedef struct _DockyNautilusFileOperationsIface DockyNautilusFileOperationsIface;

#define DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS_PROXY (docky_nautilus_file_operations_proxy_get_type ())
typedef GDBusProxy DockyNautilusFileOperationsProxy;
typedef GDBusProxyClass DockyNautilusFileOperationsProxyClass;

#define DOCKY_TYPE_TRASH_DOCK_ITEM (docky_trash_dock_item_get_type ())
#define DOCKY_TRASH_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DOCKY_TYPE_TRASH_DOCK_ITEM, DockyTrashDockItem))
#define DOCKY_TRASH_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DOCKY_TYPE_TRASH_DOCK_ITEM, DockyTrashDockItemClass))
#define DOCKY_IS_TRASH_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DOCKY_TYPE_TRASH_DOCK_ITEM))
#define DOCKY_IS_TRASH_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DOCKY_TYPE_TRASH_DOCK_ITEM))
#define DOCKY_TRASH_DOCK_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DOCKY_TYPE_TRASH_DOCK_ITEM, DockyTrashDockItemClass))

typedef struct _DockyTrashDockItem DockyTrashDockItem;
typedef struct _DockyTrashDockItemClass DockyTrashDockItemClass;
typedef struct _DockyTrashDockItemPrivate DockyTrashDockItemPrivate;
enum  {
	DOCKY_TRASH_DOCK_ITEM_0_PROPERTY,
	DOCKY_TRASH_DOCK_ITEM_NUM_PROPERTIES
};
static GParamSpec* docky_trash_dock_item_properties[DOCKY_TRASH_DOCK_ITEM_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_settings_schema_unref0(var) ((var == NULL) ? NULL : (var = (g_settings_schema_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block1Data Block1Data;
typedef struct _Block2Data Block2Data;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _DockyNautilusFileOperationsIface {
	GTypeInterface parent_iface;
	void (*empty_trash) (DockyNautilusFileOperations* self, GError** error);
};

struct _DockyTrashDockItem {
	PlankDockletItem parent_instance;
	DockyTrashDockItemPrivate * priv;
};

struct _DockyTrashDockItemClass {
	PlankDockletItemClass parent_class;
};

struct _DockyTrashDockItemPrivate {
	GFileMonitor* trash_monitor;
	GFile* owned_file;
	gboolean confirm_trash_delete;
};

struct _Block1Data {
	int _ref_count_;
	DockyTrashDockItem* self;
	GFile* f;
};

struct _Block2Data {
	int _ref_count_;
	DockyTrashDockItem* self;
	GtkMessageDialog* md;
};

static gint DockyTrashDockItem_private_offset;
static gpointer docky_trash_dock_item_parent_class = NULL;

GType docky_nautilus_file_operations_proxy_get_type (void) G_GNUC_CONST;
G_GNUC_INTERNAL guint docky_nautilus_file_operations_register_object (void* object,
                                                      GDBusConnection* connection,
                                                      const gchar* path,
                                                      GError** error);
G_GNUC_INTERNAL GType docky_nautilus_file_operations_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
G_GNUC_INTERNAL void docky_nautilus_file_operations_empty_trash (DockyNautilusFileOperations* self,
                                                 GError** error);
static GType docky_nautilus_file_operations_get_type_once (void);
static void docky_nautilus_file_operations_proxy_g_signal (GDBusProxy* proxy,
                                                    const gchar* sender_name,
                                                    const gchar* signal_name,
                                                    GVariant* parameters);
static void docky_nautilus_file_operations_proxy_empty_trash (DockyNautilusFileOperations* self,
                                                       GError** error);
static void docky_nautilus_file_operations_proxy_docky_nautilus_file_operations_interface_init (DockyNautilusFileOperationsIface* iface);
static void _dbus_docky_nautilus_file_operations_empty_trash (DockyNautilusFileOperations* self,
                                                       GVariant* _parameters_,
                                                       GDBusMethodInvocation* invocation);
static void docky_nautilus_file_operations_dbus_interface_method_call (GDBusConnection* connection,
                                                                const gchar* sender,
                                                                const gchar* object_path,
                                                                const gchar* interface_name,
                                                                const gchar* method_name,
                                                                GVariant* parameters,
                                                                GDBusMethodInvocation* invocation,
                                                                gpointer user_data);
static GVariant* docky_nautilus_file_operations_dbus_interface_get_property (GDBusConnection* connection,
                                                                      const gchar* sender,
                                                                      const gchar* object_path,
                                                                      const gchar* interface_name,
                                                                      const gchar* property_name,
                                                                      GError** error,
                                                                      gpointer user_data);
static gboolean docky_nautilus_file_operations_dbus_interface_set_property (GDBusConnection* connection,
                                                                     const gchar* sender,
                                                                     const gchar* object_path,
                                                                     const gchar* interface_name,
                                                                     const gchar* property_name,
                                                                     GVariant* value,
                                                                     GError** error,
                                                                     gpointer user_data);
static void _docky_nautilus_file_operations_unregister_object (gpointer user_data);
GType docky_trash_dock_item_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (DockyTrashDockItem, g_object_unref)
static void docky_trash_dock_item_trash_changed (GFile* f,
                                          GFile* other,
                                          GFileMonitorEvent event,
                                          DockyTrashDockItem* self);
static void _docky_trash_dock_item_trash_changed_g_file_monitor_changed (GFileMonitor* _sender,
                                                                  GFile* file,
                                                                  GFile* other_file,
                                                                  GFileMonitorEvent event_type,
                                                                  gpointer self);
static GSettings* docky_trash_dock_item_create_settings (const gchar* schema_id,
                                                  const gchar* path);
DockyTrashDockItem* docky_trash_dock_item_new_with_dockitem_file (GFile* file);
DockyTrashDockItem* docky_trash_dock_item_construct_with_dockitem_file (GType object_type,
                                                                        GFile* file);
static void docky_trash_dock_item_update (DockyTrashDockItem* self);
static guint32 docky_trash_dock_item_get_trash_item_count (DockyTrashDockItem* self);
static PlankAnimationType docky_trash_dock_item_real_on_clicked (PlankDockElement* base,
                                                          PlankPopupButton button,
                                                          GdkModifierType mod,
                                                          guint32 event_time);
static void docky_trash_dock_item_open_trash (DockyTrashDockItem* self);
static gchar* docky_trash_dock_item_real_get_drop_text (PlankDockElement* base);
static gboolean docky_trash_dock_item_real_can_accept_drop (PlankDockElement* base,
                                                     GeeArrayList* uris);
static gboolean docky_trash_dock_item_real_accept_drop (PlankDockElement* base,
                                                 GeeArrayList* uris);
static inline gboolean docky_trash_dock_item_receive_item (const gchar* uri);
static GeeArrayList* docky_trash_dock_item_real_get_menu_items (PlankDockElement* base);
static gint docky_trash_dock_item_compare_files (GFile* left,
                                          GFile* right);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void _____lambda4_ (Block1Data* _data1_);
static void docky_trash_dock_item_restore_file (DockyTrashDockItem* self,
                                         GFile* f);
static void ______lambda4__gtk_menu_item_activate (GtkMenuItem* _sender,
                                            gpointer self);
static void _docky_trash_dock_item_open_trash_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                               gpointer self);
static void docky_trash_dock_item_empty_trash (DockyTrashDockItem* self);
static void _docky_trash_dock_item_empty_trash_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                                gpointer self);
static void docky_trash_dock_item_empty_trash_internal (DockyTrashDockItem* self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void docky_trash_dock_item_perform_empty_trash (DockyTrashDockItem* self);
static void __lambda7_ (Block2Data* _data2_,
                 gint response_id);
static void ___lambda7__gtk_dialog_response (GtkDialog* _sender,
                                      gint response_id,
                                      gpointer self);
static void* __lambda5_ (DockyTrashDockItem* self,
                  GError** error);
static void docky_trash_dock_item_delete_children_recursive (GFile* file);
static gpointer ___lambda5__plank_task_func (gpointer self,
                                      GError** error);
static void __lambda6_ (DockyTrashDockItem* self);
static void ___lambda6__gasync_ready_callback (GObject* source_object,
                                        GAsyncResult* res,
                                        gpointer self);
DockyTrashDockItem* docky_trash_dock_item_new (void);
DockyTrashDockItem* docky_trash_dock_item_construct (GType object_type);
static GObject * docky_trash_dock_item_constructor (GType type,
                                             guint n_construct_properties,
                                             GObjectConstructParam * construct_properties);
static gboolean _vala_string_array_contains (gchar* * stack,
                                      gint stack_length,
                                      const gchar* needle);
static void docky_trash_dock_item_finalize (GObject * obj);
static GType docky_trash_dock_item_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);

static const GDBusArgInfo * const _docky_nautilus_file_operations_dbus_arg_info_empty_trash_in[] = {NULL};
static const GDBusArgInfo * const _docky_nautilus_file_operations_dbus_arg_info_empty_trash_out[] = {NULL};
static const GDBusMethodInfo _docky_nautilus_file_operations_dbus_method_info_empty_trash = {-1, "EmptyTrash", (GDBusArgInfo **) (&_docky_nautilus_file_operations_dbus_arg_info_empty_trash_in), (GDBusArgInfo **) (&_docky_nautilus_file_operations_dbus_arg_info_empty_trash_out), NULL};
static const GDBusMethodInfo * const _docky_nautilus_file_operations_dbus_method_info[] = {&_docky_nautilus_file_operations_dbus_method_info_empty_trash, NULL};
static const GDBusSignalInfo * const _docky_nautilus_file_operations_dbus_signal_info[] = {NULL};
static const GDBusPropertyInfo * const _docky_nautilus_file_operations_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _docky_nautilus_file_operations_dbus_interface_info = {-1, "org.gnome.Nautilus.FileOperations", (GDBusMethodInfo **) (&_docky_nautilus_file_operations_dbus_method_info), (GDBusSignalInfo **) (&_docky_nautilus_file_operations_dbus_signal_info), (GDBusPropertyInfo **) (&_docky_nautilus_file_operations_dbus_property_info), NULL};
static const GDBusInterfaceVTable _docky_nautilus_file_operations_dbus_interface_vtable = {docky_nautilus_file_operations_dbus_interface_method_call, docky_nautilus_file_operations_dbus_interface_get_property, docky_nautilus_file_operations_dbus_interface_set_property};

void
docky_nautilus_file_operations_empty_trash (DockyNautilusFileOperations* self,
                                            GError** error)
{
#line 26 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 26 "../docklets/Trash/TrashDockItem.vala"
	DOCKY_NAUTILUS_FILE_OPERATIONS_GET_INTERFACE (self)->empty_trash (self, error);
#line 244 "TrashDockItem.c"
}

static void
docky_nautilus_file_operations_default_init (DockyNautilusFileOperationsIface * iface,
                                             gpointer iface_data)
{
}

static GType
docky_nautilus_file_operations_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (DockyNautilusFileOperationsIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) docky_nautilus_file_operations_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType docky_nautilus_file_operations_type_id;
	docky_nautilus_file_operations_type_id = g_type_register_static (G_TYPE_INTERFACE, "DockyNautilusFileOperations", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (docky_nautilus_file_operations_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (docky_nautilus_file_operations_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) docky_nautilus_file_operations_proxy_get_type);
	g_type_set_qdata (docky_nautilus_file_operations_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.gnome.Nautilus.FileOperations");
	g_type_set_qdata (docky_nautilus_file_operations_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_docky_nautilus_file_operations_dbus_interface_info));
	g_type_set_qdata (docky_nautilus_file_operations_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) docky_nautilus_file_operations_register_object);
	return docky_nautilus_file_operations_type_id;
}

G_GNUC_INTERNAL GType
docky_nautilus_file_operations_get_type (void)
{
	static volatile gsize docky_nautilus_file_operations_type_id__volatile = 0;
	if (g_once_init_enter (&docky_nautilus_file_operations_type_id__volatile)) {
		GType docky_nautilus_file_operations_type_id;
		docky_nautilus_file_operations_type_id = docky_nautilus_file_operations_get_type_once ();
		g_once_init_leave (&docky_nautilus_file_operations_type_id__volatile, docky_nautilus_file_operations_type_id);
	}
	return docky_nautilus_file_operations_type_id__volatile;
}

G_DEFINE_TYPE_EXTENDED (DockyNautilusFileOperationsProxy, docky_nautilus_file_operations_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS, docky_nautilus_file_operations_proxy_docky_nautilus_file_operations_interface_init) )
static void
docky_nautilus_file_operations_proxy_class_init (DockyNautilusFileOperationsProxyClass* klass)
{
	G_DBUS_PROXY_CLASS (klass)->g_signal = docky_nautilus_file_operations_proxy_g_signal;
}

static void
docky_nautilus_file_operations_proxy_g_signal (GDBusProxy* proxy,
                                               const gchar* sender_name,
                                               const gchar* signal_name,
                                               GVariant* parameters)
{
}

static void
docky_nautilus_file_operations_proxy_init (DockyNautilusFileOperationsProxy* self)
{
}

static void
docky_nautilus_file_operations_proxy_empty_trash (DockyNautilusFileOperations* self,
                                                  GError** error)
{
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
	G_DBUS_ERROR;
	G_IO_ERROR;
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.gnome.Nautilus.FileOperations", "EmptyTrash");
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
	_arguments = g_variant_builder_end (&_arguments_builder);
	g_dbus_message_set_body (_message, _arguments);
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
	g_object_unref (_message);
	if (!_reply_message) {
		return;
	}
	if (g_dbus_message_to_gerror (_reply_message, error)) {
		g_object_unref (_reply_message);
		return;
	}
	g_object_unref (_reply_message);
}

static void
docky_nautilus_file_operations_proxy_docky_nautilus_file_operations_interface_init (DockyNautilusFileOperationsIface* iface)
{
	iface->empty_trash = docky_nautilus_file_operations_proxy_empty_trash;
}

static void
_dbus_docky_nautilus_file_operations_empty_trash (DockyNautilusFileOperations* self,
                                                  GVariant* _parameters_,
                                                  GDBusMethodInvocation* invocation)
{
	GError* error = NULL;
	GVariantIter _arguments_iter;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	g_variant_iter_init (&_arguments_iter, _parameters_);
	docky_nautilus_file_operations_empty_trash (self, &error);
	if (error) {
		g_dbus_method_invocation_return_gerror (invocation, error);
		g_error_free (error);
		return;
	}
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
	_reply = g_variant_builder_end (&_reply_builder);
	g_dbus_message_set_body (_reply_message, _reply);
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
	g_object_unref (invocation);
	g_object_unref (_reply_message);
}

static void
docky_nautilus_file_operations_dbus_interface_method_call (GDBusConnection* connection,
                                                           const gchar* sender,
                                                           const gchar* object_path,
                                                           const gchar* interface_name,
                                                           const gchar* method_name,
                                                           GVariant* parameters,
                                                           GDBusMethodInvocation* invocation,
                                                           gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	if (strcmp (method_name, "EmptyTrash") == 0) {
		_dbus_docky_nautilus_file_operations_empty_trash (object, parameters, invocation);
	} else {
		g_object_unref (invocation);
	}
}

static GVariant*
docky_nautilus_file_operations_dbus_interface_get_property (GDBusConnection* connection,
                                                            const gchar* sender,
                                                            const gchar* object_path,
                                                            const gchar* interface_name,
                                                            const gchar* property_name,
                                                            GError** error,
                                                            gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return NULL;
}

static gboolean
docky_nautilus_file_operations_dbus_interface_set_property (GDBusConnection* connection,
                                                            const gchar* sender,
                                                            const gchar* object_path,
                                                            const gchar* interface_name,
                                                            const gchar* property_name,
                                                            GVariant* value,
                                                            GError** error,
                                                            gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
	return FALSE;
}

G_GNUC_INTERNAL guint
docky_nautilus_file_operations_register_object (gpointer object,
                                                GDBusConnection* connection,
                                                const gchar* path,
                                                GError** error)
{
	guint result;
	gpointer *data;
	data = g_new (gpointer, 3);
	data[0] = g_object_ref (object);
	data[1] = g_object_ref (connection);
	data[2] = g_strdup (path);
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_docky_nautilus_file_operations_dbus_interface_info), &_docky_nautilus_file_operations_dbus_interface_vtable, data, _docky_nautilus_file_operations_unregister_object, error);
	if (!result) {
		return 0;
	}
	return result;
}

static void
_docky_nautilus_file_operations_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
	g_object_unref (data[0]);
	g_object_unref (data[1]);
	g_free (data[2]);
	g_free (data);
}

static inline gpointer
docky_trash_dock_item_get_instance_private (DockyTrashDockItem* self)
{
	return G_STRUCT_MEMBER_P (self, DockyTrashDockItem_private_offset);
}

static void
_docky_trash_dock_item_trash_changed_g_file_monitor_changed (GFileMonitor* _sender,
                                                             GFile* file,
                                                             GFile* other_file,
                                                             GFileMonitorEvent event_type,
                                                             gpointer self)
{
#line 75 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_trash_changed (file, other_file, event_type, (DockyTrashDockItem*) self);
#line 456 "TrashDockItem.c"
}

static GSettings*
docky_trash_dock_item_create_settings (const gchar* schema_id,
                                       const gchar* path)
{
	GSettingsSchema* schema = NULL;
	GSettingsSchemaSource* _tmp0_;
	GSettingsSchema* _tmp1_;
	GSettingsSchema* _tmp2_;
	GSettingsSchema* _tmp3_;
	GSettings* _tmp4_;
	GSettings* result = NULL;
#line 31 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (schema_id != NULL, NULL);
#line 33 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = g_settings_schema_source_get_default ();
#line 33 "../docklets/Trash/TrashDockItem.vala"
	_tmp1_ = g_settings_schema_source_lookup (_tmp0_, schema_id, TRUE);
#line 33 "../docklets/Trash/TrashDockItem.vala"
	schema = _tmp1_;
#line 34 "../docklets/Trash/TrashDockItem.vala"
	_tmp2_ = schema;
#line 34 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp2_ == NULL) {
#line 35 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:35: GSettingsSchema '%s' not found", schema_id);
#line 36 "../docklets/Trash/TrashDockItem.vala"
		result = NULL;
#line 36 "../docklets/Trash/TrashDockItem.vala"
		_g_settings_schema_unref0 (schema);
#line 36 "../docklets/Trash/TrashDockItem.vala"
		return result;
#line 490 "TrashDockItem.c"
	}
#line 39 "../docklets/Trash/TrashDockItem.vala"
	_tmp3_ = schema;
#line 39 "../docklets/Trash/TrashDockItem.vala"
	_tmp4_ = g_settings_new_full (_tmp3_, NULL, path);
#line 39 "../docklets/Trash/TrashDockItem.vala"
	result = _tmp4_;
#line 39 "../docklets/Trash/TrashDockItem.vala"
	_g_settings_schema_unref0 (schema);
#line 39 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 502 "TrashDockItem.c"
}

/**
 * {@inheritDoc}
 */
DockyTrashDockItem*
docky_trash_dock_item_construct_with_dockitem_file (GType object_type,
                                                    GFile* file)
{
	DockyTrashDockItem * self = NULL;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
#line 49 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 51 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = plank_dock_item_preferences_new_with_file (file);
#line 51 "../docklets/Trash/TrashDockItem.vala"
	_tmp1_ = _tmp0_;
#line 51 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) g_object_new (object_type, "Prefs", _tmp1_, NULL);
#line 51 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (_tmp1_);
#line 49 "../docklets/Trash/TrashDockItem.vala"
	return self;
#line 527 "TrashDockItem.c"
}

DockyTrashDockItem*
docky_trash_dock_item_new_with_dockitem_file (GFile* file)
{
#line 49 "../docklets/Trash/TrashDockItem.vala"
	return docky_trash_dock_item_construct_with_dockitem_file (DOCKY_TYPE_TRASH_DOCK_ITEM, file);
#line 535 "TrashDockItem.c"
}

static void
docky_trash_dock_item_trash_changed (GFile* f,
                                     GFile* other,
                                     GFileMonitorEvent event,
                                     DockyTrashDockItem* self)
{
#line 82 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 82 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (f != NULL);
#line 84 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_update (self);
#line 550 "TrashDockItem.c"
}

static void
docky_trash_dock_item_update (DockyTrashDockItem* self)
{
	guint32 item_count = 0U;
	GFile* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
#line 87 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 90 "../docklets/Trash/TrashDockItem.vala"
	item_count = docky_trash_dock_item_get_trash_item_count (self);
#line 91 "../docklets/Trash/TrashDockItem.vala"
	if (item_count == ((guint32) 0U)) {
#line 92 "../docklets/Trash/TrashDockItem.vala"
		plank_dock_element_set_Text ((PlankDockElement*) self, _ ("No items in Trash"));
#line 568 "TrashDockItem.c"
	} else {
		gchar* _tmp0_;
		gchar* _tmp1_;
#line 94 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = g_strdup_printf (ngettext ("%u item in Trash", "%u items in Trash", (gulong) item_count), (guint) item_count);
#line 94 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = _tmp0_;
#line 94 "../docklets/Trash/TrashDockItem.vala"
		plank_dock_element_set_Text ((PlankDockElement*) self, _tmp1_);
#line 94 "../docklets/Trash/TrashDockItem.vala"
		_g_free0 (_tmp1_);
#line 580 "TrashDockItem.c"
	}
#line 96 "../docklets/Trash/TrashDockItem.vala"
	_tmp2_ = self->priv->owned_file;
#line 96 "../docklets/Trash/TrashDockItem.vala"
	_tmp3_ = plank_drawing_service_get_icon_from_file (_tmp2_);
#line 96 "../docklets/Trash/TrashDockItem.vala"
	_tmp4_ = _tmp3_;
#line 96 "../docklets/Trash/TrashDockItem.vala"
	plank_dock_item_set_Icon ((PlankDockItem*) self, _tmp4_);
#line 96 "../docklets/Trash/TrashDockItem.vala"
	_g_free0 (_tmp4_);
#line 592 "TrashDockItem.c"
}

static guint32
docky_trash_dock_item_get_trash_item_count (DockyTrashDockItem* self)
{
	GError* _inner_error0_ = NULL;
	guint32 result = 0U;
#line 99 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (self != NULL, 0U);
#line 602 "TrashDockItem.c"
	{
		GFileInfo* _tmp0_ = NULL;
		GFile* _tmp1_;
		GFileInfo* _tmp2_;
#line 102 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = self->priv->owned_file;
#line 102 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = g_file_query_info (_tmp1_, G_FILE_ATTRIBUTE_TRASH_ITEM_COUNT, 0, NULL, &_inner_error0_);
#line 102 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _tmp2_;
#line 102 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 615 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 102 "../docklets/Trash/TrashDockItem.vala"
		result = g_file_info_get_attribute_uint32 (_tmp0_, G_FILE_ATTRIBUTE_TRASH_ITEM_COUNT);
#line 102 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp0_);
#line 102 "../docklets/Trash/TrashDockItem.vala"
		return result;
#line 624 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 101 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 104 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:104: Could not get item count from trash::item-coun" \
"t.");
#line 633 "TrashDockItem.c"
	}
	__finally0:
#line 101 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 638 "TrashDockItem.c"
		guint32 _tmp3_ = 0U;
#line 101 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 101 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 101 "../docklets/Trash/TrashDockItem.vala"
		return _tmp3_;
#line 646 "TrashDockItem.c"
	}
#line 107 "../docklets/Trash/TrashDockItem.vala"
	result = (guint32) 0U;
#line 107 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 652 "TrashDockItem.c"
}

static PlankAnimationType
docky_trash_dock_item_real_on_clicked (PlankDockElement* base,
                                       PlankPopupButton button,
                                       GdkModifierType mod,
                                       guint32 event_time)
{
	DockyTrashDockItem * self;
	PlankAnimationType result = 0;
#line 110 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) base;
#line 112 "../docklets/Trash/TrashDockItem.vala"
	if (button == PLANK_POPUP_BUTTON_LEFT) {
#line 113 "../docklets/Trash/TrashDockItem.vala"
		docky_trash_dock_item_open_trash (self);
#line 114 "../docklets/Trash/TrashDockItem.vala"
		result = PLANK_ANIMATION_TYPE_BOUNCE;
#line 114 "../docklets/Trash/TrashDockItem.vala"
		return result;
#line 673 "TrashDockItem.c"
	}
#line 117 "../docklets/Trash/TrashDockItem.vala"
	result = PLANK_ANIMATION_TYPE_NONE;
#line 117 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 679 "TrashDockItem.c"
}

static gchar*
docky_trash_dock_item_real_get_drop_text (PlankDockElement* base)
{
	DockyTrashDockItem * self;
	gchar* _tmp0_;
	gchar* result = NULL;
#line 120 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) base;
#line 122 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = g_strdup (_ ("Drop to move to Trash"));
#line 122 "../docklets/Trash/TrashDockItem.vala"
	result = _tmp0_;
#line 122 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 696 "TrashDockItem.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 129 "../docklets/Trash/TrashDockItem.vala"
	return self ? g_object_ref (self) : NULL;
#line 704 "TrashDockItem.c"
}

static gboolean
docky_trash_dock_item_real_can_accept_drop (PlankDockElement* base,
                                            GeeArrayList* uris)
{
	DockyTrashDockItem * self;
	gboolean accepted = FALSE;
	gboolean result = FALSE;
#line 125 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) base;
#line 125 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (uris != NULL, FALSE);
#line 127 "../docklets/Trash/TrashDockItem.vala"
	accepted = FALSE;
#line 720 "TrashDockItem.c"
	{
		GeeArrayList* _uri_list = NULL;
		GeeArrayList* _tmp0_;
		gint _uri_size = 0;
		GeeArrayList* _tmp1_;
		gint _tmp2_;
		gint _tmp3_;
		gint _uri_index = 0;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _g_object_ref0 (uris);
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_uri_list = _tmp0_;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = _uri_list;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp1_);
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = _tmp2_;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_uri_size = _tmp3_;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_uri_index = -1;
#line 129 "../docklets/Trash/TrashDockItem.vala"
		while (TRUE) {
#line 745 "TrashDockItem.c"
			gint _tmp4_;
			gint _tmp5_;
			gchar* uri = NULL;
			GeeArrayList* _tmp6_;
			gpointer _tmp7_;
			const gchar* _tmp8_;
			GFile* _tmp9_;
			GFile* _tmp10_;
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_uri_index = _uri_index + 1;
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_tmp4_ = _uri_index;
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_tmp5_ = _uri_size;
#line 129 "../docklets/Trash/TrashDockItem.vala"
			if (!(_tmp4_ < _tmp5_)) {
#line 129 "../docklets/Trash/TrashDockItem.vala"
				break;
#line 764 "TrashDockItem.c"
			}
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_tmp6_ = _uri_list;
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_tmp7_ = gee_abstract_list_get ((GeeAbstractList*) _tmp6_, _uri_index);
#line 129 "../docklets/Trash/TrashDockItem.vala"
			uri = (gchar*) _tmp7_;
#line 130 "../docklets/Trash/TrashDockItem.vala"
			_tmp8_ = uri;
#line 130 "../docklets/Trash/TrashDockItem.vala"
			_tmp9_ = g_file_new_for_uri (_tmp8_);
#line 130 "../docklets/Trash/TrashDockItem.vala"
			_tmp10_ = _tmp9_;
#line 130 "../docklets/Trash/TrashDockItem.vala"
			accepted |= g_file_query_exists (_tmp10_, NULL);
#line 130 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (_tmp10_);
#line 129 "../docklets/Trash/TrashDockItem.vala"
			_g_free0 (uri);
#line 784 "TrashDockItem.c"
		}
#line 129 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_uri_list);
#line 788 "TrashDockItem.c"
	}
#line 132 "../docklets/Trash/TrashDockItem.vala"
	result = accepted;
#line 132 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 794 "TrashDockItem.c"
}

static gboolean
docky_trash_dock_item_real_accept_drop (PlankDockElement* base,
                                        GeeArrayList* uris)
{
	DockyTrashDockItem * self;
	gboolean accepted = FALSE;
	gboolean result = FALSE;
#line 135 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) base;
#line 135 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (uris != NULL, FALSE);
#line 137 "../docklets/Trash/TrashDockItem.vala"
	accepted = FALSE;
#line 810 "TrashDockItem.c"
	{
		GeeArrayList* _uri_list = NULL;
		GeeArrayList* _tmp0_;
		gint _uri_size = 0;
		GeeArrayList* _tmp1_;
		gint _tmp2_;
		gint _tmp3_;
		gint _uri_index = 0;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _g_object_ref0 (uris);
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_uri_list = _tmp0_;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = _uri_list;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp1_);
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = _tmp2_;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_uri_size = _tmp3_;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_uri_index = -1;
#line 139 "../docklets/Trash/TrashDockItem.vala"
		while (TRUE) {
#line 835 "TrashDockItem.c"
			gint _tmp4_;
			gint _tmp5_;
			gchar* uri = NULL;
			GeeArrayList* _tmp6_;
			gpointer _tmp7_;
			const gchar* _tmp8_;
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_uri_index = _uri_index + 1;
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_tmp4_ = _uri_index;
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_tmp5_ = _uri_size;
#line 139 "../docklets/Trash/TrashDockItem.vala"
			if (!(_tmp4_ < _tmp5_)) {
#line 139 "../docklets/Trash/TrashDockItem.vala"
				break;
#line 852 "TrashDockItem.c"
			}
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_tmp6_ = _uri_list;
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_tmp7_ = gee_abstract_list_get ((GeeAbstractList*) _tmp6_, _uri_index);
#line 139 "../docklets/Trash/TrashDockItem.vala"
			uri = (gchar*) _tmp7_;
#line 140 "../docklets/Trash/TrashDockItem.vala"
			_tmp8_ = uri;
#line 140 "../docklets/Trash/TrashDockItem.vala"
			accepted |= docky_trash_dock_item_receive_item (_tmp8_);
#line 139 "../docklets/Trash/TrashDockItem.vala"
			_g_free0 (uri);
#line 866 "TrashDockItem.c"
		}
#line 139 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_uri_list);
#line 870 "TrashDockItem.c"
	}
#line 142 "../docklets/Trash/TrashDockItem.vala"
	if (accepted) {
#line 143 "../docklets/Trash/TrashDockItem.vala"
		docky_trash_dock_item_update (self);
#line 876 "TrashDockItem.c"
	}
#line 145 "../docklets/Trash/TrashDockItem.vala"
	result = accepted;
#line 145 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 882 "TrashDockItem.c"
}

static inline gboolean
docky_trash_dock_item_receive_item (const gchar* uri)
{
	gboolean trashed = FALSE;
	GError* _inner_error0_ = NULL;
	gboolean result = FALSE;
#line 148 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (uri != NULL, FALSE);
#line 150 "../docklets/Trash/TrashDockItem.vala"
	trashed = FALSE;
#line 895 "TrashDockItem.c"
	{
		gboolean _tmp0_ = FALSE;
		GFile* _tmp1_;
		GFile* _tmp2_;
		gboolean _tmp3_;
#line 153 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = g_file_new_for_uri (uri);
#line 153 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = _tmp1_;
#line 153 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = g_file_trash (_tmp2_, NULL, &_inner_error0_);
#line 153 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp2_);
#line 153 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _tmp3_;
#line 153 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 913 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 153 "../docklets/Trash/TrashDockItem.vala"
		trashed = _tmp0_;
#line 918 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 152 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 925 "TrashDockItem.c"
	}
	__finally0:
#line 152 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 930 "TrashDockItem.c"
		gboolean _tmp4_ = FALSE;
#line 152 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 152 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 152 "../docklets/Trash/TrashDockItem.vala"
		return _tmp4_;
#line 938 "TrashDockItem.c"
	}
#line 156 "../docklets/Trash/TrashDockItem.vala"
	if (!trashed) {
#line 157 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:157: Could not move '%s' to trash.'", uri);
#line 944 "TrashDockItem.c"
	}
#line 159 "../docklets/Trash/TrashDockItem.vala"
	result = trashed;
#line 159 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 950 "TrashDockItem.c"
}

static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 186 "../docklets/Trash/TrashDockItem.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 186 "../docklets/Trash/TrashDockItem.vala"
	return _data1_;
#line 960 "TrashDockItem.c"
}

static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 186 "../docklets/Trash/TrashDockItem.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 970 "TrashDockItem.c"
		DockyTrashDockItem* self;
#line 186 "../docklets/Trash/TrashDockItem.vala"
		self = _data1_->self;
#line 186 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_data1_->f);
#line 186 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (self);
#line 186 "../docklets/Trash/TrashDockItem.vala"
		g_slice_free (Block1Data, _data1_);
#line 980 "TrashDockItem.c"
	}
}

static void
_____lambda4_ (Block1Data* _data1_)
{
	DockyTrashDockItem* self;
	GFile* _tmp0_;
#line 189 "../docklets/Trash/TrashDockItem.vala"
	self = _data1_->self;
#line 189 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = _data1_->f;
#line 189 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_restore_file (self, _tmp0_);
#line 995 "TrashDockItem.c"
}

static void
______lambda4__gtk_menu_item_activate (GtkMenuItem* _sender,
                                       gpointer self)
{
#line 189 "../docklets/Trash/TrashDockItem.vala"
	_____lambda4_ (self);
#line 1004 "TrashDockItem.c"
}

static void
_docky_trash_dock_item_open_trash_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                          gpointer self)
{
#line 203 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_open_trash ((DockyTrashDockItem*) self);
#line 1013 "TrashDockItem.c"
}

static void
_docky_trash_dock_item_empty_trash_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                           gpointer self)
{
#line 207 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_empty_trash ((DockyTrashDockItem*) self);
#line 1022 "TrashDockItem.c"
}

static GeeArrayList*
docky_trash_dock_item_real_get_menu_items (PlankDockElement* base)
{
	DockyTrashDockItem * self;
	GeeArrayList* items = NULL;
	GeeArrayList* _tmp0_;
	GtkMenuItem* item = NULL;
	const gchar* _tmp53_;
	const gchar* _tmp54_;
	GtkMenuItem* _tmp55_;
	GtkMenuItem* _tmp56_;
	GeeArrayList* _tmp57_;
	GtkMenuItem* _tmp58_;
	GtkMenuItem* _tmp59_;
	GtkMenuItem* _tmp60_;
	GeeArrayList* _tmp62_;
	GtkMenuItem* _tmp63_;
	GError* _inner_error0_ = NULL;
	GeeArrayList* result = NULL;
#line 162 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) base;
#line 164 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = gee_array_list_new (gtk_menu_item_get_type (), (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
#line 164 "../docklets/Trash/TrashDockItem.vala"
	items = _tmp0_;
#line 1050 "TrashDockItem.c"
	{
		GFileEnumerator* enumerator = NULL;
		GFile* _tmp1_;
		GFileEnumerator* _tmp2_;
		GeeArrayList* files = NULL;
		GeeArrayList* _tmp3_;
		GFileEnumerator* _tmp4_;
		GeeArrayList* _tmp17_;
		gint _tmp18_;
		gint _tmp19_;
		GeeArrayList* _tmp23_;
		gint count = 0;
		GeeArrayList* _tmp47_;
		gint _tmp48_;
		gint _tmp49_;
#line 167 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = self->priv->owned_file;
#line 167 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = g_file_enumerate_children (_tmp1_, G_FILE_ATTRIBUTE_STANDARD_TYPE "," G_FILE_ATTRIBUTE_STANDARD_NAME, G_FILE_QUERY_INFO_NOFOLLOW_SYMLINKS, NULL, &_inner_error0_);
#line 167 "../docklets/Trash/TrashDockItem.vala"
		enumerator = _tmp2_;
#line 167 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1074 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 169 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = gee_array_list_new (g_file_get_type (), (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
#line 169 "../docklets/Trash/TrashDockItem.vala"
		files = _tmp3_;
#line 171 "../docklets/Trash/TrashDockItem.vala"
		_tmp4_ = enumerator;
#line 171 "../docklets/Trash/TrashDockItem.vala"
		if (_tmp4_ != NULL) {
#line 1085 "TrashDockItem.c"
			GFileInfo* info = NULL;
			GFileEnumerator* _tmp16_;
#line 174 "../docklets/Trash/TrashDockItem.vala"
			while (TRUE) {
#line 1090 "TrashDockItem.c"
				GFileInfo* _tmp5_ = NULL;
				GFileEnumerator* _tmp6_;
				GFileInfo* _tmp7_;
				GFileInfo* _tmp8_;
				GFileInfo* _tmp9_;
				GeeArrayList* _tmp10_;
				GFile* _tmp11_;
				GFileInfo* _tmp12_;
				const gchar* _tmp13_;
				GFile* _tmp14_;
				GFile* _tmp15_;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp6_ = enumerator;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp7_ = g_file_enumerator_next_file (_tmp6_, NULL, &_inner_error0_);
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp5_ = _tmp7_;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 174 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (info);
#line 174 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (files);
#line 174 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (enumerator);
#line 1116 "TrashDockItem.c"
					goto __catch0_g_error;
				}
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp8_ = _tmp5_;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp5_ = NULL;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (info);
#line 174 "../docklets/Trash/TrashDockItem.vala"
				info = _tmp8_;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_tmp9_ = info;
#line 174 "../docklets/Trash/TrashDockItem.vala"
				if (!(_tmp9_ != NULL)) {
#line 174 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (_tmp5_);
#line 174 "../docklets/Trash/TrashDockItem.vala"
					break;
#line 1135 "TrashDockItem.c"
				}
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp10_ = files;
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp11_ = self->priv->owned_file;
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp12_ = info;
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp13_ = g_file_info_get_name (_tmp12_);
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp14_ = g_file_get_child (_tmp11_, _tmp13_);
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_tmp15_ = _tmp14_;
#line 175 "../docklets/Trash/TrashDockItem.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp10_, _tmp15_);
#line 175 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_tmp15_);
#line 174 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_tmp5_);
#line 1155 "TrashDockItem.c"
			}
#line 177 "../docklets/Trash/TrashDockItem.vala"
			_tmp16_ = enumerator;
#line 177 "../docklets/Trash/TrashDockItem.vala"
			g_file_enumerator_close (_tmp16_, NULL, &_inner_error0_);
#line 177 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 177 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (info);
#line 177 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (files);
#line 177 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (enumerator);
#line 1169 "TrashDockItem.c"
				goto __catch0_g_error;
			}
#line 171 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (info);
#line 1174 "TrashDockItem.c"
		}
#line 180 "../docklets/Trash/TrashDockItem.vala"
		_tmp17_ = files;
#line 180 "../docklets/Trash/TrashDockItem.vala"
		_tmp18_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp17_);
#line 180 "../docklets/Trash/TrashDockItem.vala"
		_tmp19_ = _tmp18_;
#line 180 "../docklets/Trash/TrashDockItem.vala"
		if (_tmp19_ > 0) {
#line 1184 "TrashDockItem.c"
			GeeArrayList* _tmp20_;
			PlankTitledSeparatorMenuItem* _tmp21_;
			PlankTitledSeparatorMenuItem* _tmp22_;
#line 181 "../docklets/Trash/TrashDockItem.vala"
			_tmp20_ = items;
#line 181 "../docklets/Trash/TrashDockItem.vala"
			_tmp21_ = plank_titled_separator_menu_item_new_no_line (_ ("Restore Files"));
#line 181 "../docklets/Trash/TrashDockItem.vala"
			g_object_ref_sink (_tmp21_);
#line 181 "../docklets/Trash/TrashDockItem.vala"
			_tmp22_ = _tmp21_;
#line 181 "../docklets/Trash/TrashDockItem.vala"
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp20_, (GtkMenuItem*) _tmp22_);
#line 181 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (_tmp22_);
#line 1200 "TrashDockItem.c"
		}
#line 183 "../docklets/Trash/TrashDockItem.vala"
		_tmp23_ = files;
#line 183 "../docklets/Trash/TrashDockItem.vala"
		gee_list_sort ((GeeList*) _tmp23_, (GCompareDataFunc) docky_trash_dock_item_compare_files, NULL, NULL);
#line 185 "../docklets/Trash/TrashDockItem.vala"
		count = 0;
#line 1208 "TrashDockItem.c"
		{
			GeeArrayList* __f_list = NULL;
			GeeArrayList* _tmp24_;
			GeeArrayList* _tmp25_;
			gint __f_size = 0;
			GeeArrayList* _tmp26_;
			gint _tmp27_;
			gint _tmp28_;
			gint __f_index = 0;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_tmp24_ = files;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_tmp25_ = _g_object_ref0 (_tmp24_);
#line 186 "../docklets/Trash/TrashDockItem.vala"
			__f_list = _tmp25_;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_tmp26_ = __f_list;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_tmp27_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp26_);
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_tmp28_ = _tmp27_;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			__f_size = _tmp28_;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			__f_index = -1;
#line 186 "../docklets/Trash/TrashDockItem.vala"
			while (TRUE) {
#line 1236 "TrashDockItem.c"
				Block1Data* _data1_;
				gint _tmp29_;
				gint _tmp30_;
				GFile* _f = NULL;
				GeeArrayList* _tmp31_;
				gpointer _tmp32_;
				GFile* _tmp33_;
				GFile* _tmp34_;
				GtkMenuItem* item = NULL;
				GFile* _tmp35_;
				gchar* _tmp36_;
				gchar* _tmp37_;
				GFile* _tmp38_;
				gchar* _tmp39_;
				gchar* _tmp40_;
				GtkMenuItem* _tmp41_;
				GtkMenuItem* _tmp42_;
				GtkMenuItem* _tmp43_;
				GeeArrayList* _tmp44_;
				GtkMenuItem* _tmp45_;
				gint _tmp46_;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_data1_ = g_slice_new0 (Block1Data);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_data1_->_ref_count_ = 1;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_data1_->self = g_object_ref (self);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				__f_index = __f_index + 1;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_tmp29_ = __f_index;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_tmp30_ = __f_size;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				if (!(_tmp29_ < _tmp30_)) {
#line 186 "../docklets/Trash/TrashDockItem.vala"
					block1_data_unref (_data1_);
#line 186 "../docklets/Trash/TrashDockItem.vala"
					_data1_ = NULL;
#line 186 "../docklets/Trash/TrashDockItem.vala"
					break;
#line 1278 "TrashDockItem.c"
				}
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_tmp31_ = __f_list;
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_tmp32_ = gee_abstract_list_get ((GeeAbstractList*) _tmp31_, __f_index);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_f = (GFile*) _tmp32_;
#line 187 "../docklets/Trash/TrashDockItem.vala"
				_tmp33_ = _f;
#line 187 "../docklets/Trash/TrashDockItem.vala"
				_tmp34_ = _g_object_ref0 (_tmp33_);
#line 187 "../docklets/Trash/TrashDockItem.vala"
				_data1_->f = _tmp34_;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp35_ = _data1_->f;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp36_ = g_file_get_basename (_tmp35_);
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp37_ = _tmp36_;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp38_ = _data1_->f;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp39_ = plank_drawing_service_get_icon_from_file (_tmp38_);
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp40_ = _tmp39_;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp41_ = plank_dock_element_create_literal_menu_item (_tmp37_, _tmp40_, FALSE);
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_tmp42_ = _tmp41_;
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_g_free0 (_tmp40_);
#line 188 "../docklets/Trash/TrashDockItem.vala"
				_g_free0 (_tmp37_);
#line 188 "../docklets/Trash/TrashDockItem.vala"
				item = _tmp42_;
#line 189 "../docklets/Trash/TrashDockItem.vala"
				_tmp43_ = item;
#line 189 "../docklets/Trash/TrashDockItem.vala"
				g_signal_connect_data (_tmp43_, "activate", (GCallback) ______lambda4__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 190 "../docklets/Trash/TrashDockItem.vala"
				_tmp44_ = items;
#line 190 "../docklets/Trash/TrashDockItem.vala"
				_tmp45_ = item;
#line 190 "../docklets/Trash/TrashDockItem.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp44_, _tmp45_);
#line 192 "../docklets/Trash/TrashDockItem.vala"
				count = count + 1;
#line 192 "../docklets/Trash/TrashDockItem.vala"
				_tmp46_ = count;
#line 192 "../docklets/Trash/TrashDockItem.vala"
				if (_tmp46_ == 5) {
#line 193 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (item);
#line 193 "../docklets/Trash/TrashDockItem.vala"
					_g_object_unref0 (_f);
#line 193 "../docklets/Trash/TrashDockItem.vala"
					block1_data_unref (_data1_);
#line 193 "../docklets/Trash/TrashDockItem.vala"
					_data1_ = NULL;
#line 193 "../docklets/Trash/TrashDockItem.vala"
					break;
#line 1340 "TrashDockItem.c"
				}
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (item);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_f);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				block1_data_unref (_data1_);
#line 186 "../docklets/Trash/TrashDockItem.vala"
				_data1_ = NULL;
#line 1350 "TrashDockItem.c"
			}
#line 186 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (__f_list);
#line 1354 "TrashDockItem.c"
		}
#line 196 "../docklets/Trash/TrashDockItem.vala"
		_tmp47_ = files;
#line 196 "../docklets/Trash/TrashDockItem.vala"
		_tmp48_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp47_);
#line 196 "../docklets/Trash/TrashDockItem.vala"
		_tmp49_ = _tmp48_;
#line 196 "../docklets/Trash/TrashDockItem.vala"
		if (_tmp49_ > 0) {
#line 1364 "TrashDockItem.c"
			GeeArrayList* _tmp50_;
			GtkSeparatorMenuItem* _tmp51_;
			GtkSeparatorMenuItem* _tmp52_;
#line 197 "../docklets/Trash/TrashDockItem.vala"
			_tmp50_ = items;
#line 197 "../docklets/Trash/TrashDockItem.vala"
			_tmp51_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
#line 197 "../docklets/Trash/TrashDockItem.vala"
			g_object_ref_sink (_tmp51_);
#line 197 "../docklets/Trash/TrashDockItem.vala"
			_tmp52_ = _tmp51_;
#line 197 "../docklets/Trash/TrashDockItem.vala"
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp50_, (GtkMenuItem*) _tmp52_);
#line 197 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (_tmp52_);
#line 1380 "TrashDockItem.c"
		}
#line 166 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (files);
#line 166 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (enumerator);
#line 1386 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 166 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 199 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:199: Could not enumerate items in the trash.");
#line 1395 "TrashDockItem.c"
	}
	__finally0:
#line 166 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 166 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (items);
#line 166 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 166 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 166 "../docklets/Trash/TrashDockItem.vala"
		return NULL;
#line 1408 "TrashDockItem.c"
	}
#line 202 "../docklets/Trash/TrashDockItem.vala"
	_tmp53_ = plank_dock_item_get_Icon ((PlankDockItem*) self);
#line 202 "../docklets/Trash/TrashDockItem.vala"
	_tmp54_ = _tmp53_;
#line 202 "../docklets/Trash/TrashDockItem.vala"
	_tmp55_ = plank_dock_element_create_menu_item (_ ("_Open Trash"), _tmp54_, FALSE);
#line 202 "../docklets/Trash/TrashDockItem.vala"
	item = _tmp55_;
#line 203 "../docklets/Trash/TrashDockItem.vala"
	_tmp56_ = item;
#line 203 "../docklets/Trash/TrashDockItem.vala"
	g_signal_connect_object (_tmp56_, "activate", (GCallback) _docky_trash_dock_item_open_trash_gtk_menu_item_activate, self, 0);
#line 204 "../docklets/Trash/TrashDockItem.vala"
	_tmp57_ = items;
#line 204 "../docklets/Trash/TrashDockItem.vala"
	_tmp58_ = item;
#line 204 "../docklets/Trash/TrashDockItem.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp57_, _tmp58_);
#line 206 "../docklets/Trash/TrashDockItem.vala"
	_tmp59_ = plank_dock_element_create_menu_item (_ ("Empty _Trash"), "gtk-clear", FALSE);
#line 206 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (item);
#line 206 "../docklets/Trash/TrashDockItem.vala"
	item = _tmp59_;
#line 207 "../docklets/Trash/TrashDockItem.vala"
	_tmp60_ = item;
#line 207 "../docklets/Trash/TrashDockItem.vala"
	g_signal_connect_object (_tmp60_, "activate", (GCallback) _docky_trash_dock_item_empty_trash_gtk_menu_item_activate, self, 0);
#line 208 "../docklets/Trash/TrashDockItem.vala"
	if (docky_trash_dock_item_get_trash_item_count (self) == ((guint32) 0U)) {
#line 1440 "TrashDockItem.c"
		GtkMenuItem* _tmp61_;
#line 209 "../docklets/Trash/TrashDockItem.vala"
		_tmp61_ = item;
#line 209 "../docklets/Trash/TrashDockItem.vala"
		gtk_widget_set_sensitive ((GtkWidget*) _tmp61_, FALSE);
#line 1446 "TrashDockItem.c"
	}
#line 210 "../docklets/Trash/TrashDockItem.vala"
	_tmp62_ = items;
#line 210 "../docklets/Trash/TrashDockItem.vala"
	_tmp63_ = item;
#line 210 "../docklets/Trash/TrashDockItem.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp62_, _tmp63_);
#line 212 "../docklets/Trash/TrashDockItem.vala"
	result = items;
#line 212 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (item);
#line 212 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 1460 "TrashDockItem.c"
}

static gint
docky_trash_dock_item_compare_files (GFile* left,
                                     GFile* right)
{
	gint _tmp9_ = -1;
	GError* _inner_error0_ = NULL;
	gint result = 0;
#line 215 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (left != NULL, 0);
#line 215 "../docklets/Trash/TrashDockItem.vala"
	g_return_val_if_fail (right != NULL, 0);
#line 1474 "TrashDockItem.c"
	{
		GFileInfo* _tmp0_ = NULL;
		GFileInfo* _tmp1_;
		const gchar* left_info = NULL;
		const gchar* _tmp2_;
		GFileInfo* _tmp3_ = NULL;
		GFileInfo* _tmp4_;
		const gchar* right_info = NULL;
		const gchar* _tmp5_;
		GCompareFunc _tmp6_;
		const gchar* _tmp7_;
		const gchar* _tmp8_;
#line 218 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = g_file_query_info (left, G_FILE_ATTRIBUTE_TRASH_DELETION_DATE, 0, NULL, &_inner_error0_);
#line 218 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _tmp1_;
#line 218 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1493 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 218 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = g_file_info_get_attribute_string (_tmp0_, G_FILE_ATTRIBUTE_TRASH_DELETION_DATE);
#line 218 "../docklets/Trash/TrashDockItem.vala"
		left_info = _tmp2_;
#line 219 "../docklets/Trash/TrashDockItem.vala"
		_tmp4_ = g_file_query_info (right, G_FILE_ATTRIBUTE_TRASH_DELETION_DATE, 0, NULL, &_inner_error0_);
#line 219 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = _tmp4_;
#line 219 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 219 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (_tmp0_);
#line 1508 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 219 "../docklets/Trash/TrashDockItem.vala"
		_tmp5_ = g_file_info_get_attribute_string (_tmp3_, G_FILE_ATTRIBUTE_TRASH_DELETION_DATE);
#line 219 "../docklets/Trash/TrashDockItem.vala"
		right_info = _tmp5_;
#line 220 "../docklets/Trash/TrashDockItem.vala"
		_tmp6_ = ((GCompareFunc) g_strcmp0);
#line 220 "../docklets/Trash/TrashDockItem.vala"
		_tmp7_ = right_info;
#line 220 "../docklets/Trash/TrashDockItem.vala"
		_tmp8_ = left_info;
#line 220 "../docklets/Trash/TrashDockItem.vala"
		result = _tmp6_ (_tmp7_, _tmp8_);
#line 220 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp3_);
#line 220 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp0_);
#line 220 "../docklets/Trash/TrashDockItem.vala"
		return result;
#line 1529 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 217 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 222 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:222: Could not enumerate items in the trash.");
#line 223 "../docklets/Trash/TrashDockItem.vala"
		result = 0;
#line 223 "../docklets/Trash/TrashDockItem.vala"
		return result;
#line 1542 "TrashDockItem.c"
	}
	__finally0:
#line 217 "../docklets/Trash/TrashDockItem.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 217 "../docklets/Trash/TrashDockItem.vala"
	g_clear_error (&_inner_error0_);
#line 217 "../docklets/Trash/TrashDockItem.vala"
	return _tmp9_;
#line 1551 "TrashDockItem.c"
}

static void
docky_trash_dock_item_restore_file (DockyTrashDockItem* self,
                                    GFile* f)
{
	GError* _inner_error0_ = NULL;
#line 227 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 227 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (f != NULL);
#line 1563 "TrashDockItem.c"
	{
		GFileInfo* _tmp0_ = NULL;
		GFileInfo* _tmp1_;
		const gchar* orig_path = NULL;
		const gchar* _tmp2_;
		const gchar* _tmp3_;
#line 230 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = g_file_query_info (f, G_FILE_ATTRIBUTE_TRASH_ORIG_PATH, 0, NULL, &_inner_error0_);
#line 230 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _tmp1_;
#line 230 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1576 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 230 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = g_file_info_get_attribute_string (_tmp0_, G_FILE_ATTRIBUTE_TRASH_ORIG_PATH);
#line 230 "../docklets/Trash/TrashDockItem.vala"
		orig_path = _tmp2_;
#line 231 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = orig_path;
#line 231 "../docklets/Trash/TrashDockItem.vala"
		if (_tmp3_ != NULL) {
#line 1587 "TrashDockItem.c"
			GFile* destFile = NULL;
			const gchar* _tmp4_;
			GFile* _tmp5_;
			GFile* _tmp6_;
#line 232 "../docklets/Trash/TrashDockItem.vala"
			_tmp4_ = orig_path;
#line 232 "../docklets/Trash/TrashDockItem.vala"
			_tmp5_ = g_file_new_for_path (_tmp4_);
#line 232 "../docklets/Trash/TrashDockItem.vala"
			destFile = _tmp5_;
#line 233 "../docklets/Trash/TrashDockItem.vala"
			_tmp6_ = destFile;
#line 233 "../docklets/Trash/TrashDockItem.vala"
			g_file_move (f, _tmp6_, (G_FILE_COPY_NOFOLLOW_SYMLINKS | G_FILE_COPY_ALL_METADATA) | G_FILE_COPY_NO_FALLBACK_FOR_MOVE, NULL, NULL, NULL, &_inner_error0_);
#line 233 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 233 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (destFile);
#line 233 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_tmp0_);
#line 1608 "TrashDockItem.c"
				goto __catch0_g_error;
			}
#line 231 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (destFile);
#line 1613 "TrashDockItem.c"
		}
#line 229 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp0_);
#line 1617 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 229 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 236 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:236: Could not restore file from the trash.");
#line 1626 "TrashDockItem.c"
	}
	__finally0:
#line 229 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 229 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 229 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 229 "../docklets/Trash/TrashDockItem.vala"
		return;
#line 1637 "TrashDockItem.c"
	}
}

static void
docky_trash_dock_item_open_trash (DockyTrashDockItem* self)
{
	PlankSystem* _tmp0_;
	GFile* _tmp1_;
#line 240 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 242 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = plank_system_get_default ();
#line 242 "../docklets/Trash/TrashDockItem.vala"
	_tmp1_ = self->priv->owned_file;
#line 242 "../docklets/Trash/TrashDockItem.vala"
	plank_system_open (_tmp0_, _tmp1_);
#line 1654 "TrashDockItem.c"
}

static void
docky_trash_dock_item_empty_trash (DockyTrashDockItem* self)
{
	GError* _inner_error0_ = NULL;
#line 245 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 247 "../docklets/Trash/TrashDockItem.vala"
	if (plank_environment_is_session_desktop ((PLANK_XDG_SESSION_DESKTOP_GNOME | PLANK_XDG_SESSION_DESKTOP_UNITY) | PLANK_XDG_SESSION_DESKTOP_UBUNTU)) {
#line 1665 "TrashDockItem.c"
		{
			DockyNautilusFileOperations* nautilus_file_operations = NULL;
			DockyNautilusFileOperations* _tmp0_;
			DockyNautilusFileOperations* _tmp1_;
#line 250 "../docklets/Trash/TrashDockItem.vala"
			_tmp0_ = (DockyNautilusFileOperations*) g_initable_new (DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS_PROXY, NULL, &_inner_error0_, "g-flags", 0, "g-name", "org.gnome.Nautilus", "g-bus-type", G_BUS_TYPE_SESSION, "g-object-path", "/org/gnome/Nautilus", "g-interface-name", "org.gnome.Nautilus.FileOperations", "g-interface-info", g_type_get_qdata (DOCKY_TYPE_NAUTILUS_FILE_OPERATIONS, g_quark_from_static_string ("vala-dbus-interface-info")), NULL);
#line 250 "../docklets/Trash/TrashDockItem.vala"
			nautilus_file_operations = (DockyNautilusFileOperations*) _tmp0_;
#line 250 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1676 "TrashDockItem.c"
				goto __catch0_g_error;
			}
#line 252 "../docklets/Trash/TrashDockItem.vala"
			_tmp1_ = nautilus_file_operations;
#line 252 "../docklets/Trash/TrashDockItem.vala"
			docky_nautilus_file_operations_empty_trash (_tmp1_, &_inner_error0_);
#line 252 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 252 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (nautilus_file_operations);
#line 1687 "TrashDockItem.c"
				goto __catch0_g_error;
			}
#line 249 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (nautilus_file_operations);
#line 1692 "TrashDockItem.c"
		}
		goto __finally0;
		__catch0_g_error:
		{
#line 249 "../docklets/Trash/TrashDockItem.vala"
			g_clear_error (&_inner_error0_);
#line 254 "../docklets/Trash/TrashDockItem.vala"
			docky_trash_dock_item_empty_trash_internal (self);
#line 1701 "TrashDockItem.c"
		}
		__finally0:
#line 249 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 249 "../docklets/Trash/TrashDockItem.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 249 "../docklets/Trash/TrashDockItem.vala"
			g_clear_error (&_inner_error0_);
#line 249 "../docklets/Trash/TrashDockItem.vala"
			return;
#line 1712 "TrashDockItem.c"
		}
	} else {
#line 257 "../docklets/Trash/TrashDockItem.vala"
		docky_trash_dock_item_empty_trash_internal (self);
#line 1717 "TrashDockItem.c"
	}
}

static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
#line 261 "../docklets/Trash/TrashDockItem.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 261 "../docklets/Trash/TrashDockItem.vala"
	return _data2_;
#line 1728 "TrashDockItem.c"
}

static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 261 "../docklets/Trash/TrashDockItem.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 1738 "TrashDockItem.c"
		DockyTrashDockItem* self;
#line 261 "../docklets/Trash/TrashDockItem.vala"
		self = _data2_->self;
#line 261 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_data2_->md);
#line 261 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (self);
#line 261 "../docklets/Trash/TrashDockItem.vala"
		g_slice_free (Block2Data, _data2_);
#line 1748 "TrashDockItem.c"
	}
}

static void
__lambda7_ (Block2Data* _data2_,
            gint response_id)
{
	DockyTrashDockItem* self;
	GtkMessageDialog* _tmp0_;
#line 278 "../docklets/Trash/TrashDockItem.vala"
	self = _data2_->self;
#line 279 "../docklets/Trash/TrashDockItem.vala"
	if (response_id != ((gint) GTK_RESPONSE_CANCEL)) {
#line 280 "../docklets/Trash/TrashDockItem.vala"
		docky_trash_dock_item_perform_empty_trash (self);
#line 1764 "TrashDockItem.c"
	}
#line 281 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = _data2_->md;
#line 281 "../docklets/Trash/TrashDockItem.vala"
	gtk_widget_destroy ((GtkWidget*) _tmp0_);
#line 1770 "TrashDockItem.c"
}

static void
___lambda7__gtk_dialog_response (GtkDialog* _sender,
                                 gint response_id,
                                 gpointer self)
{
#line 278 "../docklets/Trash/TrashDockItem.vala"
	__lambda7_ (self, response_id);
#line 1780 "TrashDockItem.c"
}

static void
docky_trash_dock_item_empty_trash_internal (DockyTrashDockItem* self)
{
	Block2Data* _data2_;
	GtkMessageDialog* _tmp0_;
	GtkMessageDialog* _tmp1_;
	GtkMessageDialog* _tmp2_;
	GtkMessageDialog* _tmp3_;
	GtkMessageDialog* _tmp4_;
	GtkMessageDialog* _tmp5_;
	GtkMessageDialog* _tmp6_;
	GtkMessageDialog* _tmp7_;
	GApplication* _tmp8_;
	GtkWindow* _tmp9_;
	GtkMessageDialog* _tmp10_;
	GtkMessageDialog* _tmp11_;
#line 261 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 261 "../docklets/Trash/TrashDockItem.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 261 "../docklets/Trash/TrashDockItem.vala"
	_data2_->_ref_count_ = 1;
#line 261 "../docklets/Trash/TrashDockItem.vala"
	_data2_->self = g_object_ref (self);
#line 263 "../docklets/Trash/TrashDockItem.vala"
	if (!self->priv->confirm_trash_delete) {
#line 264 "../docklets/Trash/TrashDockItem.vala"
		docky_trash_dock_item_perform_empty_trash (self);
#line 265 "../docklets/Trash/TrashDockItem.vala"
		block2_data_unref (_data2_);
#line 265 "../docklets/Trash/TrashDockItem.vala"
		_data2_ = NULL;
#line 265 "../docklets/Trash/TrashDockItem.vala"
		return;
#line 1817 "TrashDockItem.c"
	}
#line 268 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = (GtkMessageDialog*) gtk_message_dialog_new (NULL, 0, GTK_MESSAGE_WARNING, GTK_BUTTONS_NONE, "%s", _ ("Empty all items from Trash?"));
#line 268 "../docklets/Trash/TrashDockItem.vala"
	g_object_ref_sink (_tmp0_);
#line 268 "../docklets/Trash/TrashDockItem.vala"
	_data2_->md = _tmp0_;
#line 270 "../docklets/Trash/TrashDockItem.vala"
	_tmp1_ = _data2_->md;
#line 270 "../docklets/Trash/TrashDockItem.vala"
	g_object_set (_tmp1_, "secondary-text", _ ("All items in the Trash will be permanently deleted."), NULL);
#line 271 "../docklets/Trash/TrashDockItem.vala"
	_tmp2_ = _data2_->md;
#line 271 "../docklets/Trash/TrashDockItem.vala"
	gtk_dialog_add_button ((GtkDialog*) _tmp2_, _ ("_Cancel"), (gint) GTK_RESPONSE_CANCEL);
#line 272 "../docklets/Trash/TrashDockItem.vala"
	_tmp3_ = _data2_->md;
#line 272 "../docklets/Trash/TrashDockItem.vala"
	gtk_dialog_add_button ((GtkDialog*) _tmp3_, _ ("Empty _Trash"), (gint) GTK_RESPONSE_OK);
#line 273 "../docklets/Trash/TrashDockItem.vala"
	_tmp4_ = _data2_->md;
#line 273 "../docklets/Trash/TrashDockItem.vala"
	gtk_dialog_set_default_response ((GtkDialog*) _tmp4_, (gint) GTK_RESPONSE_OK);
#line 274 "../docklets/Trash/TrashDockItem.vala"
	_tmp5_ = _data2_->md;
#line 274 "../docklets/Trash/TrashDockItem.vala"
	g_object_set ((GtkWindow*) _tmp5_, "window-position", GTK_WIN_POS_CENTER, NULL);
#line 275 "../docklets/Trash/TrashDockItem.vala"
	_tmp6_ = _data2_->md;
#line 275 "../docklets/Trash/TrashDockItem.vala"
	gtk_window_set_gravity ((GtkWindow*) _tmp6_, GDK_GRAVITY_CENTER);
#line 276 "../docklets/Trash/TrashDockItem.vala"
	_tmp7_ = _data2_->md;
#line 276 "../docklets/Trash/TrashDockItem.vala"
	_tmp8_ = g_application_get_default ();
#line 276 "../docklets/Trash/TrashDockItem.vala"
	_tmp9_ = gtk_application_get_active_window (G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, gtk_application_get_type (), GtkApplication));
#line 276 "../docklets/Trash/TrashDockItem.vala"
	gtk_window_set_transient_for ((GtkWindow*) _tmp7_, _tmp9_);
#line 278 "../docklets/Trash/TrashDockItem.vala"
	_tmp10_ = _data2_->md;
#line 278 "../docklets/Trash/TrashDockItem.vala"
	g_signal_connect_data ((GtkDialog*) _tmp10_, "response", (GCallback) ___lambda7__gtk_dialog_response, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 284 "../docklets/Trash/TrashDockItem.vala"
	_tmp11_ = _data2_->md;
#line 284 "../docklets/Trash/TrashDockItem.vala"
	gtk_widget_show ((GtkWidget*) _tmp11_);
#line 261 "../docklets/Trash/TrashDockItem.vala"
	block2_data_unref (_data2_);
#line 261 "../docklets/Trash/TrashDockItem.vala"
	_data2_ = NULL;
#line 1869 "TrashDockItem.c"
}

static void*
__lambda5_ (DockyTrashDockItem* self,
            GError** error)
{
	GFile* _tmp0_;
	void* result = NULL;
#line 294 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = self->priv->owned_file;
#line 294 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_delete_children_recursive (_tmp0_);
#line 295 "../docklets/Trash/TrashDockItem.vala"
	result = NULL;
#line 295 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 1886 "TrashDockItem.c"
}

static gpointer
___lambda5__plank_task_func (gpointer self,
                             GError** error)
{
	gpointer result;
	result = __lambda5_ ((DockyTrashDockItem*) self, error);
#line 293 "../docklets/Trash/TrashDockItem.vala"
	return result;
#line 1897 "TrashDockItem.c"
}

static void
__lambda6_ (DockyTrashDockItem* self)
{
	GFileMonitor* _tmp0_;
#line 298 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = self->priv->trash_monitor;
#line 298 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp0_ != NULL) {
#line 1908 "TrashDockItem.c"
		GFileMonitor* _tmp1_;
#line 299 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = self->priv->trash_monitor;
#line 299 "../docklets/Trash/TrashDockItem.vala"
		g_signal_connect_object (_tmp1_, "changed", (GCallback) _docky_trash_dock_item_trash_changed_g_file_monitor_changed, self, 0);
#line 1914 "TrashDockItem.c"
	}
#line 300 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_update (self);
#line 1918 "TrashDockItem.c"
}

static void
___lambda6__gasync_ready_callback (GObject* source_object,
                                   GAsyncResult* res,
                                   gpointer self)
{
#line 293 "../docklets/Trash/TrashDockItem.vala"
	__lambda6_ ((DockyTrashDockItem*) self);
#line 293 "../docklets/Trash/TrashDockItem.vala"
	g_object_unref (self);
#line 1930 "TrashDockItem.c"
}

static void
docky_trash_dock_item_perform_empty_trash (DockyTrashDockItem* self)
{
	GFileMonitor* _tmp0_;
	PlankWorker* _tmp3_;
#line 287 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (self != NULL);
#line 290 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = self->priv->trash_monitor;
#line 290 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp0_ != NULL) {
#line 1944 "TrashDockItem.c"
		GFileMonitor* _tmp1_;
		guint _tmp2_;
#line 291 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = self->priv->trash_monitor;
#line 291 "../docklets/Trash/TrashDockItem.vala"
		g_signal_parse_name ("changed", g_file_monitor_get_type (), &_tmp2_, NULL, FALSE);
#line 291 "../docklets/Trash/TrashDockItem.vala"
		g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _docky_trash_dock_item_trash_changed_g_file_monitor_changed, self);
#line 1953 "TrashDockItem.c"
	}
#line 293 "../docklets/Trash/TrashDockItem.vala"
	_tmp3_ = plank_worker_get_default ();
#line 293 "../docklets/Trash/TrashDockItem.vala"
	plank_worker_add_task_with_result (_tmp3_, G_TYPE_POINTER, NULL, NULL, ___lambda5__plank_task_func, g_object_ref (self), g_object_unref, PLANK_TASK_PRIORITY_HIGH, ___lambda6__gasync_ready_callback, g_object_ref (self));
#line 1959 "TrashDockItem.c"
}

static void
docky_trash_dock_item_delete_children_recursive (GFile* file)
{
	GFileEnumerator* enumerator = NULL;
	GFileEnumerator* _tmp5_;
	GError* _inner_error0_ = NULL;
#line 304 "../docklets/Trash/TrashDockItem.vala"
	g_return_if_fail (file != NULL);
#line 306 "../docklets/Trash/TrashDockItem.vala"
	enumerator = NULL;
#line 1972 "TrashDockItem.c"
	{
		GFileEnumerator* _tmp0_ = NULL;
		GFileEnumerator* _tmp1_;
		GFileEnumerator* _tmp2_;
#line 309 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = g_file_enumerate_children (file, G_FILE_ATTRIBUTE_STANDARD_TYPE "," G_FILE_ATTRIBUTE_STANDARD_NAME "," G_FILE_ATTRIBUTE_ACCESS_CAN_DELETE, G_FILE_QUERY_INFO_NOFOLLOW_SYMLINKS, NULL, &_inner_error0_);
#line 309 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = _tmp1_;
#line 309 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1983 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 309 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = _tmp0_;
#line 309 "../docklets/Trash/TrashDockItem.vala"
		_tmp0_ = NULL;
#line 309 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (enumerator);
#line 309 "../docklets/Trash/TrashDockItem.vala"
		enumerator = _tmp2_;
#line 308 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp0_);
#line 1996 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp3_;
		const gchar* _tmp4_;
#line 308 "../docklets/Trash/TrashDockItem.vala"
		e = _inner_error0_;
#line 308 "../docklets/Trash/TrashDockItem.vala"
		_inner_error0_ = NULL;
#line 312 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = e;
#line 312 "../docklets/Trash/TrashDockItem.vala"
		_tmp4_ = _tmp3_->message;
#line 312 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("TrashDockItem.vala:312: %s", _tmp4_);
#line 308 "../docklets/Trash/TrashDockItem.vala"
		_g_error_free0 (e);
#line 2016 "TrashDockItem.c"
	}
	__finally0:
#line 308 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 308 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (enumerator);
#line 308 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 308 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 308 "../docklets/Trash/TrashDockItem.vala"
		return;
#line 2029 "TrashDockItem.c"
	}
#line 315 "../docklets/Trash/TrashDockItem.vala"
	_tmp5_ = enumerator;
#line 315 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp5_ == NULL) {
#line 316 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (enumerator);
#line 316 "../docklets/Trash/TrashDockItem.vala"
		return;
#line 2039 "TrashDockItem.c"
	}
	{
		GFileInfo* info = NULL;
		GFileEnumerator* _tmp18_;
#line 320 "../docklets/Trash/TrashDockItem.vala"
		while (TRUE) {
#line 2046 "TrashDockItem.c"
			GFileInfo* _tmp6_ = NULL;
			GFileEnumerator* _tmp7_;
			GFileInfo* _tmp8_;
			GFileInfo* _tmp9_;
			GFileInfo* _tmp10_;
			GFile* child = NULL;
			GFileInfo* _tmp11_;
			const gchar* _tmp12_;
			GFile* _tmp13_;
			GFileInfo* _tmp14_;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp7_ = enumerator;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp8_ = g_file_enumerator_next_file (_tmp7_, NULL, &_inner_error0_);
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp6_ = _tmp8_;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 320 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (info);
#line 2067 "TrashDockItem.c"
				goto __catch1_g_error;
			}
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp9_ = _tmp6_;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp6_ = NULL;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (info);
#line 320 "../docklets/Trash/TrashDockItem.vala"
			info = _tmp9_;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_tmp10_ = info;
#line 320 "../docklets/Trash/TrashDockItem.vala"
			if (!(_tmp10_ != NULL)) {
#line 320 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_tmp6_);
#line 320 "../docklets/Trash/TrashDockItem.vala"
				break;
#line 2086 "TrashDockItem.c"
			}
#line 321 "../docklets/Trash/TrashDockItem.vala"
			_tmp11_ = info;
#line 321 "../docklets/Trash/TrashDockItem.vala"
			_tmp12_ = g_file_info_get_name (_tmp11_);
#line 321 "../docklets/Trash/TrashDockItem.vala"
			_tmp13_ = g_file_get_child (file, _tmp12_);
#line 321 "../docklets/Trash/TrashDockItem.vala"
			child = _tmp13_;
#line 322 "../docklets/Trash/TrashDockItem.vala"
			_tmp14_ = info;
#line 322 "../docklets/Trash/TrashDockItem.vala"
			if (g_file_info_get_file_type (_tmp14_) == G_FILE_TYPE_DIRECTORY) {
#line 2100 "TrashDockItem.c"
				GFile* _tmp15_;
#line 323 "../docklets/Trash/TrashDockItem.vala"
				_tmp15_ = child;
#line 323 "../docklets/Trash/TrashDockItem.vala"
				docky_trash_dock_item_delete_children_recursive (_tmp15_);
#line 2106 "TrashDockItem.c"
			}
			{
				GFileInfo* _tmp16_;
#line 325 "../docklets/Trash/TrashDockItem.vala"
				_tmp16_ = info;
#line 325 "../docklets/Trash/TrashDockItem.vala"
				if (g_file_info_get_attribute_boolean (_tmp16_, G_FILE_ATTRIBUTE_ACCESS_CAN_DELETE)) {
#line 2114 "TrashDockItem.c"
					GFile* _tmp17_;
#line 326 "../docklets/Trash/TrashDockItem.vala"
					_tmp17_ = child;
#line 326 "../docklets/Trash/TrashDockItem.vala"
					g_file_delete (_tmp17_, NULL, &_inner_error0_);
#line 326 "../docklets/Trash/TrashDockItem.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 2122 "TrashDockItem.c"
						goto __catch2_g_error;
					}
				}
			}
			goto __finally2;
			__catch2_g_error:
			{
#line 324 "../docklets/Trash/TrashDockItem.vala"
				g_clear_error (&_inner_error0_);
#line 2132 "TrashDockItem.c"
			}
			__finally2:
#line 324 "../docklets/Trash/TrashDockItem.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 324 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (child);
#line 324 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (_tmp6_);
#line 324 "../docklets/Trash/TrashDockItem.vala"
				_g_object_unref0 (info);
#line 2143 "TrashDockItem.c"
				goto __catch1_g_error;
			}
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (child);
#line 320 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (_tmp6_);
#line 2150 "TrashDockItem.c"
		}
#line 331 "../docklets/Trash/TrashDockItem.vala"
		_tmp18_ = enumerator;
#line 331 "../docklets/Trash/TrashDockItem.vala"
		g_file_enumerator_close (_tmp18_, NULL, &_inner_error0_);
#line 331 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 331 "../docklets/Trash/TrashDockItem.vala"
			_g_object_unref0 (info);
#line 2160 "TrashDockItem.c"
			goto __catch1_g_error;
		}
#line 318 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (info);
#line 2165 "TrashDockItem.c"
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* e = NULL;
		GError* _tmp19_;
		const gchar* _tmp20_;
#line 318 "../docklets/Trash/TrashDockItem.vala"
		e = _inner_error0_;
#line 318 "../docklets/Trash/TrashDockItem.vala"
		_inner_error0_ = NULL;
#line 333 "../docklets/Trash/TrashDockItem.vala"
		_tmp19_ = e;
#line 333 "../docklets/Trash/TrashDockItem.vala"
		_tmp20_ = _tmp19_->message;
#line 333 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("TrashDockItem.vala:333: %s", _tmp20_);
#line 318 "../docklets/Trash/TrashDockItem.vala"
		_g_error_free0 (e);
#line 2185 "TrashDockItem.c"
	}
	__finally1:
#line 318 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 318 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (enumerator);
#line 318 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 318 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 318 "../docklets/Trash/TrashDockItem.vala"
		return;
#line 2198 "TrashDockItem.c"
	}
#line 304 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (enumerator);
#line 2202 "TrashDockItem.c"
}

DockyTrashDockItem*
docky_trash_dock_item_construct (GType object_type)
{
	DockyTrashDockItem * self = NULL;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	self = (DockyTrashDockItem*) plank_docklet_item_construct (object_type);
#line 29 "../docklets/Trash/TrashDockItem.vala"
	return self;
#line 2213 "TrashDockItem.c"
}

DockyTrashDockItem*
docky_trash_dock_item_new (void)
{
#line 29 "../docklets/Trash/TrashDockItem.vala"
	return docky_trash_dock_item_construct (DOCKY_TYPE_TRASH_DOCK_ITEM);
#line 2221 "TrashDockItem.c"
}

static gboolean
_vala_string_array_contains (gchar* * stack,
                             gint stack_length,
                             const gchar* needle)
{
	gint i;
#line 68 "../docklets/Trash/TrashDockItem.vala"
	for (i = 0; i < stack_length; i++) {
#line 68 "../docklets/Trash/TrashDockItem.vala"
		if (g_strcmp0 (stack[i], needle) == 0) {
#line 68 "../docklets/Trash/TrashDockItem.vala"
			return TRUE;
#line 2236 "TrashDockItem.c"
		}
	}
#line 68 "../docklets/Trash/TrashDockItem.vala"
	return FALSE;
#line 2241 "TrashDockItem.c"
}

static GObject *
docky_trash_dock_item_constructor (GType type,
                                   guint n_construct_properties,
                                   GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	DockyTrashDockItem * self;
	GFile* _tmp0_;
	GSettings* nautilus_settings = NULL;
	GSettings* _tmp6_;
	gboolean _tmp7_ = FALSE;
	GSettings* _tmp8_;
	GError* _inner_error0_ = NULL;
#line 54 "../docklets/Trash/TrashDockItem.vala"
	parent_class = G_OBJECT_CLASS (docky_trash_dock_item_parent_class);
#line 54 "../docklets/Trash/TrashDockItem.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 54 "../docklets/Trash/TrashDockItem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, DOCKY_TYPE_TRASH_DOCK_ITEM, DockyTrashDockItem);
#line 56 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = g_file_new_for_uri ("trash://");
#line 56 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (self->priv->owned_file);
#line 56 "../docklets/Trash/TrashDockItem.vala"
	self->priv->owned_file = _tmp0_;
#line 57 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_update (self);
#line 2272 "TrashDockItem.c"
	{
		GFileMonitor* _tmp1_ = NULL;
		GFile* _tmp2_;
		GFileMonitor* _tmp3_;
		GFileMonitor* _tmp4_;
		GFileMonitor* _tmp5_;
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_tmp2_ = self->priv->owned_file;
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = g_file_monitor (_tmp2_, 0, NULL, &_inner_error0_);
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = _tmp3_;
#line 60 "../docklets/Trash/TrashDockItem.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 2287 "TrashDockItem.c"
			goto __catch0_g_error;
		}
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_tmp4_ = _tmp1_;
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = NULL;
#line 60 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (self->priv->trash_monitor);
#line 60 "../docklets/Trash/TrashDockItem.vala"
		self->priv->trash_monitor = _tmp4_;
#line 61 "../docklets/Trash/TrashDockItem.vala"
		_tmp5_ = self->priv->trash_monitor;
#line 61 "../docklets/Trash/TrashDockItem.vala"
		g_signal_connect_object (_tmp5_, "changed", (GCallback) _docky_trash_dock_item_trash_changed_g_file_monitor_changed, self, 0);
#line 59 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (_tmp1_);
#line 2304 "TrashDockItem.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 59 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 63 "../docklets/Trash/TrashDockItem.vala"
		g_warning ("TrashDockItem.vala:63: Could not start file monitor for trash.");
#line 2313 "TrashDockItem.c"
	}
	__finally0:
#line 59 "../docklets/Trash/TrashDockItem.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 59 "../docklets/Trash/TrashDockItem.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 59 "../docklets/Trash/TrashDockItem.vala"
		g_clear_error (&_inner_error0_);
#line 2322 "TrashDockItem.c"
	}
#line 67 "../docklets/Trash/TrashDockItem.vala"
	_tmp6_ = docky_trash_dock_item_create_settings ("org.gnome.nautilus.preferences", "/org/gnome/nautilus/preferences/");
#line 67 "../docklets/Trash/TrashDockItem.vala"
	nautilus_settings = _tmp6_;
#line 68 "../docklets/Trash/TrashDockItem.vala"
	_tmp8_ = nautilus_settings;
#line 68 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp8_ != NULL) {
#line 2332 "TrashDockItem.c"
		GSettings* _tmp9_;
		gchar** _tmp10_;
		gchar** _tmp11_;
		gchar** _tmp12_;
		gint _tmp12__length1;
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp9_ = nautilus_settings;
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp11_ = _tmp10_ = g_settings_list_keys (_tmp9_);
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp12_ = _tmp11_;
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp12__length1 = _vala_array_length (_tmp10_);
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp7_ = _vala_string_array_contains (_tmp12_, _vala_array_length (_tmp10_), "confirm-trash");
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp12_ = (_vala_array_free (_tmp12_, _tmp12__length1, (GDestroyNotify) g_free), NULL);
#line 2350 "TrashDockItem.c"
	} else {
#line 68 "../docklets/Trash/TrashDockItem.vala"
		_tmp7_ = FALSE;
#line 2354 "TrashDockItem.c"
	}
#line 68 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp7_) {
#line 2358 "TrashDockItem.c"
		GSettings* _tmp13_;
#line 69 "../docklets/Trash/TrashDockItem.vala"
		_tmp13_ = nautilus_settings;
#line 69 "../docklets/Trash/TrashDockItem.vala"
		self->priv->confirm_trash_delete = g_settings_get_boolean (_tmp13_, "confirm-trash");
#line 2364 "TrashDockItem.c"
	}
#line 54 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (nautilus_settings);
#line 54 "../docklets/Trash/TrashDockItem.vala"
	return obj;
#line 2370 "TrashDockItem.c"
}

static void
docky_trash_dock_item_class_init (DockyTrashDockItemClass * klass,
                                  gpointer klass_data)
{
#line 29 "../docklets/Trash/TrashDockItem.vala"
	docky_trash_dock_item_parent_class = g_type_class_peek_parent (klass);
#line 29 "../docklets/Trash/TrashDockItem.vala"
	g_type_class_adjust_private_offset (klass, &DockyTrashDockItem_private_offset);
#line 29 "../docklets/Trash/TrashDockItem.vala"
	((PlankDockElementClass *) klass)->on_clicked = (PlankAnimationType (*) (PlankDockElement*, PlankPopupButton, GdkModifierType, guint32)) docky_trash_dock_item_real_on_clicked;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	((PlankDockElementClass *) klass)->get_drop_text = (gchar* (*) (PlankDockElement*)) docky_trash_dock_item_real_get_drop_text;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	((PlankDockElementClass *) klass)->can_accept_drop = (gboolean (*) (PlankDockElement*, GeeArrayList*)) docky_trash_dock_item_real_can_accept_drop;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	((PlankDockElementClass *) klass)->accept_drop = (gboolean (*) (PlankDockElement*, GeeArrayList*)) docky_trash_dock_item_real_accept_drop;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	((PlankDockElementClass *) klass)->get_menu_items = (GeeArrayList* (*) (PlankDockElement*)) docky_trash_dock_item_real_get_menu_items;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	G_OBJECT_CLASS (klass)->constructor = docky_trash_dock_item_constructor;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	G_OBJECT_CLASS (klass)->finalize = docky_trash_dock_item_finalize;
#line 2395 "TrashDockItem.c"
}

static void
docky_trash_dock_item_instance_init (DockyTrashDockItem * self,
                                     gpointer klass)
{
#line 29 "../docklets/Trash/TrashDockItem.vala"
	self->priv = docky_trash_dock_item_get_instance_private (self);
#line 44 "../docklets/Trash/TrashDockItem.vala"
	self->priv->confirm_trash_delete = TRUE;
#line 2406 "TrashDockItem.c"
}

static void
docky_trash_dock_item_finalize (GObject * obj)
{
	DockyTrashDockItem * self;
	GFileMonitor* _tmp0_;
#line 29 "../docklets/Trash/TrashDockItem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, DOCKY_TYPE_TRASH_DOCK_ITEM, DockyTrashDockItem);
#line 74 "../docklets/Trash/TrashDockItem.vala"
	_tmp0_ = self->priv->trash_monitor;
#line 74 "../docklets/Trash/TrashDockItem.vala"
	if (_tmp0_ != NULL) {
#line 2420 "TrashDockItem.c"
		GFileMonitor* _tmp1_;
		guint _tmp2_;
		GFileMonitor* _tmp3_;
#line 75 "../docklets/Trash/TrashDockItem.vala"
		_tmp1_ = self->priv->trash_monitor;
#line 75 "../docklets/Trash/TrashDockItem.vala"
		g_signal_parse_name ("changed", g_file_monitor_get_type (), &_tmp2_, NULL, FALSE);
#line 75 "../docklets/Trash/TrashDockItem.vala"
		g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _docky_trash_dock_item_trash_changed_g_file_monitor_changed, self);
#line 76 "../docklets/Trash/TrashDockItem.vala"
		_tmp3_ = self->priv->trash_monitor;
#line 76 "../docklets/Trash/TrashDockItem.vala"
		g_file_monitor_cancel (_tmp3_);
#line 77 "../docklets/Trash/TrashDockItem.vala"
		_g_object_unref0 (self->priv->trash_monitor);
#line 77 "../docklets/Trash/TrashDockItem.vala"
		self->priv->trash_monitor = NULL;
#line 2438 "TrashDockItem.c"
	}
#line 42 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (self->priv->trash_monitor);
#line 43 "../docklets/Trash/TrashDockItem.vala"
	_g_object_unref0 (self->priv->owned_file);
#line 29 "../docklets/Trash/TrashDockItem.vala"
	G_OBJECT_CLASS (docky_trash_dock_item_parent_class)->finalize (obj);
#line 2446 "TrashDockItem.c"
}

static GType
docky_trash_dock_item_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (DockyTrashDockItemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) docky_trash_dock_item_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (DockyTrashDockItem), 0, (GInstanceInitFunc) docky_trash_dock_item_instance_init, NULL };
	GType docky_trash_dock_item_type_id;
	docky_trash_dock_item_type_id = g_type_register_static (PLANK_TYPE_DOCKLET_ITEM, "DockyTrashDockItem", &g_define_type_info, 0);
	DockyTrashDockItem_private_offset = g_type_add_instance_private (docky_trash_dock_item_type_id, sizeof (DockyTrashDockItemPrivate));
	return docky_trash_dock_item_type_id;
}

GType
docky_trash_dock_item_get_type (void)
{
	static volatile gsize docky_trash_dock_item_type_id__volatile = 0;
	if (g_once_init_enter (&docky_trash_dock_item_type_id__volatile)) {
		GType docky_trash_dock_item_type_id;
		docky_trash_dock_item_type_id = docky_trash_dock_item_get_type_once ();
		g_once_init_leave (&docky_trash_dock_item_type_id__volatile, docky_trash_dock_item_type_id);
	}
	return docky_trash_dock_item_type_id__volatile;
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gint
_vala_array_length (gpointer array)
{
	gint length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

