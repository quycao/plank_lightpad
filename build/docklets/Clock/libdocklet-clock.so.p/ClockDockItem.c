/* ClockDockItem.c generated by valac 0.48.17, the Vala compiler
 * generated from ClockDockItem.vala, do not modify */

/**/
/*  Copyright (C) 2011 Robert Dyer*/
/**/
/*  This file is part of Plank.*/
/**/
/*  Plank is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  Plank is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include "plank.h"
#include <glib-object.h>
#include <pango/pango.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <cairo-gobject.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <pango/pangocairo.h>
#include <glib/gi18n-lib.h>

#define DOCKY_TYPE_CLOCK_DOCK_ITEM (docky_clock_dock_item_get_type ())
#define DOCKY_CLOCK_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DOCKY_TYPE_CLOCK_DOCK_ITEM, DockyClockDockItem))
#define DOCKY_CLOCK_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DOCKY_TYPE_CLOCK_DOCK_ITEM, DockyClockDockItemClass))
#define DOCKY_IS_CLOCK_DOCK_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DOCKY_TYPE_CLOCK_DOCK_ITEM))
#define DOCKY_IS_CLOCK_DOCK_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DOCKY_TYPE_CLOCK_DOCK_ITEM))
#define DOCKY_CLOCK_DOCK_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DOCKY_TYPE_CLOCK_DOCK_ITEM, DockyClockDockItemClass))

typedef struct _DockyClockDockItem DockyClockDockItem;
typedef struct _DockyClockDockItemClass DockyClockDockItemClass;
typedef struct _DockyClockDockItemPrivate DockyClockDockItemPrivate;
enum  {
	DOCKY_CLOCK_DOCK_ITEM_0_PROPERTY,
	DOCKY_CLOCK_DOCK_ITEM_NUM_PROPERTIES
};
static GParamSpec* docky_clock_dock_item_properties[DOCKY_CLOCK_DOCK_ITEM_NUM_PROPERTIES];

#define DOCKY_TYPE_CLOCK_PREFERENCES (docky_clock_preferences_get_type ())
#define DOCKY_CLOCK_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences))
#define DOCKY_CLOCK_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferencesClass))
#define DOCKY_IS_CLOCK_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DOCKY_TYPE_CLOCK_PREFERENCES))
#define DOCKY_IS_CLOCK_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DOCKY_TYPE_CLOCK_PREFERENCES))
#define DOCKY_CLOCK_PREFERENCES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferencesClass))

typedef struct _DockyClockPreferences DockyClockPreferences;
typedef struct _DockyClockPreferencesClass DockyClockPreferencesClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
typedef struct _Block1Data Block1Data;
#define __vala_PangoFontDescription_free0(var) ((var == NULL) ? NULL : (var = (_vala_PangoFontDescription_free (var), NULL)))

struct _DockyClockDockItem {
	PlankDockletItem parent_instance;
	DockyClockDockItemPrivate * priv;
};

struct _DockyClockDockItemClass {
	PlankDockletItemClass parent_class;
};

struct _DockyClockDockItemPrivate {
	PangoLayout* layout;
	guint timer_id;
	gint minute;
	gchar* current_theme;
};

struct _Block1Data {
	int _ref_count_;
	DockyClockDockItem* self;
	DockyClockPreferences* prefs;
};

static gint DockyClockDockItem_private_offset;
static gpointer docky_clock_dock_item_parent_class = NULL;

GType docky_clock_dock_item_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (DockyClockDockItem, g_object_unref)
GType docky_clock_preferences_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (DockyClockPreferences, g_object_unref)
static void docky_clock_dock_item_handle_prefs_changed (DockyClockDockItem* self);
static void _docky_clock_dock_item_handle_prefs_changed_g_object_notify (GObject* _sender,
                                                                  GParamSpec* pspec,
                                                                  gpointer self);
#define DOCKY_G_RESOURCE_PATH "/net/launchpad/plank/docklets/clock"
#define DOCKY_CLOCK_DOCK_ITEM_THEME_BASE_URI "resource://" DOCKY_G_RESOURCE_PATH "/themes/"
DockyClockDockItem* docky_clock_dock_item_new_with_dockitem_file (GFile* file);
DockyClockDockItem* docky_clock_dock_item_construct_with_dockitem_file (GType object_type,
                                                                        GFile* file);
DockyClockPreferences* docky_clock_preferences_new_with_file (GFile* file);
DockyClockPreferences* docky_clock_preferences_construct_with_file (GType object_type,
                                                                    GFile* file);
static gboolean docky_clock_dock_item_update_timer (DockyClockDockItem* self);
gboolean docky_clock_preferences_get_ShowMilitary (DockyClockPreferences* self);
static void docky_clock_dock_item_real_draw_icon (PlankDockItem* base,
                                           PlankSurface* surface);
gboolean docky_clock_preferences_get_ShowDigital (DockyClockPreferences* self);
static void docky_clock_dock_item_render_digital_clock (DockyClockDockItem* self,
                                                 PlankSurface* surface,
                                                 GDateTime* now,
                                                 gint size);
static void docky_clock_dock_item_render_analog_clock (DockyClockDockItem* self,
                                                cairo_t* cr,
                                                GDateTime* now,
                                                gint size);
static void docky_clock_dock_item_render_file_onto_context (DockyClockDockItem* self,
                                                     cairo_t* cr,
                                                     const gchar* uri,
                                                     gint size);
gboolean docky_clock_preferences_get_ShowDate (DockyClockPreferences* self);
static GeeArrayList* docky_clock_dock_item_real_get_menu_items (PlankDockElement* base);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void __lambda4_ (Block1Data* _data1_);
void docky_clock_preferences_set_ShowDigital (DockyClockPreferences* self,
                                              gboolean value);
static void ___lambda4__gtk_menu_item_activate (GtkMenuItem* _sender,
                                         gpointer self);
static void __lambda5_ (Block1Data* _data1_);
void docky_clock_preferences_set_ShowMilitary (DockyClockPreferences* self,
                                               gboolean value);
static void ___lambda5__gtk_menu_item_activate (GtkMenuItem* _sender,
                                         gpointer self);
static void __lambda6_ (Block1Data* _data1_);
void docky_clock_preferences_set_ShowDate (DockyClockPreferences* self,
                                           gboolean value);
static void ___lambda6__gtk_menu_item_activate (GtkMenuItem* _sender,
                                         gpointer self);
DockyClockDockItem* docky_clock_dock_item_new (void);
DockyClockDockItem* docky_clock_dock_item_construct (GType object_type);
static GObject * docky_clock_dock_item_constructor (GType type,
                                             guint n_construct_properties,
                                             GObjectConstructParam * construct_properties);
static PangoFontDescription* _vala_PangoFontDescription_copy (PangoFontDescription* self);
static void _vala_PangoFontDescription_free (PangoFontDescription* self);
static void docky_clock_dock_item_finalize (GObject * obj);
static GType docky_clock_dock_item_get_type_once (void);

static inline gpointer
docky_clock_dock_item_get_instance_private (DockyClockDockItem* self)
{
	return G_STRUCT_MEMBER_P (self, DockyClockDockItem_private_offset);
}

static void
_docky_clock_dock_item_handle_prefs_changed_g_object_notify (GObject* _sender,
                                                             GParamSpec* pspec,
                                                             gpointer self)
{
#line 68 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_handle_prefs_changed ((DockyClockDockItem*) self);
#line 172 "ClockDockItem.c"
}

/**
 * {@inheritDoc}
 */
DockyClockDockItem*
docky_clock_dock_item_construct_with_dockitem_file (GType object_type,
                                                    GFile* file)
{
	DockyClockDockItem * self = NULL;
	DockyClockPreferences* _tmp0_;
	DockyClockPreferences* _tmp1_;
#line 36 "../docklets/Clock/ClockDockItem.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 38 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = docky_clock_preferences_new_with_file (file);
#line 38 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 38 "../docklets/Clock/ClockDockItem.vala"
	self = (DockyClockDockItem*) g_object_new (object_type, "Prefs", _tmp1_, NULL);
#line 38 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (_tmp1_);
#line 36 "../docklets/Clock/ClockDockItem.vala"
	return self;
#line 197 "ClockDockItem.c"
}

DockyClockDockItem*
docky_clock_dock_item_new_with_dockitem_file (GFile* file)
{
#line 36 "../docklets/Clock/ClockDockItem.vala"
	return docky_clock_dock_item_construct_with_dockitem_file (DOCKY_TYPE_CLOCK_DOCK_ITEM, file);
#line 205 "ClockDockItem.c"
}

static gboolean
docky_clock_dock_item_update_timer (DockyClockDockItem* self)
{
	GDateTime* now = NULL;
	GDateTime* _tmp0_;
	GDateTime* _tmp1_;
	gboolean result = FALSE;
#line 73 "../docklets/Clock/ClockDockItem.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 75 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = g_date_time_new_now_local ();
#line 75 "../docklets/Clock/ClockDockItem.vala"
	now = _tmp0_;
#line 76 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = now;
#line 76 "../docklets/Clock/ClockDockItem.vala"
	if (self->priv->minute != g_date_time_get_minute (_tmp1_)) {
#line 225 "ClockDockItem.c"
		GDateTime* _tmp2_;
#line 77 "../docklets/Clock/ClockDockItem.vala"
		plank_dock_item_reset_icon_buffer ((PlankDockItem*) self);
#line 78 "../docklets/Clock/ClockDockItem.vala"
		_tmp2_ = now;
#line 78 "../docklets/Clock/ClockDockItem.vala"
		self->priv->minute = g_date_time_get_minute (_tmp2_);
#line 233 "ClockDockItem.c"
	}
#line 81 "../docklets/Clock/ClockDockItem.vala"
	result = TRUE;
#line 81 "../docklets/Clock/ClockDockItem.vala"
	_g_date_time_unref0 (now);
#line 81 "../docklets/Clock/ClockDockItem.vala"
	return result;
#line 241 "ClockDockItem.c"
}

static void
docky_clock_dock_item_handle_prefs_changed (DockyClockDockItem* self)
{
	DockyClockPreferences* prefs = NULL;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
	const gchar* _tmp2_ = NULL;
	DockyClockPreferences* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gchar* _tmp6_;
#line 84 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (self != NULL);
#line 86 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 86 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 86 "../docklets/Clock/ClockDockItem.vala"
	prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 87 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = prefs;
#line 87 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = docky_clock_preferences_get_ShowMilitary (_tmp3_);
#line 87 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = _tmp4_;
#line 87 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp5_) {
#line 87 "../docklets/Clock/ClockDockItem.vala"
		_tmp2_ = DOCKY_CLOCK_DOCK_ITEM_THEME_BASE_URI "Default24";
#line 273 "ClockDockItem.c"
	} else {
#line 87 "../docklets/Clock/ClockDockItem.vala"
		_tmp2_ = DOCKY_CLOCK_DOCK_ITEM_THEME_BASE_URI "Default";
#line 277 "ClockDockItem.c"
	}
#line 87 "../docklets/Clock/ClockDockItem.vala"
	_tmp6_ = g_strdup (_tmp2_);
#line 87 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (self->priv->current_theme);
#line 87 "../docklets/Clock/ClockDockItem.vala"
	self->priv->current_theme = _tmp6_;
#line 89 "../docklets/Clock/ClockDockItem.vala"
	plank_dock_item_reset_icon_buffer ((PlankDockItem*) self);
#line 287 "ClockDockItem.c"
}

static void
docky_clock_dock_item_real_draw_icon (PlankDockItem* base,
                                      PlankSurface* surface)
{
	DockyClockDockItem * self;
	DockyClockPreferences* prefs = NULL;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
	GDateTime* now = NULL;
	GDateTime* _tmp2_;
	DockyClockPreferences* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gint size = 0;
	gint _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	DockyClockPreferences* _tmp16_;
	gboolean _tmp17_;
	gboolean _tmp18_;
#line 92 "../docklets/Clock/ClockDockItem.vala"
	self = (DockyClockDockItem*) base;
#line 92 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (surface != NULL);
#line 94 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 94 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 94 "../docklets/Clock/ClockDockItem.vala"
	prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 96 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = g_date_time_new_now_local ();
#line 96 "../docklets/Clock/ClockDockItem.vala"
	now = _tmp2_;
#line 97 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = prefs;
#line 97 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = docky_clock_preferences_get_ShowMilitary (_tmp3_);
#line 97 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = _tmp4_;
#line 97 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp5_) {
#line 333 "ClockDockItem.c"
		GDateTime* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
#line 98 "../docklets/Clock/ClockDockItem.vala"
		_tmp6_ = now;
#line 98 "../docklets/Clock/ClockDockItem.vala"
		_tmp7_ = g_date_time_format (_tmp6_, "%a, %b %d %H:%M");
#line 98 "../docklets/Clock/ClockDockItem.vala"
		_tmp8_ = _tmp7_;
#line 98 "../docklets/Clock/ClockDockItem.vala"
		plank_dock_element_set_Text ((PlankDockElement*) self, _tmp8_);
#line 98 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp8_);
#line 347 "ClockDockItem.c"
	} else {
		GDateTime* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
#line 100 "../docklets/Clock/ClockDockItem.vala"
		_tmp9_ = now;
#line 100 "../docklets/Clock/ClockDockItem.vala"
		_tmp10_ = g_date_time_format (_tmp9_, "%a, %b %d %I:%M %p");
#line 100 "../docklets/Clock/ClockDockItem.vala"
		_tmp11_ = _tmp10_;
#line 100 "../docklets/Clock/ClockDockItem.vala"
		plank_dock_element_set_Text ((PlankDockElement*) self, _tmp11_);
#line 100 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp11_);
#line 362 "ClockDockItem.c"
	}
#line 102 "../docklets/Clock/ClockDockItem.vala"
	_tmp12_ = plank_surface_get_Width (surface);
#line 102 "../docklets/Clock/ClockDockItem.vala"
	_tmp13_ = _tmp12_;
#line 102 "../docklets/Clock/ClockDockItem.vala"
	_tmp14_ = plank_surface_get_Height (surface);
#line 102 "../docklets/Clock/ClockDockItem.vala"
	_tmp15_ = _tmp14_;
#line 102 "../docklets/Clock/ClockDockItem.vala"
	size = MAX (_tmp13_, _tmp15_);
#line 103 "../docklets/Clock/ClockDockItem.vala"
	_tmp16_ = prefs;
#line 103 "../docklets/Clock/ClockDockItem.vala"
	_tmp17_ = docky_clock_preferences_get_ShowDigital (_tmp16_);
#line 103 "../docklets/Clock/ClockDockItem.vala"
	_tmp18_ = _tmp17_;
#line 103 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp18_) {
#line 382 "ClockDockItem.c"
		GDateTime* _tmp19_;
#line 104 "../docklets/Clock/ClockDockItem.vala"
		_tmp19_ = now;
#line 104 "../docklets/Clock/ClockDockItem.vala"
		docky_clock_dock_item_render_digital_clock (self, surface, _tmp19_, size);
#line 388 "ClockDockItem.c"
	} else {
		cairo_t* _tmp20_;
		cairo_t* _tmp21_;
		GDateTime* _tmp22_;
#line 106 "../docklets/Clock/ClockDockItem.vala"
		_tmp20_ = plank_surface_get_Context (surface);
#line 106 "../docklets/Clock/ClockDockItem.vala"
		_tmp21_ = _tmp20_;
#line 106 "../docklets/Clock/ClockDockItem.vala"
		_tmp22_ = now;
#line 106 "../docklets/Clock/ClockDockItem.vala"
		docky_clock_dock_item_render_analog_clock (self, _tmp21_, _tmp22_, size);
#line 401 "ClockDockItem.c"
	}
#line 92 "../docklets/Clock/ClockDockItem.vala"
	_g_date_time_unref0 (now);
#line 405 "ClockDockItem.c"
}

static void
docky_clock_dock_item_render_file_onto_context (DockyClockDockItem* self,
                                                cairo_t* cr,
                                                const gchar* uri,
                                                gint size)
{
	GdkPixbuf* pbuf = NULL;
	GdkPixbuf* _tmp0_;
#line 109 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (self != NULL);
#line 109 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (cr != NULL);
#line 109 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (uri != NULL);
#line 111 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_drawing_service_load_icon (uri, size, size);
#line 111 "../docklets/Clock/ClockDockItem.vala"
	pbuf = _tmp0_;
#line 112 "../docklets/Clock/ClockDockItem.vala"
	gdk_cairo_set_source_pixbuf (cr, pbuf, (gdouble) 0, (gdouble) 0);
#line 113 "../docklets/Clock/ClockDockItem.vala"
	cairo_paint (cr);
#line 109 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (pbuf);
#line 432 "ClockDockItem.c"
}

static gchar*
string_chug (const gchar* self)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* result = NULL;
#line 1359 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1360 "glib-2.0.vapi"
	_tmp0_ = g_strdup (self);
#line 1360 "glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1361 "glib-2.0.vapi"
	g_strchug (_result_);
#line 1362 "glib-2.0.vapi"
	result = _result_;
#line 1362 "glib-2.0.vapi"
	return result;
#line 453 "ClockDockItem.c"
}

static void
docky_clock_dock_item_render_digital_clock (DockyClockDockItem* self,
                                            PlankSurface* surface,
                                            GDateTime* now,
                                            gint size)
{
	DockyClockPreferences* prefs = NULL;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
	cairo_t* cr = NULL;
	cairo_t* _tmp2_;
	cairo_t* _tmp3_;
	gint timeSize = 0;
	gint _tmp4_;
	gint _tmp5_;
	gint dateSize = 0;
	gint _tmp6_;
	gint _tmp7_;
	gint ampmSize = 0;
	gint _tmp8_;
	gint _tmp9_;
	gint spacing = 0;
	gint center = 0;
	gint _tmp10_;
	gint _tmp11_;
	PangoLayout* _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	PangoLayout* _tmp15_;
	PangoFontDescription* _tmp16_;
	DockyClockPreferences* _tmp17_;
	gboolean _tmp18_;
	gboolean _tmp19_;
	PangoRectangle ink_rect = {0};
	PangoRectangle logical_rect = {0};
	PangoLayout* _tmp28_;
	PangoRectangle _tmp29_ = {0};
	PangoRectangle _tmp30_ = {0};
	gint _tmp31_ = 0;
	DockyClockPreferences* _tmp32_;
	gboolean _tmp33_;
	gboolean _tmp34_;
	gint timeYOffset = 0;
	gint timeXOffset = 0;
	gint _tmp35_;
	gint _tmp36_;
	PangoRectangle _tmp37_;
	DockyClockPreferences* _tmp38_;
	gboolean _tmp39_;
	gboolean _tmp40_;
	cairo_t* _tmp43_;
	PangoLayout* _tmp44_;
	cairo_t* _tmp45_;
	cairo_t* _tmp46_;
	cairo_t* _tmp47_;
	cairo_t* _tmp48_;
	cairo_t* _tmp49_;
	DockyClockPreferences* _tmp50_;
	gboolean _tmp51_;
	gboolean _tmp52_;
	DockyClockPreferences* _tmp74_;
	gboolean _tmp75_;
	gboolean _tmp76_;
#line 116 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (self != NULL);
#line 116 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (surface != NULL);
#line 116 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (now != NULL);
#line 118 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 118 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 118 "../docklets/Clock/ClockDockItem.vala"
	prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 119 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = plank_surface_get_Context (surface);
#line 119 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = _tmp2_;
#line 119 "../docklets/Clock/ClockDockItem.vala"
	cr = _tmp3_;
#line 122 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = plank_surface_get_Height (surface);
#line 122 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = _tmp4_;
#line 122 "../docklets/Clock/ClockDockItem.vala"
	timeSize = _tmp5_ / 4;
#line 123 "../docklets/Clock/ClockDockItem.vala"
	_tmp6_ = plank_surface_get_Height (surface);
#line 123 "../docklets/Clock/ClockDockItem.vala"
	_tmp7_ = _tmp6_;
#line 123 "../docklets/Clock/ClockDockItem.vala"
	dateSize = _tmp7_ / 5;
#line 124 "../docklets/Clock/ClockDockItem.vala"
	_tmp8_ = plank_surface_get_Height (surface);
#line 124 "../docklets/Clock/ClockDockItem.vala"
	_tmp9_ = _tmp8_;
#line 124 "../docklets/Clock/ClockDockItem.vala"
	ampmSize = _tmp9_ / 5;
#line 125 "../docklets/Clock/ClockDockItem.vala"
	spacing = timeSize / 2;
#line 126 "../docklets/Clock/ClockDockItem.vala"
	_tmp10_ = plank_surface_get_Height (surface);
#line 126 "../docklets/Clock/ClockDockItem.vala"
	_tmp11_ = _tmp10_;
#line 126 "../docklets/Clock/ClockDockItem.vala"
	center = _tmp11_ / 2;
#line 128 "../docklets/Clock/ClockDockItem.vala"
	_tmp12_ = self->priv->layout;
#line 128 "../docklets/Clock/ClockDockItem.vala"
	_tmp13_ = plank_surface_get_Width (surface);
#line 128 "../docklets/Clock/ClockDockItem.vala"
	_tmp14_ = _tmp13_;
#line 128 "../docklets/Clock/ClockDockItem.vala"
	pango_layout_set_width (_tmp12_, (gint) (_tmp14_ * PANGO_SCALE));
#line 131 "../docklets/Clock/ClockDockItem.vala"
	_tmp15_ = self->priv->layout;
#line 131 "../docklets/Clock/ClockDockItem.vala"
	_tmp16_ = pango_layout_get_font_description (_tmp15_);
#line 131 "../docklets/Clock/ClockDockItem.vala"
	pango_font_description_set_absolute_size (_tmp16_, (gdouble) ((gint) (timeSize * PANGO_SCALE)));
#line 133 "../docklets/Clock/ClockDockItem.vala"
	_tmp17_ = prefs;
#line 133 "../docklets/Clock/ClockDockItem.vala"
	_tmp18_ = docky_clock_preferences_get_ShowMilitary (_tmp17_);
#line 133 "../docklets/Clock/ClockDockItem.vala"
	_tmp19_ = _tmp18_;
#line 133 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp19_) {
#line 585 "ClockDockItem.c"
		PangoLayout* _tmp20_;
		gchar* _tmp21_;
		gchar* _tmp22_;
#line 134 "../docklets/Clock/ClockDockItem.vala"
		_tmp20_ = self->priv->layout;
#line 134 "../docklets/Clock/ClockDockItem.vala"
		_tmp21_ = g_date_time_format (now, "%H:%M");
#line 134 "../docklets/Clock/ClockDockItem.vala"
		_tmp22_ = _tmp21_;
#line 134 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_set_text (_tmp20_, _tmp22_, -1);
#line 134 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp22_);
#line 599 "ClockDockItem.c"
	} else {
		PangoLayout* _tmp23_;
		gchar* _tmp24_;
		gchar* _tmp25_;
		gchar* _tmp26_;
		gchar* _tmp27_;
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_tmp23_ = self->priv->layout;
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_tmp24_ = g_date_time_format (now, "%l:%M");
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_tmp25_ = _tmp24_;
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_tmp26_ = string_chug (_tmp25_);
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_tmp27_ = _tmp26_;
#line 136 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_set_text (_tmp23_, _tmp27_, -1);
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp27_);
#line 136 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp25_);
#line 622 "ClockDockItem.c"
	}
#line 139 "../docklets/Clock/ClockDockItem.vala"
	_tmp28_ = self->priv->layout;
#line 139 "../docklets/Clock/ClockDockItem.vala"
	pango_layout_get_pixel_extents (_tmp28_, &_tmp29_, &_tmp30_);
#line 139 "../docklets/Clock/ClockDockItem.vala"
	ink_rect = _tmp29_;
#line 139 "../docklets/Clock/ClockDockItem.vala"
	logical_rect = _tmp30_;
#line 141 "../docklets/Clock/ClockDockItem.vala"
	_tmp32_ = prefs;
#line 141 "../docklets/Clock/ClockDockItem.vala"
	_tmp33_ = docky_clock_preferences_get_ShowMilitary (_tmp32_);
#line 141 "../docklets/Clock/ClockDockItem.vala"
	_tmp34_ = _tmp33_;
#line 141 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp34_) {
#line 141 "../docklets/Clock/ClockDockItem.vala"
		_tmp31_ = timeSize;
#line 642 "ClockDockItem.c"
	} else {
#line 141 "../docklets/Clock/ClockDockItem.vala"
		_tmp31_ = timeSize / 2;
#line 646 "ClockDockItem.c"
	}
#line 141 "../docklets/Clock/ClockDockItem.vala"
	timeYOffset = _tmp31_;
#line 142 "../docklets/Clock/ClockDockItem.vala"
	_tmp35_ = plank_surface_get_Width (surface);
#line 142 "../docklets/Clock/ClockDockItem.vala"
	_tmp36_ = _tmp35_;
#line 142 "../docklets/Clock/ClockDockItem.vala"
	_tmp37_ = ink_rect;
#line 142 "../docklets/Clock/ClockDockItem.vala"
	timeXOffset = (_tmp36_ - _tmp37_.width) / 2;
#line 143 "../docklets/Clock/ClockDockItem.vala"
	_tmp38_ = prefs;
#line 143 "../docklets/Clock/ClockDockItem.vala"
	_tmp39_ = docky_clock_preferences_get_ShowDate (_tmp38_);
#line 143 "../docklets/Clock/ClockDockItem.vala"
	_tmp40_ = _tmp39_;
#line 143 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp40_) {
#line 666 "ClockDockItem.c"
		cairo_t* _tmp41_;
#line 144 "../docklets/Clock/ClockDockItem.vala"
		_tmp41_ = cr;
#line 144 "../docklets/Clock/ClockDockItem.vala"
		cairo_move_to (_tmp41_, (gdouble) timeXOffset, (gdouble) timeYOffset);
#line 672 "ClockDockItem.c"
	} else {
		cairo_t* _tmp42_;
#line 146 "../docklets/Clock/ClockDockItem.vala"
		_tmp42_ = cr;
#line 146 "../docklets/Clock/ClockDockItem.vala"
		cairo_move_to (_tmp42_, (gdouble) timeXOffset, (gdouble) (timeYOffset + (timeSize / 2)));
#line 679 "ClockDockItem.c"
	}
#line 148 "../docklets/Clock/ClockDockItem.vala"
	_tmp43_ = cr;
#line 148 "../docklets/Clock/ClockDockItem.vala"
	_tmp44_ = self->priv->layout;
#line 148 "../docklets/Clock/ClockDockItem.vala"
	pango_cairo_layout_path (_tmp43_, _tmp44_);
#line 149 "../docklets/Clock/ClockDockItem.vala"
	_tmp45_ = cr;
#line 149 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_line_width (_tmp45_, (gdouble) 3);
#line 150 "../docklets/Clock/ClockDockItem.vala"
	_tmp46_ = cr;
#line 150 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_source_rgba (_tmp46_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 151 "../docklets/Clock/ClockDockItem.vala"
	_tmp47_ = cr;
#line 151 "../docklets/Clock/ClockDockItem.vala"
	cairo_stroke_preserve (_tmp47_);
#line 152 "../docklets/Clock/ClockDockItem.vala"
	_tmp48_ = cr;
#line 152 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_source_rgba (_tmp48_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.8);
#line 153 "../docklets/Clock/ClockDockItem.vala"
	_tmp49_ = cr;
#line 153 "../docklets/Clock/ClockDockItem.vala"
	cairo_fill (_tmp49_);
#line 156 "../docklets/Clock/ClockDockItem.vala"
	_tmp50_ = prefs;
#line 156 "../docklets/Clock/ClockDockItem.vala"
	_tmp51_ = docky_clock_preferences_get_ShowDate (_tmp50_);
#line 156 "../docklets/Clock/ClockDockItem.vala"
	_tmp52_ = _tmp51_;
#line 156 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp52_) {
#line 715 "ClockDockItem.c"
		PangoLayout* _tmp53_;
		PangoFontDescription* _tmp54_;
		PangoLayout* _tmp55_;
		gchar* _tmp56_;
		gchar* _tmp57_;
		PangoLayout* _tmp58_;
		PangoRectangle _tmp59_ = {0};
		PangoRectangle _tmp60_ = {0};
		cairo_t* _tmp61_;
		gint _tmp62_;
		gint _tmp63_;
		PangoRectangle _tmp64_;
		gint _tmp65_;
		gint _tmp66_;
		cairo_t* _tmp67_;
		PangoLayout* _tmp68_;
		cairo_t* _tmp69_;
		cairo_t* _tmp70_;
		cairo_t* _tmp71_;
		cairo_t* _tmp72_;
		cairo_t* _tmp73_;
#line 157 "../docklets/Clock/ClockDockItem.vala"
		_tmp53_ = self->priv->layout;
#line 157 "../docklets/Clock/ClockDockItem.vala"
		_tmp54_ = pango_layout_get_font_description (_tmp53_);
#line 157 "../docklets/Clock/ClockDockItem.vala"
		pango_font_description_set_absolute_size (_tmp54_, (gdouble) ((gint) (dateSize * PANGO_SCALE)));
#line 159 "../docklets/Clock/ClockDockItem.vala"
		_tmp55_ = self->priv->layout;
#line 159 "../docklets/Clock/ClockDockItem.vala"
		_tmp56_ = g_date_time_format (now, "%b %d");
#line 159 "../docklets/Clock/ClockDockItem.vala"
		_tmp57_ = _tmp56_;
#line 159 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_set_text (_tmp55_, _tmp57_, -1);
#line 159 "../docklets/Clock/ClockDockItem.vala"
		_g_free0 (_tmp57_);
#line 160 "../docklets/Clock/ClockDockItem.vala"
		_tmp58_ = self->priv->layout;
#line 160 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_get_pixel_extents (_tmp58_, &_tmp59_, &_tmp60_);
#line 160 "../docklets/Clock/ClockDockItem.vala"
		ink_rect = _tmp59_;
#line 160 "../docklets/Clock/ClockDockItem.vala"
		logical_rect = _tmp60_;
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp61_ = cr;
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp62_ = plank_surface_get_Width (surface);
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp63_ = _tmp62_;
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp64_ = ink_rect;
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp65_ = plank_surface_get_Height (surface);
#line 161 "../docklets/Clock/ClockDockItem.vala"
		_tmp66_ = _tmp65_;
#line 161 "../docklets/Clock/ClockDockItem.vala"
		cairo_move_to (_tmp61_, (gdouble) ((_tmp63_ - _tmp64_.width) / 2), (gdouble) ((_tmp66_ - spacing) - dateSize));
#line 163 "../docklets/Clock/ClockDockItem.vala"
		_tmp67_ = cr;
#line 163 "../docklets/Clock/ClockDockItem.vala"
		_tmp68_ = self->priv->layout;
#line 163 "../docklets/Clock/ClockDockItem.vala"
		pango_cairo_layout_path (_tmp67_, _tmp68_);
#line 164 "../docklets/Clock/ClockDockItem.vala"
		_tmp69_ = cr;
#line 164 "../docklets/Clock/ClockDockItem.vala"
		cairo_set_line_width (_tmp69_, 2.5);
#line 165 "../docklets/Clock/ClockDockItem.vala"
		_tmp70_ = cr;
#line 165 "../docklets/Clock/ClockDockItem.vala"
		cairo_set_source_rgba (_tmp70_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 166 "../docklets/Clock/ClockDockItem.vala"
		_tmp71_ = cr;
#line 166 "../docklets/Clock/ClockDockItem.vala"
		cairo_stroke_preserve (_tmp71_);
#line 167 "../docklets/Clock/ClockDockItem.vala"
		_tmp72_ = cr;
#line 167 "../docklets/Clock/ClockDockItem.vala"
		cairo_set_source_rgba (_tmp72_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.8);
#line 168 "../docklets/Clock/ClockDockItem.vala"
		_tmp73_ = cr;
#line 168 "../docklets/Clock/ClockDockItem.vala"
		cairo_fill (_tmp73_);
#line 801 "ClockDockItem.c"
	}
#line 171 "../docklets/Clock/ClockDockItem.vala"
	_tmp74_ = prefs;
#line 171 "../docklets/Clock/ClockDockItem.vala"
	_tmp75_ = docky_clock_preferences_get_ShowMilitary (_tmp74_);
#line 171 "../docklets/Clock/ClockDockItem.vala"
	_tmp76_ = _tmp75_;
#line 171 "../docklets/Clock/ClockDockItem.vala"
	if (!_tmp76_) {
#line 811 "ClockDockItem.c"
		PangoLayout* _tmp77_;
		PangoFontDescription* _tmp78_;
		gint _tmp79_ = 0;
		DockyClockPreferences* _tmp80_;
		gboolean _tmp81_;
		gboolean _tmp82_;
		gint yOffset = 0;
		PangoLayout* _tmp85_;
		PangoLayout* _tmp86_;
		PangoRectangle _tmp87_ = {0};
		PangoRectangle _tmp88_ = {0};
		cairo_t* _tmp89_;
		PangoRectangle _tmp90_;
		cairo_t* _tmp91_;
		PangoLayout* _tmp92_;
		cairo_t* _tmp93_;
		cairo_t* _tmp96_;
		cairo_t* _tmp99_;
		PangoLayout* _tmp100_;
		PangoLayout* _tmp101_;
		PangoRectangle _tmp102_ = {0};
		PangoRectangle _tmp103_ = {0};
		cairo_t* _tmp104_;
		PangoRectangle _tmp105_;
		cairo_t* _tmp106_;
		PangoLayout* _tmp107_;
		cairo_t* _tmp108_;
		cairo_t* _tmp111_;
		cairo_t* _tmp114_;
#line 172 "../docklets/Clock/ClockDockItem.vala"
		_tmp77_ = self->priv->layout;
#line 172 "../docklets/Clock/ClockDockItem.vala"
		_tmp78_ = pango_layout_get_font_description (_tmp77_);
#line 172 "../docklets/Clock/ClockDockItem.vala"
		pango_font_description_set_absolute_size (_tmp78_, (gdouble) ((gint) (ampmSize * PANGO_SCALE)));
#line 174 "../docklets/Clock/ClockDockItem.vala"
		_tmp80_ = prefs;
#line 174 "../docklets/Clock/ClockDockItem.vala"
		_tmp81_ = docky_clock_preferences_get_ShowDate (_tmp80_);
#line 174 "../docklets/Clock/ClockDockItem.vala"
		_tmp82_ = _tmp81_;
#line 174 "../docklets/Clock/ClockDockItem.vala"
		if (_tmp82_) {
#line 174 "../docklets/Clock/ClockDockItem.vala"
			_tmp79_ = center - spacing;
#line 857 "ClockDockItem.c"
		} else {
			gint _tmp83_;
			gint _tmp84_;
#line 174 "../docklets/Clock/ClockDockItem.vala"
			_tmp83_ = plank_surface_get_Height (surface);
#line 174 "../docklets/Clock/ClockDockItem.vala"
			_tmp84_ = _tmp83_;
#line 174 "../docklets/Clock/ClockDockItem.vala"
			_tmp79_ = (_tmp84_ - spacing) - ampmSize;
#line 867 "ClockDockItem.c"
		}
#line 174 "../docklets/Clock/ClockDockItem.vala"
		yOffset = _tmp79_;
#line 177 "../docklets/Clock/ClockDockItem.vala"
		_tmp85_ = self->priv->layout;
#line 177 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_set_text (_tmp85_, "am", -1);
#line 178 "../docklets/Clock/ClockDockItem.vala"
		_tmp86_ = self->priv->layout;
#line 178 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_get_pixel_extents (_tmp86_, &_tmp87_, &_tmp88_);
#line 178 "../docklets/Clock/ClockDockItem.vala"
		ink_rect = _tmp87_;
#line 178 "../docklets/Clock/ClockDockItem.vala"
		logical_rect = _tmp88_;
#line 179 "../docklets/Clock/ClockDockItem.vala"
		_tmp89_ = cr;
#line 179 "../docklets/Clock/ClockDockItem.vala"
		_tmp90_ = ink_rect;
#line 179 "../docklets/Clock/ClockDockItem.vala"
		cairo_move_to (_tmp89_, (gdouble) ((center - _tmp90_.width) / 2), (gdouble) yOffset);
#line 180 "../docklets/Clock/ClockDockItem.vala"
		_tmp91_ = cr;
#line 180 "../docklets/Clock/ClockDockItem.vala"
		_tmp92_ = self->priv->layout;
#line 180 "../docklets/Clock/ClockDockItem.vala"
		pango_cairo_layout_path (_tmp91_, _tmp92_);
#line 181 "../docklets/Clock/ClockDockItem.vala"
		_tmp93_ = cr;
#line 181 "../docklets/Clock/ClockDockItem.vala"
		cairo_set_line_width (_tmp93_, (gdouble) 2);
#line 182 "../docklets/Clock/ClockDockItem.vala"
		if (g_date_time_get_hour (now) < 12) {
#line 901 "ClockDockItem.c"
			cairo_t* _tmp94_;
#line 183 "../docklets/Clock/ClockDockItem.vala"
			_tmp94_ = cr;
#line 183 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp94_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 907 "ClockDockItem.c"
		} else {
			cairo_t* _tmp95_;
#line 185 "../docklets/Clock/ClockDockItem.vala"
			_tmp95_ = cr;
#line 185 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp95_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.4);
#line 914 "ClockDockItem.c"
		}
#line 186 "../docklets/Clock/ClockDockItem.vala"
		_tmp96_ = cr;
#line 186 "../docklets/Clock/ClockDockItem.vala"
		cairo_stroke_preserve (_tmp96_);
#line 187 "../docklets/Clock/ClockDockItem.vala"
		if (g_date_time_get_hour (now) < 12) {
#line 922 "ClockDockItem.c"
			cairo_t* _tmp97_;
#line 188 "../docklets/Clock/ClockDockItem.vala"
			_tmp97_ = cr;
#line 188 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp97_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.8);
#line 928 "ClockDockItem.c"
		} else {
			cairo_t* _tmp98_;
#line 190 "../docklets/Clock/ClockDockItem.vala"
			_tmp98_ = cr;
#line 190 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp98_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 935 "ClockDockItem.c"
		}
#line 191 "../docklets/Clock/ClockDockItem.vala"
		_tmp99_ = cr;
#line 191 "../docklets/Clock/ClockDockItem.vala"
		cairo_fill (_tmp99_);
#line 194 "../docklets/Clock/ClockDockItem.vala"
		_tmp100_ = self->priv->layout;
#line 194 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_set_text (_tmp100_, "pm", -1);
#line 195 "../docklets/Clock/ClockDockItem.vala"
		_tmp101_ = self->priv->layout;
#line 195 "../docklets/Clock/ClockDockItem.vala"
		pango_layout_get_pixel_extents (_tmp101_, &_tmp102_, &_tmp103_);
#line 195 "../docklets/Clock/ClockDockItem.vala"
		ink_rect = _tmp102_;
#line 195 "../docklets/Clock/ClockDockItem.vala"
		logical_rect = _tmp103_;
#line 196 "../docklets/Clock/ClockDockItem.vala"
		_tmp104_ = cr;
#line 196 "../docklets/Clock/ClockDockItem.vala"
		_tmp105_ = ink_rect;
#line 196 "../docklets/Clock/ClockDockItem.vala"
		cairo_move_to (_tmp104_, (gdouble) (center + ((center - _tmp105_.width) / 2)), (gdouble) yOffset);
#line 197 "../docklets/Clock/ClockDockItem.vala"
		_tmp106_ = cr;
#line 197 "../docklets/Clock/ClockDockItem.vala"
		_tmp107_ = self->priv->layout;
#line 197 "../docklets/Clock/ClockDockItem.vala"
		pango_cairo_layout_path (_tmp106_, _tmp107_);
#line 198 "../docklets/Clock/ClockDockItem.vala"
		_tmp108_ = cr;
#line 198 "../docklets/Clock/ClockDockItem.vala"
		cairo_set_line_width (_tmp108_, (gdouble) 2);
#line 199 "../docklets/Clock/ClockDockItem.vala"
		if (g_date_time_get_hour (now) < 12) {
#line 971 "ClockDockItem.c"
			cairo_t* _tmp109_;
#line 200 "../docklets/Clock/ClockDockItem.vala"
			_tmp109_ = cr;
#line 200 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp109_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.4);
#line 977 "ClockDockItem.c"
		} else {
			cairo_t* _tmp110_;
#line 202 "../docklets/Clock/ClockDockItem.vala"
			_tmp110_ = cr;
#line 202 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp110_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 984 "ClockDockItem.c"
		}
#line 203 "../docklets/Clock/ClockDockItem.vala"
		_tmp111_ = cr;
#line 203 "../docklets/Clock/ClockDockItem.vala"
		cairo_stroke_preserve (_tmp111_);
#line 204 "../docklets/Clock/ClockDockItem.vala"
		if (g_date_time_get_hour (now) < 12) {
#line 992 "ClockDockItem.c"
			cairo_t* _tmp112_;
#line 205 "../docklets/Clock/ClockDockItem.vala"
			_tmp112_ = cr;
#line 205 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp112_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
#line 998 "ClockDockItem.c"
		} else {
			cairo_t* _tmp113_;
#line 207 "../docklets/Clock/ClockDockItem.vala"
			_tmp113_ = cr;
#line 207 "../docklets/Clock/ClockDockItem.vala"
			cairo_set_source_rgba (_tmp113_, (gdouble) 1, (gdouble) 1, (gdouble) 1, 0.8);
#line 1005 "ClockDockItem.c"
		}
#line 208 "../docklets/Clock/ClockDockItem.vala"
		_tmp114_ = cr;
#line 208 "../docklets/Clock/ClockDockItem.vala"
		cairo_fill (_tmp114_);
#line 1011 "ClockDockItem.c"
	}
}

static void
docky_clock_dock_item_render_analog_clock (DockyClockDockItem* self,
                                           cairo_t* cr,
                                           GDateTime* now,
                                           gint size)
{
	gint center = 0;
	gint radius = 0;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	const gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gdouble minuteRotation = 0.0;
	gint _tmp12_ = 0;
	const gchar* _tmp13_;
	gint total_hours = 0;
	gdouble hourRotation = 0.0;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	const gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
#line 212 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (self != NULL);
#line 212 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (cr != NULL);
#line 212 "../docklets/Clock/ClockDockItem.vala"
	g_return_if_fail (now != NULL);
#line 214 "../docklets/Clock/ClockDockItem.vala"
	center = size / 2;
#line 215 "../docklets/Clock/ClockDockItem.vala"
	radius = center;
#line 217 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = self->priv->current_theme;
#line 217 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = g_strconcat (_tmp0_, "/clock-drop-shadow.svg", NULL);
#line 217 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = _tmp1_;
#line 217 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp2_, radius * 2);
#line 217 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp2_);
#line 218 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = self->priv->current_theme;
#line 218 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = g_strconcat (_tmp3_, "/clock-face-shadow.svg", NULL);
#line 218 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = _tmp4_;
#line 218 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp5_, radius * 2);
#line 218 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp5_);
#line 219 "../docklets/Clock/ClockDockItem.vala"
	_tmp6_ = self->priv->current_theme;
#line 219 "../docklets/Clock/ClockDockItem.vala"
	_tmp7_ = g_strconcat (_tmp6_, "/clock-face.svg", NULL);
#line 219 "../docklets/Clock/ClockDockItem.vala"
	_tmp8_ = _tmp7_;
#line 219 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp8_, radius * 2);
#line 219 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp8_);
#line 220 "../docklets/Clock/ClockDockItem.vala"
	_tmp9_ = self->priv->current_theme;
#line 220 "../docklets/Clock/ClockDockItem.vala"
	_tmp10_ = g_strconcat (_tmp9_, "/clock-marks.svg", NULL);
#line 220 "../docklets/Clock/ClockDockItem.vala"
	_tmp11_ = _tmp10_;
#line 220 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp11_, radius * 2);
#line 220 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp11_);
#line 222 "../docklets/Clock/ClockDockItem.vala"
	cairo_translate (cr, (gdouble) center, (gdouble) center);
#line 223 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_source_rgba (cr, 0.15, 0.15, 0.15, (gdouble) 1);
#line 225 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_line_width (cr, MAX (1.0, size / 48.0));
#line 226 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_line_cap (cr, CAIRO_LINE_CAP_ROUND);
#line 227 "../docklets/Clock/ClockDockItem.vala"
	minuteRotation = G_PI * ((g_date_time_get_minute (now) / 30.0) + 1.0);
#line 228 "../docklets/Clock/ClockDockItem.vala"
	cairo_rotate (cr, minuteRotation);
#line 229 "../docklets/Clock/ClockDockItem.vala"
	cairo_move_to (cr, (gdouble) 0, radius - (radius * 0.35));
#line 230 "../docklets/Clock/ClockDockItem.vala"
	cairo_line_to (cr, (gdouble) 0, 0 - (radius * 0.15));
#line 231 "../docklets/Clock/ClockDockItem.vala"
	cairo_stroke (cr);
#line 232 "../docklets/Clock/ClockDockItem.vala"
	cairo_rotate (cr, 0 - minuteRotation);
#line 234 "../docklets/Clock/ClockDockItem.vala"
	cairo_set_source_rgba (cr, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 1);
#line 235 "../docklets/Clock/ClockDockItem.vala"
	_tmp13_ = self->priv->current_theme;
#line 235 "../docklets/Clock/ClockDockItem.vala"
	if (g_str_has_suffix (_tmp13_, "24")) {
#line 235 "../docklets/Clock/ClockDockItem.vala"
		_tmp12_ = 24;
#line 1124 "ClockDockItem.c"
	} else {
#line 235 "../docklets/Clock/ClockDockItem.vala"
		_tmp12_ = 12;
#line 1128 "ClockDockItem.c"
	}
#line 235 "../docklets/Clock/ClockDockItem.vala"
	total_hours = _tmp12_;
#line 236 "../docklets/Clock/ClockDockItem.vala"
	hourRotation = G_PI * ((((g_date_time_get_hour (now) % total_hours) / (total_hours / 2.0)) + (g_date_time_get_minute (now) / (30.0 * total_hours))) + 1.0);
#line 237 "../docklets/Clock/ClockDockItem.vala"
	cairo_rotate (cr, hourRotation);
#line 238 "../docklets/Clock/ClockDockItem.vala"
	cairo_move_to (cr, (gdouble) 0, radius - (radius * 0.5));
#line 239 "../docklets/Clock/ClockDockItem.vala"
	cairo_line_to (cr, (gdouble) 0, 0 - (radius * 0.15));
#line 240 "../docklets/Clock/ClockDockItem.vala"
	cairo_stroke (cr);
#line 241 "../docklets/Clock/ClockDockItem.vala"
	cairo_rotate (cr, 0 - hourRotation);
#line 243 "../docklets/Clock/ClockDockItem.vala"
	cairo_translate (cr, (gdouble) (0 - center), (gdouble) (0 - center));
#line 245 "../docklets/Clock/ClockDockItem.vala"
	_tmp14_ = self->priv->current_theme;
#line 245 "../docklets/Clock/ClockDockItem.vala"
	_tmp15_ = g_strconcat (_tmp14_, "/clock-glass.svg", NULL);
#line 245 "../docklets/Clock/ClockDockItem.vala"
	_tmp16_ = _tmp15_;
#line 245 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp16_, radius * 2);
#line 245 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp16_);
#line 246 "../docklets/Clock/ClockDockItem.vala"
	_tmp17_ = self->priv->current_theme;
#line 246 "../docklets/Clock/ClockDockItem.vala"
	_tmp18_ = g_strconcat (_tmp17_, "/clock-frame.svg", NULL);
#line 246 "../docklets/Clock/ClockDockItem.vala"
	_tmp19_ = _tmp18_;
#line 246 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_render_file_onto_context (self, cr, _tmp19_, radius * 2);
#line 246 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (_tmp19_);
#line 1166 "ClockDockItem.c"
}

static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 249 "../docklets/Clock/ClockDockItem.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 249 "../docklets/Clock/ClockDockItem.vala"
	return _data1_;
#line 1176 "ClockDockItem.c"
}

static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 249 "../docklets/Clock/ClockDockItem.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 1186 "ClockDockItem.c"
		DockyClockDockItem* self;
#line 249 "../docklets/Clock/ClockDockItem.vala"
		self = _data1_->self;
#line 249 "../docklets/Clock/ClockDockItem.vala"
		_g_object_unref0 (self);
#line 249 "../docklets/Clock/ClockDockItem.vala"
		g_slice_free (Block1Data, _data1_);
#line 1194 "ClockDockItem.c"
	}
}

static void
__lambda4_ (Block1Data* _data1_)
{
	DockyClockDockItem* self;
	gboolean _tmp0_;
	gboolean _tmp1_;
#line 256 "../docklets/Clock/ClockDockItem.vala"
	self = _data1_->self;
#line 257 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = docky_clock_preferences_get_ShowDigital (_data1_->prefs);
#line 257 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 257 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_preferences_set_ShowDigital (_data1_->prefs, !_tmp1_);
#line 1212 "ClockDockItem.c"
}

static void
___lambda4__gtk_menu_item_activate (GtkMenuItem* _sender,
                                    gpointer self)
{
#line 256 "../docklets/Clock/ClockDockItem.vala"
	__lambda4_ (self);
#line 1221 "ClockDockItem.c"
}

static void
__lambda5_ (Block1Data* _data1_)
{
	DockyClockDockItem* self;
	gboolean _tmp0_;
	gboolean _tmp1_;
#line 263 "../docklets/Clock/ClockDockItem.vala"
	self = _data1_->self;
#line 264 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = docky_clock_preferences_get_ShowMilitary (_data1_->prefs);
#line 264 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 264 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_preferences_set_ShowMilitary (_data1_->prefs, !_tmp1_);
#line 1238 "ClockDockItem.c"
}

static void
___lambda5__gtk_menu_item_activate (GtkMenuItem* _sender,
                                    gpointer self)
{
#line 263 "../docklets/Clock/ClockDockItem.vala"
	__lambda5_ (self);
#line 1247 "ClockDockItem.c"
}

static void
__lambda6_ (Block1Data* _data1_)
{
	DockyClockDockItem* self;
	gboolean _tmp0_;
	gboolean _tmp1_;
#line 271 "../docklets/Clock/ClockDockItem.vala"
	self = _data1_->self;
#line 272 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = docky_clock_preferences_get_ShowDate (_data1_->prefs);
#line 272 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 272 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_preferences_set_ShowDate (_data1_->prefs, !_tmp1_);
#line 1264 "ClockDockItem.c"
}

static void
___lambda6__gtk_menu_item_activate (GtkMenuItem* _sender,
                                    gpointer self)
{
#line 271 "../docklets/Clock/ClockDockItem.vala"
	__lambda6_ (self);
#line 1273 "ClockDockItem.c"
}

static GeeArrayList*
docky_clock_dock_item_real_get_menu_items (PlankDockElement* base)
{
	DockyClockDockItem * self;
	Block1Data* _data1_;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
	GeeArrayList* items = NULL;
	GeeArrayList* _tmp2_;
	GtkCheckMenuItem* checked_item = NULL;
	GtkCheckMenuItem* _tmp3_;
	GtkCheckMenuItem* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	GtkCheckMenuItem* _tmp7_;
	GtkCheckMenuItem* _tmp8_;
	GtkCheckMenuItem* _tmp9_;
	GtkCheckMenuItem* _tmp10_;
	gboolean _tmp11_;
	gboolean _tmp12_;
	GtkCheckMenuItem* _tmp13_;
	GtkCheckMenuItem* _tmp14_;
	GtkCheckMenuItem* _tmp15_;
	GtkCheckMenuItem* _tmp16_;
	gboolean _tmp17_;
	gboolean _tmp18_;
	GtkCheckMenuItem* _tmp19_;
	gboolean _tmp20_;
	gboolean _tmp21_;
	GtkCheckMenuItem* _tmp22_;
	GtkCheckMenuItem* _tmp23_;
	GeeArrayList* result = NULL;
#line 249 "../docklets/Clock/ClockDockItem.vala"
	self = (DockyClockDockItem*) base;
#line 249 "../docklets/Clock/ClockDockItem.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 249 "../docklets/Clock/ClockDockItem.vala"
	_data1_->_ref_count_ = 1;
#line 249 "../docklets/Clock/ClockDockItem.vala"
	_data1_->self = g_object_ref (self);
#line 251 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 251 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 251 "../docklets/Clock/ClockDockItem.vala"
	_data1_->prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 252 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = gee_array_list_new (gtk_menu_item_get_type (), (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
#line 252 "../docklets/Clock/ClockDockItem.vala"
	items = _tmp2_;
#line 254 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_ ("Di_gital Clock"));
#line 254 "../docklets/Clock/ClockDockItem.vala"
	g_object_ref_sink (_tmp3_);
#line 254 "../docklets/Clock/ClockDockItem.vala"
	checked_item = _tmp3_;
#line 255 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = checked_item;
#line 255 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = docky_clock_preferences_get_ShowDigital (_data1_->prefs);
#line 255 "../docklets/Clock/ClockDockItem.vala"
	_tmp6_ = _tmp5_;
#line 255 "../docklets/Clock/ClockDockItem.vala"
	gtk_check_menu_item_set_active (_tmp4_, _tmp6_);
#line 256 "../docklets/Clock/ClockDockItem.vala"
	_tmp7_ = checked_item;
#line 256 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_data ((GtkMenuItem*) _tmp7_, "activate", (GCallback) ___lambda4__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 259 "../docklets/Clock/ClockDockItem.vala"
	_tmp8_ = checked_item;
#line 259 "../docklets/Clock/ClockDockItem.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) items, (GtkMenuItem*) _tmp8_);
#line 261 "../docklets/Clock/ClockDockItem.vala"
	_tmp9_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_ ("24-Hour _Clock"));
#line 261 "../docklets/Clock/ClockDockItem.vala"
	g_object_ref_sink (_tmp9_);
#line 261 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (checked_item);
#line 261 "../docklets/Clock/ClockDockItem.vala"
	checked_item = _tmp9_;
#line 262 "../docklets/Clock/ClockDockItem.vala"
	_tmp10_ = checked_item;
#line 262 "../docklets/Clock/ClockDockItem.vala"
	_tmp11_ = docky_clock_preferences_get_ShowMilitary (_data1_->prefs);
#line 262 "../docklets/Clock/ClockDockItem.vala"
	_tmp12_ = _tmp11_;
#line 262 "../docklets/Clock/ClockDockItem.vala"
	gtk_check_menu_item_set_active (_tmp10_, _tmp12_);
#line 263 "../docklets/Clock/ClockDockItem.vala"
	_tmp13_ = checked_item;
#line 263 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_data ((GtkMenuItem*) _tmp13_, "activate", (GCallback) ___lambda5__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 266 "../docklets/Clock/ClockDockItem.vala"
	_tmp14_ = checked_item;
#line 266 "../docklets/Clock/ClockDockItem.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) items, (GtkMenuItem*) _tmp14_);
#line 268 "../docklets/Clock/ClockDockItem.vala"
	_tmp15_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_ ("Show _Date"));
#line 268 "../docklets/Clock/ClockDockItem.vala"
	g_object_ref_sink (_tmp15_);
#line 268 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (checked_item);
#line 268 "../docklets/Clock/ClockDockItem.vala"
	checked_item = _tmp15_;
#line 269 "../docklets/Clock/ClockDockItem.vala"
	_tmp16_ = checked_item;
#line 269 "../docklets/Clock/ClockDockItem.vala"
	_tmp17_ = docky_clock_preferences_get_ShowDate (_data1_->prefs);
#line 269 "../docklets/Clock/ClockDockItem.vala"
	_tmp18_ = _tmp17_;
#line 269 "../docklets/Clock/ClockDockItem.vala"
	gtk_check_menu_item_set_active (_tmp16_, _tmp18_);
#line 270 "../docklets/Clock/ClockDockItem.vala"
	_tmp19_ = checked_item;
#line 270 "../docklets/Clock/ClockDockItem.vala"
	_tmp20_ = docky_clock_preferences_get_ShowDigital (_data1_->prefs);
#line 270 "../docklets/Clock/ClockDockItem.vala"
	_tmp21_ = _tmp20_;
#line 270 "../docklets/Clock/ClockDockItem.vala"
	gtk_widget_set_sensitive ((GtkWidget*) _tmp19_, _tmp21_);
#line 271 "../docklets/Clock/ClockDockItem.vala"
	_tmp22_ = checked_item;
#line 271 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_data ((GtkMenuItem*) _tmp22_, "activate", (GCallback) ___lambda6__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 274 "../docklets/Clock/ClockDockItem.vala"
	_tmp23_ = checked_item;
#line 274 "../docklets/Clock/ClockDockItem.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) items, (GtkMenuItem*) _tmp23_);
#line 276 "../docklets/Clock/ClockDockItem.vala"
	result = items;
#line 276 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (checked_item);
#line 276 "../docklets/Clock/ClockDockItem.vala"
	block1_data_unref (_data1_);
#line 276 "../docklets/Clock/ClockDockItem.vala"
	_data1_ = NULL;
#line 276 "../docklets/Clock/ClockDockItem.vala"
	return result;
#line 1414 "ClockDockItem.c"
}

DockyClockDockItem*
docky_clock_dock_item_construct (GType object_type)
{
	DockyClockDockItem * self = NULL;
#line 24 "../docklets/Clock/ClockDockItem.vala"
	self = (DockyClockDockItem*) plank_docklet_item_construct (object_type);
#line 24 "../docklets/Clock/ClockDockItem.vala"
	return self;
#line 1425 "ClockDockItem.c"
}

DockyClockDockItem*
docky_clock_dock_item_new (void)
{
#line 24 "../docklets/Clock/ClockDockItem.vala"
	return docky_clock_dock_item_construct (DOCKY_TYPE_CLOCK_DOCK_ITEM);
#line 1433 "ClockDockItem.c"
}

static PangoFontDescription*
_vala_PangoFontDescription_copy (PangoFontDescription* self)
{
#line 45 "../docklets/Clock/ClockDockItem.vala"
	return g_boxed_copy (pango_font_description_get_type (), self);
#line 1441 "ClockDockItem.c"
}

static gpointer
__vala_PangoFontDescription_copy0 (gpointer self)
{
#line 45 "../docklets/Clock/ClockDockItem.vala"
	return self ? _vala_PangoFontDescription_copy (self) : NULL;
#line 1449 "ClockDockItem.c"
}

static void
_vala_PangoFontDescription_free (PangoFontDescription* self)
{
#line 41 "../docklets/Clock/ClockDockItem.vala"
	g_boxed_free (pango_font_description_get_type (), self);
#line 1457 "ClockDockItem.c"
}

static GObject *
docky_clock_dock_item_constructor (GType type,
                                   guint n_construct_properties,
                                   GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	DockyClockDockItem * self;
	PangoContext* _tmp0_;
	PangoContext* _tmp1_;
	PangoLayout* _tmp2_;
	PangoFontDescription* font_description = NULL;
	GtkStyle* _tmp3_;
	GtkStyle* _tmp4_;
	PangoFontDescription* _tmp5_;
	PangoFontDescription* _tmp6_;
	PangoFontDescription* _tmp7_;
	PangoFontDescription* _tmp8_;
	PangoLayout* _tmp9_;
	PangoFontDescription* _tmp10_;
	PangoLayout* _tmp11_;
	DockyClockPreferences* prefs = NULL;
	PlankDockItemPreferences* _tmp12_;
	PlankDockItemPreferences* _tmp13_;
	DockyClockPreferences* _tmp14_;
	DockyClockPreferences* _tmp15_;
	DockyClockPreferences* _tmp16_;
	const gchar* _tmp17_ = NULL;
	DockyClockPreferences* _tmp18_;
	gboolean _tmp19_;
	gboolean _tmp20_;
	gchar* _tmp21_;
#line 41 "../docklets/Clock/ClockDockItem.vala"
	parent_class = G_OBJECT_CLASS (docky_clock_dock_item_parent_class);
#line 41 "../docklets/Clock/ClockDockItem.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 41 "../docklets/Clock/ClockDockItem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, DOCKY_TYPE_CLOCK_DOCK_ITEM, DockyClockDockItem);
#line 44 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = gdk_pango_context_get ();
#line 44 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 44 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = pango_layout_new (_tmp1_);
#line 44 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (self->priv->layout);
#line 44 "../docklets/Clock/ClockDockItem.vala"
	self->priv->layout = _tmp2_;
#line 44 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (_tmp1_);
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_tmp3_ = gtk_style_new ();
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_tmp4_ = _tmp3_;
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = _tmp4_->font_desc;
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_tmp6_ = __vala_PangoFontDescription_copy0 (_tmp5_);
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_tmp7_ = _tmp6_;
#line 45 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (_tmp4_);
#line 45 "../docklets/Clock/ClockDockItem.vala"
	font_description = _tmp7_;
#line 46 "../docklets/Clock/ClockDockItem.vala"
	_tmp8_ = font_description;
#line 46 "../docklets/Clock/ClockDockItem.vala"
	pango_font_description_set_weight (_tmp8_, PANGO_WEIGHT_BOLD);
#line 47 "../docklets/Clock/ClockDockItem.vala"
	_tmp9_ = self->priv->layout;
#line 47 "../docklets/Clock/ClockDockItem.vala"
	_tmp10_ = font_description;
#line 47 "../docklets/Clock/ClockDockItem.vala"
	pango_layout_set_font_description (_tmp9_, _tmp10_);
#line 48 "../docklets/Clock/ClockDockItem.vala"
	_tmp11_ = self->priv->layout;
#line 48 "../docklets/Clock/ClockDockItem.vala"
	pango_layout_set_ellipsize (_tmp11_, PANGO_ELLIPSIZE_NONE);
#line 50 "../docklets/Clock/ClockDockItem.vala"
	plank_dock_item_set_Icon ((PlankDockItem*) self, "clock");
#line 51 "../docklets/Clock/ClockDockItem.vala"
	plank_dock_element_set_Text ((PlankDockElement*) self, "time");
#line 53 "../docklets/Clock/ClockDockItem.vala"
	_tmp12_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 53 "../docklets/Clock/ClockDockItem.vala"
	_tmp13_ = _tmp12_;
#line 53 "../docklets/Clock/ClockDockItem.vala"
	prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 54 "../docklets/Clock/ClockDockItem.vala"
	_tmp14_ = prefs;
#line 54 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_object ((GObject*) _tmp14_, "notify::ShowMilitary", (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self, 0);
#line 55 "../docklets/Clock/ClockDockItem.vala"
	_tmp15_ = prefs;
#line 55 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_object ((GObject*) _tmp15_, "notify::ShowDate", (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self, 0);
#line 56 "../docklets/Clock/ClockDockItem.vala"
	_tmp16_ = prefs;
#line 56 "../docklets/Clock/ClockDockItem.vala"
	g_signal_connect_object ((GObject*) _tmp16_, "notify::ShowDigital", (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self, 0);
#line 58 "../docklets/Clock/ClockDockItem.vala"
	self->priv->timer_id = gdk_threads_add_timeout ((guint) 1000, (GSourceFunc) docky_clock_dock_item_update_timer, self);
#line 59 "../docklets/Clock/ClockDockItem.vala"
	_tmp18_ = prefs;
#line 59 "../docklets/Clock/ClockDockItem.vala"
	_tmp19_ = docky_clock_preferences_get_ShowMilitary (_tmp18_);
#line 59 "../docklets/Clock/ClockDockItem.vala"
	_tmp20_ = _tmp19_;
#line 59 "../docklets/Clock/ClockDockItem.vala"
	if (_tmp20_) {
#line 59 "../docklets/Clock/ClockDockItem.vala"
		_tmp17_ = DOCKY_CLOCK_DOCK_ITEM_THEME_BASE_URI "Default24";
#line 1572 "ClockDockItem.c"
	} else {
#line 59 "../docklets/Clock/ClockDockItem.vala"
		_tmp17_ = DOCKY_CLOCK_DOCK_ITEM_THEME_BASE_URI "Default";
#line 1576 "ClockDockItem.c"
	}
#line 59 "../docklets/Clock/ClockDockItem.vala"
	_tmp21_ = g_strdup (_tmp17_);
#line 59 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (self->priv->current_theme);
#line 59 "../docklets/Clock/ClockDockItem.vala"
	self->priv->current_theme = _tmp21_;
#line 41 "../docklets/Clock/ClockDockItem.vala"
	__vala_PangoFontDescription_free0 (font_description);
#line 41 "../docklets/Clock/ClockDockItem.vala"
	return obj;
#line 1588 "ClockDockItem.c"
}

static void
docky_clock_dock_item_class_init (DockyClockDockItemClass * klass,
                                  gpointer klass_data)
{
#line 24 "../docklets/Clock/ClockDockItem.vala"
	docky_clock_dock_item_parent_class = g_type_class_peek_parent (klass);
#line 24 "../docklets/Clock/ClockDockItem.vala"
	g_type_class_adjust_private_offset (klass, &DockyClockDockItem_private_offset);
#line 24 "../docklets/Clock/ClockDockItem.vala"
	((PlankDockItemClass *) klass)->draw_icon = (void (*) (PlankDockItem*, PlankSurface*)) docky_clock_dock_item_real_draw_icon;
#line 24 "../docklets/Clock/ClockDockItem.vala"
	((PlankDockElementClass *) klass)->get_menu_items = (GeeArrayList* (*) (PlankDockElement*)) docky_clock_dock_item_real_get_menu_items;
#line 24 "../docklets/Clock/ClockDockItem.vala"
	G_OBJECT_CLASS (klass)->constructor = docky_clock_dock_item_constructor;
#line 24 "../docklets/Clock/ClockDockItem.vala"
	G_OBJECT_CLASS (klass)->finalize = docky_clock_dock_item_finalize;
#line 1607 "ClockDockItem.c"
}

static void
docky_clock_dock_item_instance_init (DockyClockDockItem * self,
                                     gpointer klass)
{
#line 24 "../docklets/Clock/ClockDockItem.vala"
	self->priv = docky_clock_dock_item_get_instance_private (self);
#line 29 "../docklets/Clock/ClockDockItem.vala"
	self->priv->timer_id = 0U;
#line 1618 "ClockDockItem.c"
}

static void
docky_clock_dock_item_finalize (GObject * obj)
{
	DockyClockDockItem * self;
	DockyClockPreferences* prefs = NULL;
	PlankDockItemPreferences* _tmp0_;
	PlankDockItemPreferences* _tmp1_;
	DockyClockPreferences* _tmp2_;
	guint _tmp3_;
	GQuark _tmp4_;
	DockyClockPreferences* _tmp5_;
	guint _tmp6_;
	GQuark _tmp7_;
	DockyClockPreferences* _tmp8_;
	guint _tmp9_;
	GQuark _tmp10_;
#line 24 "../docklets/Clock/ClockDockItem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, DOCKY_TYPE_CLOCK_DOCK_ITEM, DockyClockDockItem);
#line 64 "../docklets/Clock/ClockDockItem.vala"
	if (self->priv->timer_id > 0U) {
#line 65 "../docklets/Clock/ClockDockItem.vala"
		g_source_remove (self->priv->timer_id);
#line 1643 "ClockDockItem.c"
	}
#line 67 "../docklets/Clock/ClockDockItem.vala"
	_tmp0_ = plank_dock_item_get_Prefs ((PlankDockItem*) self);
#line 67 "../docklets/Clock/ClockDockItem.vala"
	_tmp1_ = _tmp0_;
#line 67 "../docklets/Clock/ClockDockItem.vala"
	prefs = G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, DOCKY_TYPE_CLOCK_PREFERENCES, DockyClockPreferences);
#line 68 "../docklets/Clock/ClockDockItem.vala"
	_tmp2_ = prefs;
#line 68 "../docklets/Clock/ClockDockItem.vala"
	g_signal_parse_name ("notify::ShowMilitary", G_TYPE_OBJECT, &_tmp3_, &_tmp4_, TRUE);
#line 68 "../docklets/Clock/ClockDockItem.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, _tmp4_, NULL, (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self);
#line 69 "../docklets/Clock/ClockDockItem.vala"
	_tmp5_ = prefs;
#line 69 "../docklets/Clock/ClockDockItem.vala"
	g_signal_parse_name ("notify::ShowDate", G_TYPE_OBJECT, &_tmp6_, &_tmp7_, TRUE);
#line 69 "../docklets/Clock/ClockDockItem.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp5_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp6_, _tmp7_, NULL, (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self);
#line 70 "../docklets/Clock/ClockDockItem.vala"
	_tmp8_ = prefs;
#line 70 "../docklets/Clock/ClockDockItem.vala"
	g_signal_parse_name ("notify::ShowDigital", G_TYPE_OBJECT, &_tmp9_, &_tmp10_, TRUE);
#line 70 "../docklets/Clock/ClockDockItem.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp8_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp9_, _tmp10_, NULL, (GCallback) _docky_clock_dock_item_handle_prefs_changed_g_object_notify, self);
#line 28 "../docklets/Clock/ClockDockItem.vala"
	_g_object_unref0 (self->priv->layout);
#line 31 "../docklets/Clock/ClockDockItem.vala"
	_g_free0 (self->priv->current_theme);
#line 24 "../docklets/Clock/ClockDockItem.vala"
	G_OBJECT_CLASS (docky_clock_dock_item_parent_class)->finalize (obj);
#line 1675 "ClockDockItem.c"
}

static GType
docky_clock_dock_item_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (DockyClockDockItemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) docky_clock_dock_item_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (DockyClockDockItem), 0, (GInstanceInitFunc) docky_clock_dock_item_instance_init, NULL };
	GType docky_clock_dock_item_type_id;
	docky_clock_dock_item_type_id = g_type_register_static (PLANK_TYPE_DOCKLET_ITEM, "DockyClockDockItem", &g_define_type_info, 0);
	DockyClockDockItem_private_offset = g_type_add_instance_private (docky_clock_dock_item_type_id, sizeof (DockyClockDockItemPrivate));
	return docky_clock_dock_item_type_id;
}

GType
docky_clock_dock_item_get_type (void)
{
	static volatile gsize docky_clock_dock_item_type_id__volatile = 0;
	if (g_once_init_enter (&docky_clock_dock_item_type_id__volatile)) {
		GType docky_clock_dock_item_type_id;
		docky_clock_dock_item_type_id = docky_clock_dock_item_get_type_once ();
		g_once_init_leave (&docky_clock_dock_item_type_id__volatile, docky_clock_dock_item_type_id);
	}
	return docky_clock_dock_item_type_id__volatile;
}

